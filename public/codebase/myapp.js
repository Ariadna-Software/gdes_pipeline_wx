!function(e){var t={};function o(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(i,a,function(t){return e[t]}.bind(null,a));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/codebase/",o(o.s=82)}([function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var i=o(19),a=o(2),r={getUsuarioCookie:function(){var e=i.a.getCookie("gdes_pipeline_usuario");return e?JSON.parse(e):null},setUsuarioCookie:function(e){i.a.setCookie("gdes_pipeline_usuario",JSON.stringify(e),1)},deleteUsuarioCookie:function(e){i.a.deleteCookie("gdes_pipeline_usuario")},checkLoggedUser:function(){var e=a.a.getApiUrl()+"/auth/openid",t=r.getUsuarioCookie();return t||(window.open(e,"_self"),!1)},getUsuarios:function(e){return new webix.promise((function(t,o){var i=a.a.getApiUrl()+"/api/usuarios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(i).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getLoginEmail:function(e){return new webix.promise((function(t,o){var i=a.a.getApiUrl()+"/login/email";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).post(i,{usuario:{email:e}}).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncUsuarios:function(e){var t=a.a.getApiUrl()+"/api/usuarios",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),i={data:null,err:null};return 200!=o.status?i.err=o:i.data=JSON.parse(o.response),i},getUsuario:function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/usuarios/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},postUsuario:function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/usuarios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},putUsuario:function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/usuarios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},deleteUsuario:function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/usuarios/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},cleanData:function(e){return delete e.grupo,delete e.getKeyTime,delete e.expKeyTime,e}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={errorMessageAjax:function(e){var t="Error desconocido";if(t=e.response?e.response:e,webix.alert({type:"alert-error",title:"ERROR",text:t}),401==e.status){var o=i.a.getApiUrl()+"/auth/openid";window.open(o,"_self")}},errorMessage:function(e){webix.alert({type:"alert-error",title:"ERROR",text:e})},normalMessage:function(e){webix.alert({title:"INFORMATION",text:e})}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var i={getApiUrl:function(){return""},getConfigMysql:function(e){return new webix.promise((function(t,o){webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get("/pwbi/config").then((function(e){t(e.json())})).catch((function(e){o(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var i={prepareDataForDataTable:function(e,t){var o=[];return t.forEach((function(t){t.id=t[e],o.push(t)})),o},prepareDataForDataTableWidthDates:function(e,t,o){var i=[];return o.forEach((function(o){o.id=o[e],t.forEach((function(e){o[e]=new Date(o[e])})),i.push(o)})),i},prepareDataForCombo:function(e,t,o){var i=[];return o.forEach((function(o){i.push({id:o[e],value:o[t]})})),i}}},function(e,t,o){"use strict";var i=function(){function e(){this.webixJet=!0,this._id=webix.uid(),this._events=[],this._subs={},this._data={}}return e.prototype.getRoot=function(){return this._root},e.prototype.destructor=function(){for(var e=this._events,t=e.length-1;t>=0;t--)e[t].obj.detachEvent(e[t].id);for(var o in this._subs){var i=this._subs[o].view;i&&i.destructor()}this._events=this._container=this.app=this._parent=null},e.prototype.setParam=function(e,t,o){var i;this._data[e]!==t&&(this._data[e]=t,this.app.callEvent("app:paramchange",[this,e,t,o])&&o&&this.show(((i={})[e]=t,i)))},e.prototype.getParam=function(e,t){var o=this._data[e];if(void 0!==o||!t)return o;var i=this.getParentView();return i?i.getParam(e,t):void 0},e.prototype.getUrl=function(){return this._url},e.prototype.render=function(e,t,o){var i=this;this._parent=o,t&&(this._index=t[0].index),this._init_url_data(t);var a="string"==typeof(e=e||document.body)?webix.toNode(e):e;return this._container!==a?(this._container=a,this._render(t).then((function(){return i.getRoot()}))):this._urlChange(t).then((function(){return i.getRoot()}))},e.prototype.getIndex=function(){return this._index},e.prototype.getId=function(){return this._id},e.prototype.getParentView=function(){return this._parent},e.prototype.$$=function(e){if("string"==typeof e){var t=this.getRoot();return t.queryView((function(o){return(o.config.id===e||o.config.localId===e)&&o.$scope===t.$scope}),"self")}return e},e.prototype.on=function(e,t,o){var i=e.attachEvent(t,o);return this._events.push({obj:e,id:i}),i},e.prototype.contains=function(e){for(var t in this._subs){var o=this._subs[t].view;if(o===e||o.contains(e))return!0}return!1},e.prototype.getSubView=function(e){var t=this.getSubViewInfo(e);if(t)return t.subview.view},e.prototype.getSubViewInfo=function(e){var t=this._subs[e||"default"];return t?{subview:t,parent:this}:this._parent?this._parent.getSubViewInfo(e):null},e.prototype.getName=function(){return this._name},e.prototype._init_url_data=function(e){e&&e[0]&&(this._data={},webix.extend(this._data,e[0].params,!0)),this._url=e},e}();function a(e){"/"===e[0]&&(e=e.substr(1));for(var t=e.split("/"),o=[],i=0;i<t.length;i++){var a=t[i],r={},n=a.indexOf(":");if(-1===n&&(n=a.indexOf("?")),-1!==n)for(var s=0,c=a.substr(n+1).split(/[\:\?\&]/g);s<c.length;s++){var l=c[s].split("=");r[l[0]]=decodeURIComponent(l[1])}o[i]={page:n>-1?a.substr(0,n):a,params:r,index:i+1}}return o}function r(e){for(var t=[],o=0,i=e;o<i.length;o++){var a=i[o];t.push("/"+a.page);var r=n(a.params);r&&t.push("?"+r)}return t.join("")}function n(e){var t=[];for(var o in e)t.length&&t.push("&"),t.push(o+"="+encodeURIComponent(e[o]));return t.join("")}var s,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])},function(e,t){function o(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(t,o){var i=e.call(this)||this;return i.app=t,i._name=o,i._children=[],i}return l(t,e),t.prototype.ui=function(e,t){var o=(t=t||{}).container||e.container,a=this.app.createView(e);return this._children.push(a),a.render(o,null,this),"object"!==(void 0===e?"undefined":c(e))||e instanceof i?a:a.getRoot()},t.prototype.show=function(e,t){var o=this;if(t=t||{},"string"==typeof e){if("/"===e.substr(0,1))return this.app.show(e);if(0===e.indexOf("../")){var i=this.getParentView();return void(i?i.show("./"+e.substr(3),t):this.app.show("/"+e.substr(3)))}0===e.indexOf("./")&&(e=e.substr(2));var n=this.getSubViewInfo(t.target);if(!n)return this.app.show("/"+e);if(n.parent!==this)return n.parent.show(e,t)}var s=a(this.app.getRouter().get());if("object"===(void 0===e?"undefined":c(e)))if(webix.isArray(e)){var l=this._index+e[0];s[l]||(s[l]={}),s[l].page=e[1],e=""}else{var u=[];for(var p in e)u.push(encodeURIComponent(p)+"="+encodeURIComponent(e[p]));e="?"+u.join("&")}if("string"==typeof e){if("?"===e.substr(0,1)){var d=e.indexOf("/"),f=e;d>-1&&(f=e.substr(0,d));var m=a(f);webix.extend(s[this._index-1].params,m[0].params,!0),e=d>-1?e.substr(d+1):""}var h=""===e?s.slice(this._index):a(e),b=null;if(this._index){b=s.slice(0,this._index).concat(h);for(var g=0;g<b.length;g++)b[g].index=g+1;var w=r(b);return this.app.canNavigate(w,this).then((function(e){return null!==e?w!==e?o.app.show(e):o._finishShow(b,e):null}))}return this._finishShow(h,"")}},t.prototype.init=function(e,t){},t.prototype.ready=function(e,t){},t.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},t.prototype.urlChange=function(e,t){},t.prototype.destroy=function(){},t.prototype.destructor=function(){this.destroy(),this._destroyKids(),this.app=this._parentFrame=null,this._root.destructor(),e.prototype.destructor.call(this)},t.prototype.use=function(e,t){e(this.app,this,t)},t.prototype.refresh=function(){var e=this;this._destroyKids();var t=[];this._index>1&&(t=a(this.app.getRouter().get()).slice(this._index-1)),this._render(t).then((function(){e._parentFrame.id=e.getRoot().config.id}))},t.prototype._render=function(e){var t=this,o=this.config();return o.then?o.then((function(o){return t._render_final(o,e)})):this._render_final(o,e)},t.prototype._render_final=function(e,t){var o,i=this,a=this._container;if(a&&a.$destructed)return Promise.reject("Container destroyed");var r={ui:{}};this.app.copyConfig(e,r.ui,this._subs),this.app.callEvent("app:render",[this,t,r]),r.ui.$scope=this;try{if(a&&a.getParentView){var n=a.getParentView();n&&"multiview"===n.name&&!r.ui.id&&(r.ui.id=a.config.id)}this._root=this.app.webix.ui(r.ui,this._container),this._root.getParentView()&&(this._container=this._root),this._init(this._root,t),o=this._urlChange(t).then((function(){return i.ready(i._root,t)}))}catch(e){o=Promise.reject(e)}return o.catch((function(e){return i._initError(i,e)}))},t.prototype._init=function(e,t){return this.init(e,t)},t.prototype._urlChange=function(e){var t=this;this.app.callEvent("app:urlchange",[this,e,this._index]);var o=[];for(var i in this._subs){var a=this._renderFrame(i,this._subs[i],e);a&&o.push(a)}return Promise.all(o).then((function(){t.urlChange(t._root,e)}))},t.prototype._renderFrame=function(e,t,o){if(t.url){if("string"==typeof t.url){var i=a(t.url);return i.map((function(e){e.index=0})),this._createSubView(t,i)}var r=t.view;return"function"!=typeof t.url||r instanceof t.url||(r=new t.url(this.app,"")),r||(r=t.url),this._renderSubView(t,r,o)}if("default"===e&&o&&o.length>1){var n=o.slice(1);return this._createSubView(t,n)}},t.prototype._initError=function(e,t){return this.app.error("app:error:initview",[t,e]),!0},t.prototype._createSubView=function(e,t){var o=this;return this.app.createFromURL(t,e.view).then((function(i){return o._renderSubView(e,i,t)}))},t.prototype._renderSubView=function(e,o,i){var a=this.app.webix.$$(e.id);return o.render(a,i,this).then((function(i){return e.view&&e.view!==o&&e.view.destructor(),e.view=o,e.id=i.config.id,o instanceof t&&(o._parentFrame=e),i}))},t.prototype._finishShow=function(e,t){var o;return this._index?(o=this._renderPartial(e.slice(this._index-1)),this.app.getRouter().set(t,{silent:!0}),this.app.callEvent("app:route",[e])):(e.map((function(e){return e.index=0})),o=this._renderPartial([null].concat(e))),o},t.prototype._renderPartial=function(e){return this._init_url_data(e),this._urlChange(e)},t.prototype._destroyKids=function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t]&&e[t].destructor&&e[t].destructor();this._children=[]},t}(i),p=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),d=function(e){function t(t,o,i){var a=e.call(this,t,o)||this;return a._ui=i,a._windows=[],a}return p(t,e),t.prototype.getRoot=function(){if(this.app.config.jet1xMode){var e=this.getParentView();if(e)return e.getRoot()}return this._root},t.prototype.config=function(){return this._ui.$ui||this._ui},t.prototype.destructor=function(){var t=this._ui.$ondestroy;t&&t();for(var o=0,i=this._windows;o<i.length;o++){i[o].destructor()}e.prototype.destructor.call(this)},t.prototype.show=function(t,o){if(0===t.indexOf("/")||0===t.indexOf("./"))return e.prototype.show.call(this,t,o);e.prototype.show.call(this,"../"+t,o)},t.prototype.init=function(){this.app.config.legacyEarlyInit&&this._realInitHandler()},t.prototype.ready=function(){this.app.config.legacyEarlyInit||this._realInitHandler()},t.prototype._realInitHandler=function(){var e=this._ui.$oninit;if(e){var o=this.getRoot();e(o,o.$scope)}var i=this._ui.$onevent;if(i)for(var a in i)this.on(this.app,a,i[a]);var r=this._ui.$windows;if(r)for(var n=0,s=r;n<s.length;n++){var c=s[n];if(c.$ui){var l=new t(this.app,this.getName(),c);l.render(document.body),this._windows.push(l)}else this.ui(c)}},t.prototype._urlChange=function(t){var o=this;return e.prototype._urlChange.call(this,t).then((function(){var e=o._ui.$onurlchange;if(e){var i=o.getRoot();e(t[0].params,t.slice(1),i.$scope)}}))},t}(u),f=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),m=function(e){function t(t,o,i){var a=e.call(this,t,o)||this;return a._ui=i,a}return f(t,e),t.prototype.config=function(){return this._ui},t}(u),h=o(36),b=o.n(h),g=function(){function e(e,t){var o=this;this.config=t||{},this._prefix=this.config.routerPrefix,void 0===this._prefix&&(this._prefix="!");var i=function(e){};b()(this._prefix+"*",(function(){return o._lastUrl="",i(o.get())})),i=e}return e.prototype.set=function(e,t){if(this.config.routes){var o=e.split("?",2);for(var i in this.config.routes)if(this.config.routes[i]===o[0]){e=i+(o.length>1?"?"+o[1]:"");break}}this._lastUrl=e,b.a.navigate(this._prefix+e,t)},e.prototype.get=function(){var e=this._lastUrl||(window.location.hash||"").replace("#"+this._prefix,"");if(this.config.routes){var t=e.split("?",2),o=this.config.routes[t[0]];o&&(e=o+(t.length>1?"?"+t[1]:""))}return e},e}(),w=(o(83),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),v=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),y=function(e){function t(t){var o=e.call(this)||this;return o.webix=t.webix||webix,o.config=o.webix.extend({name:"App",version:"1.0",start:"/home"},t,!0),o._name=o.config.name,o._services={},webix.extend(o,webix.EventSystem),o}return v(t,e),t.prototype.getService=function(e){var t=this._services[e];return"function"==typeof t&&(t=this._services[e]=t(this)),t},t.prototype.setService=function(e,t){this._services[e]=t},t.prototype.copyConfig=function(e,t,o){if(e.$ui?e={$subview:new d(this,"",e)}:(e instanceof i||"function"==typeof e&&e.prototype instanceof i)&&(e={$subview:e}),e.$subview)return this.addSubView(e,t,o);for(var a in t=t||(e instanceof Array?[]:{}),e){var r=e[a];"function"==typeof r&&r.prototype instanceof i&&(r={$subview:r}),!r||"object"!==(void 0===r?"undefined":w(r))||r instanceof webix.DataCollection||r instanceof RegExp?t[a]=r:r instanceof Date?t[a]=new Date(r):t[a]=this.copyConfig(r,r instanceof Array?[]:{},o)}return t},t.prototype.getRouter=function(){return this.$router},t.prototype.clickHandler=function(e){if(e){var t=e.target||e.srcElement;if(t&&t.getAttribute){var o=t.getAttribute("trigger");o&&this.trigger(o);var i=t.getAttribute("route");i&&this.show(i)}}},t.prototype.refresh=function(){var e=this._container;this._view.destructor(),this._view=this._container=null,this.render(e,a(this.getRouter().get()),this._parent)},t.prototype.loadView=function(e){var t=this,i=this.config.views,a=null;if(""===e)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{i&&"string"==typeof(a="function"==typeof i?i(e):i[e])&&(e=a,a=null),a||(e=e.replace(/\./g,"/"),a=o(84)("./"+e))}catch(t){a=this._loadError(e,t)}return a.then||(a=Promise.resolve(a)),a=a.then((function(e){return e.__esModule?e.default:e})).catch((function(o){return t._loadError(e,o)}))},t.prototype.createFromURL=function(e,t){var o=this,i=e[0],a=i.page;return t&&t.getName()===a?Promise.resolve(t):this.loadView(i.page).then((function(e){return o.createView(e,a)}))},t.prototype.createView=function(e,t){if("function"==typeof e){if(e.prototype instanceof i)return new e(this,t);e=e()}return e instanceof i?e:e.$ui?new d(this,t,e):new m(this,t,e)},t.prototype.show=function(e){return this.$router.get()!==e?this._render(e):Promise.resolve(!0)},t.prototype.canNavigate=function(e,t){var o={url:a(e),redirect:e,confirm:Promise.resolve(!0)};return this.callEvent("app:guard",[e,t||this._view,o])?o.confirm.catch((function(){return o.redirect=null})).then((function(){return o.redirect})):Promise.reject("")},t.prototype.destructor=function(){this._view.destructor()},t.prototype.trigger=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.apply(e,t)},t.prototype.apply=function(e,t){this.callEvent(e,t)},t.prototype.action=function(e){return this.webix.bind((function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.apply(e,t)}),this)},t.prototype.on=function(e,t){this.attachEvent(e,t)},t.prototype.use=function(e,t){e(this,null,t)},t.prototype.error=function(e,t){if(this.callEvent(e,t),this.callEvent("app:error",t),this.config.debug)for(var o=0;o<t.length;o++)if(console.error(t[o]),t[o]instanceof Error){var i=t[o].message;0===i.indexOf("Module build failed")?(i=i.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>"+i+"</pre>"):(i+="<br><br>Check console for more details",webix.message({type:"error",text:i,expire:-1}))}},t.prototype._render=function(e){var t=this;!this.$router&&(webix.attachEvent("onClick",(function(e){return t.clickHandler(e)})),e=this._first_start(e));var o="string"==typeof e?e:r(e);return this.canNavigate(o).then((function(e){return null!==e?(t.$router.set(e,{silent:!0}),t._render_stage(e)):null}))},t.prototype._render_stage=function(e){var t=this,o="string"==typeof e?a(e):e;return webix.ui.freeze((function(){return t.createFromURL(o,t._view).then((function(e){var i=t._view;return t._view=e,e.render(t._container,o,t._parent).then((function(a){return i&&i!==t._view&&i.destructor(),t._view.getRoot().getParentView()&&(t._container=a),t._root=a,t.callEvent("app:route",[o]),e}))})).catch((function(e){t.error("app:error:render",[e])}))}))},t.prototype._urlChange=function(e){return alert("Not implemented"),Promise.resolve(!0)},t.prototype._first_start=function(e){var t=this;if(this.$router=new(this.config.router||g)((function(e){return setTimeout((function(){t._render(e)}),1)}),this.config),this._container===document.body&&!1!==this.config.animation){var o=this._container;webix.html.addCss(o,"webixappstart"),setTimeout((function(){webix.html.removeCss(o,"webixappstart"),webix.html.addCss(o,"webixapp")}),10)}return e&&1!==e.length||(e=this.$router.get()||this.config.start,this.$router.set(e,{silent:!0})),e},t.prototype._loadError=function(e,t){return this.error("app:error:resolve",[t,e]),{template:" "}},t.prototype.addSubView=function(e,t,o){var a=!0!==e.$subview?e.$subview:null,r=e.name||(a?this.webix.uid():"default");t.id=e.id||"s"+this.webix.uid();var n=o[r]={id:t.id,url:a};return n.url instanceof i&&(n.view=n.url),t},t}(i);(function(){function e(e,t){this.name=t.storeName||t.id+":route",this.cb=e}e.prototype.set=function(e,t){var o=this;webix.storage.session.put(this.name,e),t&&t.silent||setTimeout((function(){return o.cb(e)}),1)},e.prototype.get=function(){return webix.storage.session.get(this.name)}})(),function(){function e(e,t){var o=this;this.cb=e,window.onpopstate=function(){return o.cb(o.get())},this.prefix=t.routerPrefix||""}e.prototype.set=function(e,t){var o=this;this.get()!==e&&window.history.pushState(null,null,this.prefix+e),t&&t.silent||setTimeout((function(){return o.cb(e)}),1)},e.prototype.get=function(){var e=window.location.pathname.replace(this.prefix,"");return"/"!==e?e:""}}(),function(){function e(e,t){this.path="",this.cb=e}e.prototype.set=function(e,t){var o=this;this.path=e,t&&t.silent||setTimeout((function(){return o.cb(e)}),1)},e.prototype.get=function(){return this.path}}();var x=o(81),$=o.n(x);function C(e,t,o){t.urls&&(o=t.urls[o]||o),e.show("./"+o)}var I={good:"check",error:"warning",saving:"refresh fa-spin"},U={good:"Ok",error:"Error",saving:"Connecting..."};function A(e,t,o){for(var i=0;i<o.length;i++)e.setParam(o[i],t[i+1]?t[i+1].page:"")}o.d(t,"d",(function(){return P})),o.d(t,"b",(function(){return y})),o.d(t,"c",(function(){return u})),o.d(t,"a",(function(){return g}));var P={UnloadGuard:function(e,t,o){t.on(e,"app:guard",(function(e,i,a){if(i===t||i.contains(t)){var r=o();a.confirm=!1===r?Promise.reject(r):a.confirm.then((function(){return r}))}}))},Locale:function(e,t,i){var a=(i=i||{}).storage,r=a?a.get("lang")||"en":i.lang||"en",n={_:null,polyglot:null,getLang:function(){return r},setLang:function(t,s){var c=(i.path?i.path+"/":"")+t,l=o(85)("./"+c);l.__esModule&&(l=l.default);var u=n.polyglot=new $.a({phrases:l});u.locale(t),n._=webix.bind(u.t,u),r=t,a&&a.put("lang",r),s||e.refresh()}};e.setService("locale",n),n.setLang(r,!0)},Menu:function(e,t,o){var i=t.$$(o.id||o),a=!1;i.attachEvent("onchange",(function(){a||C(t,o,this.getValue())})),i.attachEvent("onafterselect",(function(){if(!a){var e=null;i.setValue?e=this.getValue():i.getSelectedId&&(e=i.getSelectedId()),C(t,o,e)}})),t.on(e,"app:route",(function(e){var o=e[t.getIndex()];if(o){a=!0;var r=o.page;i.setValue&&i.getValue()!==r?i.setValue(r):i.select&&i.exists(r)&&i.getSelectedId()!==r&&i.select(r),a=!1}}))},Theme:function(e,t,o){var i=(o=o||{}).storage,a=i?i.get("theme")||"flat-default":o.theme||"flat-default",r={getTheme:function(){return a},setTheme:function(t,o){for(var r=t.split("-"),n=document.getElementsByTagName("link"),s=0;s<n.length;s++){var c=n[s].getAttribute("title");c&&(c===t||c===r[0]?n[s].disabled=!1:n[s].disabled=!0)}webix.skin.set(r[0]),webix.html.removeCss(document.body,"theme-"+a),webix.html.addCss(document.body,"theme-"+t),a=t,i&&i.put("theme",t),o||e.refresh()}};e.setService("theme",r),r.setTheme(a,!0)},User:function(e,t,o){var i=(o=o||{}).login||"/login",a=o.logout||"/logout",r=o.afterLogin||e.config.start,n=o.afterLogout||"/login",s=o.ping||3e5,c=o.model,l=o.user,u={getUser:function(){return l},getStatus:function(e){return e?c.status().catch((function(){return null})).then((function(e){l=e})):null!==l},login:function(t,o){return c.login(t,o).then((function(t){if(l=t,!t)throw new Error("Access denied");e.callEvent("app:user:login",[l]),e.show(r)}))},logout:function(){return l=null,c.logout().then((function(t){return e.callEvent("app:user:logout",[]),t}))}};function p(e,t){e===a?(u.logout(),t.redirect=n):e===i||u.getStatus()||(t.redirect=i)}e.setService("user",u),e.attachEvent("app:guard",(function(e,t,o){return void 0===l&&(o.confirm=u.getStatus(!0).then((function(){return p(e,o)}))),p(e,o)})),s&&setInterval((function(){return u.getStatus(!0)}),s)},Status:function(e,t,o){var i="good",a=0,r=!1,n=o.expire;n||!1===n||(n=2e3);var s=o.texts||U,c=o.icons||I;function l(e){var a=t.$$(o.target);a&&(e||(e="<div class='status_"+i+"'><span class='webix_icon fa-"+c[i]+"'></span> "+s[i]+"</div>"),a.setHTML(e))}function u(){a--,m("good")}function p(e){a--,m("error",e)}function d(e){a++,m("saving"),e&&e.then&&e.then(u,p)}function f(){0===a&&l(" ")}function m(t,o){a<0&&(a=0),"saving"===t?(i="saving",l()):(r="error"===t,0===a&&(i=r?"error":"good",r?e.error("app:error:server",[o.responseText||o]):n&&setTimeout(f,n),l()))}function h(e){var o=webix.dp(e);o&&(t.on(o,"onAfterDataSend",d),t.on(o,"onAfterSaveError",(function(e,t,o){return p(o)})),t.on(o,"onAfterSave",u))}"string"==typeof o&&(o={target:o}),e.setService("status",{getStatus:function(){return i},setStatus:m,track:h}),o.remote&&t.on(webix,"onRemoteCall",d),o.ajax&&t.on(webix,"onBeforeAjax",(function(e,t,o,i,a,r,n){d(n)})),o.data&&h(o.data)},UrlParam:function(e,t,o){var i=o.route||o;t.on(e,"app:urlchange",(function(e,o){t===e&&(A(t,o,i),o.splice(1,i.length))})),t.on(e,"app:paramchange",(function(e,o,a,r){if(t===e&&r)for(var n=0;n<i.length;n++)if(i[n]===o)return t.show([n,a]),!1})),A(t,t.getUrl(),i)}};window.Promise||(window.Promise=webix.promise)},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getAreas:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/areas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncAreas:function(e){var t=i.a.getApiUrl()+"/api/areas",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getArea:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/areas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postArea:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/areas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putArea:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/areas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteArea:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/areas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},checkFormValues:function(e){return""==e.orden&&(e.orden=null),e}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getUnidadesNegocio:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/unidades-negocio";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncUnidadesNegocio:function(e){var t=i.a.getApiUrl()+"/api/unidades-negocio",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getUnidadNegocio:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/unidades-negocio/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postUnidadNegocio:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/unidades-negocio";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putUnidadNegocio:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/unidades-negocio";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteUnidadNegocio:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/unidades-negocio/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getPaises:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/paises";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncPaises:function(e){var t=i.a.getApiUrl()+"/api/paises",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getPais:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/paises/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postPais:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/paises";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putPais:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/paises";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deletePais:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/paises/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getParametros:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/parametros/0";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getParametrosContadores:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/parametros/contadores/"+e.empresaId+"/"+e.areaId;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},putParametros:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/parametros";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getDivisas:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/divisas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncDivisas:function(e){var t=i.a.getApiUrl()+"/api/divisas",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getDivisa:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/divisas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postDivisa:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/divisas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putDivisa:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/divisas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteDivisa:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/divisas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getEmpresas:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/empresas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncEmpresas:function(e){var t=i.a.getApiUrl()+"/api/empresas",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getEmpresa:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/empresas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postEmpresa:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/empresas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putEmpresa:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/empresas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteEmpresa:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/empresas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getVersionApp:function(){return new webix.promise((function(e,t){var o=i.a.getApiUrl()+"/version";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json"}).get(o).then((function(t){e(t.json())})).catch((function(e){t(e)}))}))},getVersiones:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/versiones";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncVersiones:function(e){var t=i.a.getApiUrl()+"/api/versiones",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getVersion:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/versiones/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},getVersionesOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/versiones/oferta/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postVersion:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/versiones";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putVersion:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/versiones";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteVersion:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/versiones/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},checkFormValues:function(e){return e}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getGruposUsuarios:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/grupos-usuarios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncGruposUsuarios:function(e){var t=i.a.getApiUrl()+"/api/grupos-usuarios",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getGrupoUsuario:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/grupos-usuarios/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postGrupoUsuario:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/grupos-usuarios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putGrupoUsuario:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/grupos-usuarios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteGrupoUsuario:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/grupos-usuarios/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getOfertas:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/ofertas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getOfertasUsuario:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/ofertas/usuario/"+e.usuarioId+"/"+e.grupoUsuarioId+"/"+e.grupoUsuarioId2+"/"+e.grupoUsuarioId3+"/"+e.grupoUsuarioId4+"/"+e.grupoUsuarioId5+"/"+e.grupoUsuarioId6+"/"+e.grupoUsuarioId7;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getOfertasSeguidores:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/ofertas/seguidores/"+e.responsableId+"/"+e.usuarioId;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncOfertas:function(e){var t=i.a.getApiUrl()+"/api/ofertas",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},checkFormValues:function(e){return""==e.orden&&(e.orden=null),e},cleanData:function(e){return delete e.nomArea,delete e.nomUnidadNegocio,delete e.nomEmpresa,delete e.pais,delete e.faseOferta,delete e.tipoOportunidad,delete e.tipoContrato,delete e.estado,delete e.razonPerdida,delete e.divisa,delete e.servicio,delete e.responsable,Object.keys(e).forEach((function(t){""==e[t]&&(e[t]=null)})),e}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getUbicaciones:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/ubicaciones";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncUbicaciones:function(e){var t=i.a.getApiUrl()+"/api/ubicaciones",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getUbicacion:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ubicaciones/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postUbicacion:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ubicaciones";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putUbicacion:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ubicaciones";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteUbicacion:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ubicaciones/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getEstados:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/estados";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncEstados:function(e){var t=i.a.getApiUrl()+"/api/estados",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getEstado:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/estados/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postEstado:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/estados";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putEstado:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/estados";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteEstado:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/estados/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getFasesOferta:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/fases-oferta";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncFasesOferta:function(e){var t=i.a.getApiUrl()+"/api/fases-oferta",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getFaseOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/fases-oferta/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postFaseOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/fases-oferta";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putFaseOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/fases-oferta";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteFaseOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/fases-oferta/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getTiposOportunidad:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/tipos-oportunidad";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncTiposOportunidad:function(e){var t=i.a.getApiUrl()+"/api/tipos-oportunidad",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getTipoOportunidad:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/tipos-oportunidad/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postTipoOportunidad:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/tipos-oportunidad";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putTipoOportunidad:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/tipos-oportunidad";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteTipoOportunidad:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/tipos-oportunidad/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getServicios:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/servicios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncServicios:function(e){var t=i.a.getApiUrl()+"/api/servicios",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getServicio:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/servicios/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postServicio:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/servicios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putServicio:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/servicios";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteServicio:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/servicios/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},checkFormValues:function(e){return""==e.orden&&(e.orden=null),e},cleanData:function(e){return delete e.nombreArea,delete e.areas,e}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var i={areCookiesEnabled:function(){var e=!!navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||e||(document.cookie="testcookie",e=-1!=document.cookie.indexOf("testcookie")),e},setCookie:function(e,t,o){i.areCookiesEnabled()||alert("NO COOKIES");var a=new Date;a.setDate(a.getDate()+o);var r=encodeURI(t)+(null==o?"":"; expires="+a.toUTCString());document.cookie=e+"="+r},deleteCookie:function(e){i.areCookiesEnabled()||alert("NO COOKIES"),document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},getCookie:function(e){var t,o,i,a=document.cookie.split(";");for(t=0;t<a.length;t++)if(o=a[t].substr(0,a[t].indexOf("=")),i=a[t].substr(a[t].indexOf("=")+1),(o=o.replace(/^\s+|\s+$/g,""))==e)return decodeURI(i)}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getRazonesPerdida:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/razon-perdida";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncRazonesPerdida:function(e){var t=i.a.getApiUrl()+"/api/razon-perdida",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getRazonPerdida:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/razon-perdida/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postRazonPerdida:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/razon-perdida";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putRazonPerdida:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/razon-perdida";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteRazonPerdida:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/razon-perdida/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));o(19);var i=o(2),a={getTiposContrato:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/tipos-contrato";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncTiposContrato:function(e){var t=i.a.getApiUrl()+"/api/tipos-contrato",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getTipoContrato:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/tipos-contrato/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postTipoContrato:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/tipos-contrato";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putTipoContrato:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/tipos-contrato";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteTipoContrato:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/tipos-contrato/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))}}},function(e,t,o){"use strict";o.r(t),o.d(t,"languageService",(function(){return r}));var i=o(4),a={groupDelimiter:".",groupSize:3,decimalDelimiter:",",decimalSize:2,dateFormat:"%d/%m/%Y",timeFormat:"%H:%i",longDateFormat:"%d %F %Y",fullDateFormat:"%d.%m.%Y %H:%i",am:null,pm:null,price:"{obj} €",calendar:{monthFull:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthShort:["En","Feb","Mar","Abr","Mayo","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayFull:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],dayShort:["Dom","Lun","Mar","Mier","Jue","Vier","Sab"]},hours:"Horas ",minutes:"Minutos",done:"Listo",controls:{select:"Seleccione"}},r={setLanguage:function(e,t){e.use(i.d.Locale,{lang:t}),webix.i18n.locales[t]=a,webix.i18n.setLocale(t)}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getOfertasHitos:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/ofertas-hitos";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getOfertasHitosOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas-hitos/oferta/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},getSyncOfertasHitos:function(e){var t=i.a.getApiUrl()+"/api/ofertas-hitos",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getOfertaHito:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas-hitos/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postOfertaHito:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas-hitos";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putOfertaHito:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas-hitos";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteOfertaHito:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/ofertas-hitos/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},checkFormValues:function(e){return""==e.orden&&(e.orden=null),e},prepareData:function(e){return e.forEach((function(e){e.fecha=new Date(e.fecha)})),e}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var i=o(2),a={getSeguidores:function(e){return new webix.promise((function(t,o){var a=i.a.getApiUrl()+"/api/seguidores";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(a).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSeguidoresOferta:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/seguidores/ofertas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},getSyncSeguidores:function(e){var t=i.a.getApiUrl()+"/api/seguidores",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),a={data:null,err:null};return 200!=o.status?a.err=o:a.data=JSON.parse(o.response),a},getSeguidor:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/seguidores/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},postSeguidor:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/seguidores";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},putSeguidor:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/seguidores";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},deleteSeguidor:function(e,t){return new webix.promise((function(o,a){var r=i.a.getApiUrl()+"/api/seguidores/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){a(e)}))}))},checkFormValues:function(e){return""==e.orden&&(e.orden=null),e},prepareData:function(e){return e.forEach((function(e){e.fecha=new Date(e.fecha)})),e}}},function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));o(19);var i,a=o(2),r=((i={getGrupoUsuarioLineas:function(e){return new webix.promise((function(t,o){var i=a.a.getApiUrl()+"/api/grupos-usuarios-lineas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(i).then((function(e){t(e.json())})).catch((function(e){o(e)}))}))},getSyncGrupoUsuarioLineas:function(e){var t=a.a.getApiUrl()+"/api/grupos-usuarios-lineas",o=webix.ajax().headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).sync().get(t),i={data:null,err:null};return 200!=o.status?i.err=o:i.data=JSON.parse(o.response),i}}).getGrupoUsuarioLineas=function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/grupos-usuarios-lineas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},i.getGrupoUsuarioLineasGrupo=function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/grupos-usuarios-lineas/grupo/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).get(r).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},i.postGrupoUsuarioLineas=function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/grupos-usuarios-lineas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).post(r,t).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},i.putGrupoUsuarioLineas=function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/grupos-usuarios-lineas";webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).put(r,t).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},i.deleteGrupoUsuarioLineas=function(e,t){return new webix.promise((function(o,i){var r=a.a.getApiUrl()+"/api/grupos-usuarios-lineas/"+t;webix.ajax().timeout(1e4).headers({"Content-Type":"application/json","x-apiKey":e.apiKey}).del(r).then((function(e){o(e.json())})).catch((function(e){i(e)}))}))},i)},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(25),c=o(27);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p,d,f,m=[],h=a.a.getSyncUsuarios(a.a.getUsuarioCookie());h.err?r.a.errorMessageAjax(h.err):m=n.a.prepareDataForCombo("usuarioId","nombre",h.data);var b=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-account-group",width:37,align:"left"},{view:"label",label:t("Usuarios asociados")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",tooltip:t("Nuevo registro en formulario (Ctrl+F)"),click:function(){e.gruposUsuariosLineasWindow.showWindow(f)}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",tooltip:t("Descargar como Excel"),click:function(){webix.toExcel($$("gruposUsuariosLineasGrid"),{filename:"grupos_usuarios",name:"Grupos",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"GruposUsuariosLineasNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"gruposUsuariosLineasGrid",pager:"mypager",select:"row",columns:[{id:"grupoUsuarioLineaId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"usuarioId",fillspace:!0,header:[t("Usuario asociado"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:m,width:200},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row];this.$scope.delete(t.row,i.nombre)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){p=e.row,d=this.data.pull[p]},onAfterEditStop:function(e,o,i){var n=this;if(e.value!=e.old)if(!0,this.validate(p)){delete(d=this.data.pull[p]).id;var c=d;0==c.grupoUsuarioId?s.a.postGrupoUsuario(a.a.getUsuarioCookie(),c).then((function(e){n.$scope.load(e.grupoUsuarioId),$$("gruposUsuariosLineasGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putGrupoUsuario(a.a.getUsuarioCookie(),c).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("gruposUsuariosLineasGrid").count();$$("GruposUsuariosLineasNReg").config.label="NREG: "+e,$$("GruposUsuariosLineasNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.grupoUsuarioId&&(o=t[0].params.grupoUsuarioId),webix.UIManager.addHotKey("Esc",(function(){return $$("gruposUsuariosLineasGrid").remove(-1),!1}),$$("gruposUsuariosLineasGrid")),webix.extend($$("gruposUsuariosLineasGrid"),webix.ProgressBar),f=o,this.load(o),this.gruposUsuariosLineasWindow=this.ui(c.default)},t.prototype.load=function(e){$$("gruposUsuariosLineasGrid").showProgress({type:"icon"}),s.a.getGrupoUsuarioLineasGrupo(a.a.getUsuarioCookie(),e).then((function(e){$$("gruposUsuariosLineasGrid").clearAll(),$$("gruposUsuariosLineasGrid").parse(n.a.prepareDataForDataTable("grupoUsuarioLineaId",e));var t=$$("gruposUsuariosLineasGrid").count();$$("GruposUsuariosLineasNReg").config.label="NREG: "+t,$$("GruposUsuariosLineasNReg").refresh(),$$("gruposUsuariosLineasGrid").hideProgress()})).catch((function(e){return $$("gruposUsuariosLineasGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/gruposUsuariosLineasForm?grupoUsuarioId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteGrupoUsuarioLineas(a.a.getUsuarioCookie(),e).then((function(e){i.load(f)})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("gruposUsuariosLineasGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=b},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(25),n=(o(8),o(1)),s=o(3);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=0,p=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"window",id:"gruposUsuariosLineasWindow",position:"center",move:!0,resize:!0,width:600,head:{view:"toolbar",cols:[{},{view:"icon",icon:"mdi mdi-close",click:function(){$$("gruposUsuariosLineasWindow").hide()}}]},modal:!0,body:{view:"layout",id:"grupoUsuarioLineasForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-account-group",width:37,align:"left"},{view:"label",label:e("Asociar usuario")}]},{view:"form",id:"frmGruposUsuariosLineas",elements:[{view:"combo",id:"cmbUsuario",name:"usuarioId",required:!0,options:{},label:e("Usuario"),labelPosition:"top"},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]}]},{minheight:600}]}}},t.prototype.init=function(e,t){},t.prototype.showWindow=function(e){$$("gruposUsuariosLineasWindow").show(),u=e,this.loadUsuarios()},t.prototype.cancel=function(){$$("gruposUsuariosLineasWindow").hide()},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmGruposUsuariosLineas").validate()){var o=$$("frmGruposUsuariosLineas").getValues(),i={grupoUsuarioLineaId:0,grupoUsuarioId:u,usuarioId:o.usuarioId};r.a.postGrupoUsuarioLineas(a.a.getUsuarioCookie(),i).then((function(t){e.$scope.getParentView().load(u),$$("gruposUsuariosLineasWindow").hide()})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadUsuarios=function(){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(e){var t=s.a.prepareDataForCombo("usuarioId","nombre",e),o=$$("cmbUsuario").getPopup().getList();o.clearAll(),o.parse(t)})).catch((function(e){clg("Error",e)}))},t}(i.c);t.default=p},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0);function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),n(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._,t=a.a.getUsuarioCookie();console.log("Usuario",t);var o=[];return o.push({id:"inicio",icon:"mdi mdi-home",value:e("INICIO")}),t.esAdministrador&&o.push({icon:"mdi mdi-switch",open:!0,value:e("ADMINISTRACIÓN"),data:[{id:"parametros",value:e("Parámetros"),icon:"mdi mdi-altimeter",details:"Parámetros de la aplicación"},{id:"gruposUsuarios",value:e("Grupos de visualización"),icon:"mdi mdi-account-group",details:"Grupos de usuarios"},{id:"usuarios",value:e("Usuarios"),icon:"mdi mdi-account",details:"Usuarios"},{id:"paises",value:e("Paises"),icon:"mdi mdi-flag",details:"Paises"},{id:"empresas",value:e("Empresas"),icon:"mdi mdi-cube",details:"Empresas"},{id:"unidadesNegocio",value:e("Unidades de negocio"),icon:"mdi mdi-cube-scan",details:"Unidades de negocio"},{id:"areas",value:e("Areas"),icon:"mdi mdi-cube-outline",details:"Areas"},{id:"servicios",value:e("Servicios"),icon:"mdi mdi-cube-unfolded",details:"Servicios"},{id:"fasesOferta",value:e("Fases de oferta"),icon:"mdi mdi-filter-variant",details:"Fases de oferta"},{id:"tiposOportunidad",value:e("Tipos de oportunidad"),icon:"mdi mdi-shape",details:"Tipos de oportunidad"},{id:"tiposContrato",value:e("Tipos de contrato"),icon:"mdi mdi-shape-outline",details:"Tipos de contrato"},{id:"estados",value:e("Estados"),icon:"mdi mdi-thumbs-up-down",details:"Estados"},{id:"razonesPerdida",value:e("Razon perdida"),icon:"mdi mdi-thumb-down",details:"Razon perdida"},{id:"divisas",value:e("Divisas"),icon:"mdi mdi-currency-eur",details:"Divisas"},{id:"ubicaciones",value:e("Ubicaciones"),icon:"mdi  mdi-map-marker-outline",details:"Ubicaciones"}]}),o.push({icon:"mdi mdi-buffer",open:!0,value:e("GESTIÓN"),data:[{id:"ofertas",value:e("Ofertas"),icon:"mdi mdi-arrow-decision-outline",details:"Ofertas"}]}),{view:"sidebar",id:"main:menu",activeTitle:!0,select:!0,data:o}},t.prototype.init=function(){this.use(i.d.Menu,"main:menu")},t}(i.c);t.default=s},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(11);function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return n(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app,t=(e.getService("locale"),e.getService("theme"),a.a.getUsuarioCookie()),o=this.app.getService("locale")._;return{view:"toolbar",height:50,elements:[{view:"button",type:"icon",icon:"mdi mdi-menu",width:37,align:"left",click:function(){$$("main:menu").config.hidden?$$("main:menu").show():$$("main:menu").hide()}},{view:"label",label:"<a href='#!/top/inicio'><img src='assets/img/gdes_logo.png' height='35' /></a>",width:150},{view:"button",type:"icon",icon:"mdi mdi-account-key mdi-36px",width:50},{height:46,id:"person_template",css:"header_person",borderless:!0,data:t,template:function(e){var t="<div style='height:100%;width:100%;'>";return t+="<span class='name'>"+e.nombre+"</span> </div>"}},{view:"label",id:"version",label:""},{view:"label",label:"\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t<img style=\"vertical-align:middle\" src='assets/img/handshake.png' height='35' />\n\t\t\t\t\t\t<span>"+this.app.config.name+"</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t",width:200},{view:"button",type:"icon",icon:"mdi mdi-exit-run mdi-36px",width:50,align:"right",tooltip:o("Salir y logout"),click:function(){a.a.deleteUsuarioCookie(),window.open("https://login.microsoftonline.com/common/oauth2/logout","_self")}}]}},t.prototype.init=function(){r.a.getVersionApp().then((function(e){$$("version").config.label=e.version,$$("version").refresh()})).catch((function(e){console.log("ERR VRS:",e)}))},t}(i.c);t.default=c},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(6),n=o(13),s=o(5),c=o(10),l=o(7),u=o(18),p=o(16),d=o(17),f=o(21),m=o(15),h=o(8),b=o(11),g=o(3),w=o(1),v=o(14),y=o(9);function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=function(e){function t(){return x(this,t),$(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"window",id:"ofertasWindow",position:"center",move:!0,resize:!0,width:900,head:{view:"toolbar",cols:[{},{view:"icon",icon:"mdi mdi-close",click:function(){$$("ofertasWindow").hide()}}]},modal:!0,body:{view:"layout",id:"ofertasFormWindow",minHeight:600,rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube-outline",width:37,align:"left"},{view:"label",label:e("Nueva oferta")}]},{view:"form",scroll:!0,id:"frmOfertasWindow",elements:[{cols:[{view:"textarea",name:"descripcion",label:e("Título del contrato"),required:!0,labelPosition:"top"},{rows:[{cols:[{view:"text",name:"nombreCorto",label:e("Nombre resumen"),required:!0,labelPosition:"top"},{view:"text",name:"cliente",label:e("Cliente"),required:!0,labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbUicacionW",name:"ubicacionId",required:!0,options:{},label:e("Ubicacion"),labelPosition:"top"},{view:"text",name:"paisUbicacion",label:e("Pais Ubicación"),labelPosition:"top",required:!0}]}]}]},{cols:[{view:"text",name:"periodo",label:e("Periodo"),labelPosition:"top"},{view:"text",name:"numeroLicitacion",label:e("Nr. Licitación"),labelPosition:"top"},{view:"text",name:"implicaTecnologico",label:e("¿Implica desarrollo tecnológico?"),labelPosition:"top"}]},{cols:[{view:"datepicker",editable:!0,minDate:new Date(new Date("2000-01-01")),name:"fechaEntrega",required:!0,label:e("Fecha entrega"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date(new Date("2000-01-01")),name:"fechaAdjudicacion",required:!0,label:e("Fecha adjudicación"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date("2000-01-01"),name:"fechaInicioContrato",required:!0,label:e("Fecha inicio"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date("2000-01-01"),name:"fechaFinContrato",required:!0,label:e("Fecha fin"),labelPosition:"top"},{view:"text",name:"duracion",label:e("Duración"),required:!0,labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbEstadoW",name:"estadoId",required:!0,options:{},label:e("Estado"),labelPosition:"top"},{view:"text",name:"numeroPedido",label:e("Num. Pedido"),labelPosition:"top"},{view:"combo",id:"cmbRazonPerdidaW",name:"razonPerdidaId",options:{},label:e("Razón pérdida"),labelPosition:"top"},{view:"text",name:"uteTXT",label:e("UTE (% - Nombre)"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbUsuarioW",name:"usuarioId",required:!0,options:{},label:e("Rble Oferta"),labelPosition:"top"},{view:"combo",id:"cmbResponsableW",name:"responsableId",required:!0,options:{},label:e("Supervisado por"),labelPosition:"top"},{rows:[{view:"checkbox",name:"laboral",options:{},label:e("Laboral"),labelPosition:"top",width:100}]},{rows:[{view:"checkbox",name:"finanzas",options:{},label:e("Finanzas"),labelPosition:"top",width:100}]}]},{cols:[{view:"combo",id:"cmbAreaW",name:"areaId",required:!0,options:{},label:e("Area"),labelPosition:"top"},{view:"combo",id:"cmbUnidadNegocioW",name:"unidadNegocioId",required:!0,options:{},label:e("Unidad negocio"),labelPosition:"top"},{view:"combo",id:"cmbEmpresaW",name:"empresaId",required:!0,options:{},label:e("Empresa"),labelPosition:"top"},{view:"combo",id:"cmbPaisW",name:"paisId",required:!0,options:{},label:e("Pais"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbServicioW",name:"servicioId",required:!0,options:{},label:e("Servicio"),labelPosition:"top"}]},{cols:[{view:"text",id:"numeroOfertaW",name:"numeroOferta",required:!0,label:e("Nr. Oferta"),labelPosition:"top"},{view:"text",id:"codigoOfertaW",name:"codigoOferta",required:!0,label:e("Cod. Oferta"),labelPosition:"top"},{view:"text",id:"codigoOpW",name:"codigoOp",label:e("Código Op."),labelPosition:"top"},{view:"checkbox",id:"conversionOportunidadW",name:"conversionOportunidad",options:{},label:e("Convertido op"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbProbabilidadW",name:"probabilidad",required:!0,options:{},label:e("Probabilidad"),labelPosition:"top"},{view:"combo",id:"cmbFaseOfertaW",name:"faseOfertaId",required:!0,options:{},label:e("Fase oferta"),labelPosition:"top"},{view:"combo",id:"cmbTipoOportunidadW",name:"tipoOportunidadId",required:!0,options:{},label:e("Tipo oportunidad"),labelPosition:"top"},{view:"combo",id:"cmbTipoContratoW",name:"tipoContratoId",required:!0,options:{},label:e("Tipo contrato"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbDivisaW",name:"divisaId",options:{},label:e("Divisa"),labelPosition:"top"},{view:"text",id:"multiplicadorW",name:"multiplicador",label:e("Factor (1€ =)"),labelPosition:"top",format:"1.111,00"},{view:"datepicker",editable:!0,minDate:new Date(new Date("2000-01-01")),id:"fechaDivisaW",name:"fechaDivisa",label:e("Fecha divisa"),labelPosition:"top"}]},{cols:[{view:"text",id:"importePresupuestoDivisaW",name:"importePresupuestoDivisa",required:!0,label:e("Importe GDES"),labelPosition:"top",format:"1.111,00"},{view:"text",id:"margenContribucionW",name:"margenContribucion",required:!0,label:e("Margen contribución"),labelPosition:"top",format:"1.111,00 %"},{view:"text",id:"importeContribucionDivisaW",name:"importeContribucionDivisa",label:e("Importe margen"),labelPosition:"top",format:"1.111,00",disabled:!0}]},{cols:[{view:"text",id:"importePresupuestoW",name:"importePresupuesto",required:!0,label:e(""),labelPosition:"top",format:"1.111,00 €",disabled:!0},{},{view:"text",id:"importeContribucionW",name:"importeContribucion",label:e(""),labelPosition:"top",format:"1.111,00 €",disabled:!0}]},{cols:[{view:"text",id:"importeUTEDivisaW",name:"importeUTEDivisa",label:e("Importe UTE"),labelPosition:"top",format:"1.111,00"},{view:"text",id:"importeTotalDivisaW",name:"importeTotalDivisa",label:e("Importe Total"),labelPosition:"top",format:"1.111,00",disabled:!0},{view:"text",id:"importeMaxLicitacionDivisaW",name:"importeMaxLicitacionDivisa",label:e("Importe Max Licitacion"),labelPosition:"top",format:"1.111,00"}]},{cols:[{view:"text",id:"importeUTEW",name:"importeUTE",label:e(""),labelPosition:"top",format:"1.111,00 €",disabled:!0},{view:"text",id:"importeTotalW",name:"importeTotal",label:e(""),labelPosition:"top",format:"1.111,00 €",disabled:!0},{view:"text",id:"importeMaxLicitacionW",name:"importeMaxLicitacion",label:e(""),labelPosition:"top",format:"1.111,00 €",disabled:!0}]},{cols:[{},{view:"datepicker",editable:!0,minDate:new Date(new Date("2000-01-01")),name:"fechaCreacion",label:e("Fecha creación"),labelPosition:"top"},{view:"datepicker",id:"fechaConversionOportunidadW",editable:!0,minDate:new Date("2000-01-01"),name:"fechaConversionOportunidad",label:e("Fecha conversión"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]}]}]}}},t.prototype.init=function(e,t){},t.prototype.showWindow=function(){var e=this,t=a.a.getUsuarioCookie();this.getRoot().show(),this.loadUsuarios(),this.loadAreas(),this.loadUnidadesNegocio(),this.loadResponsables(),this.loadEmpresas(),this.loadPaises(),this.loadServicios(),this.loadFasesOferta(),this.loadTiposOportunidad(),this.loadTiposContrato(),this.loadEstados(),this.loadProbabilidades(),this.setValoresPorDefectoUsuario(t),this.loadUbicaciones(),this.loadDivisas(1),$$("multiplicadorW").setValue(1),this.getNumeroCodigoOferta(),$$("margenContribucionW").attachEvent("onBlur",(function(t,o){e.calcFromDivisa()})),$$("multiplicadorW").attachEvent("onBlur",(function(t,o){e.calcFromDivisa()})),$$("importePresupuestoDivisaW").attachEvent("onBlur",(function(t,o){e.calcFromDivisa()})),$$("importeUTEDivisaW").attachEvent("onBlur",(function(t,o){e.calcFromDivisa()})),$$("importeMaxLicitacionDivisaW").attachEvent("onBlur",(function(t,o){e.calcFromDivisa()}))},t.prototype.cancel=function(){$$("ofertasWindow").hide()},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmOfertasWindow").validate()){var o=$$("frmOfertasWindow").getValues();(o=n.a.cleanData(o)).ofertaId=0,o.fechaOferta=new Date,n.a.postOferta(a.a.getUsuarioCookie(),o).then((function(t){o.ofertaId=t.ofertaId;var i=e.$scope.crearVersion(0,o);return b.a.postVersion(a.a.getUsuarioCookie(),i)})).then((function(t){$$("ofertasWindow").hide(),e.$scope.show("/top/ofertas?ofertaId="+o.ofertaId)})).catch((function(e){w.a.errorMessageAjax(e)}))}else w.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadUsuarios=function(e){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("usuarioId","nombre",t),i=$$("cmbUsuarioW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbUsuarioW").setValue(e),$$("cmbUsuarioW").refresh())}))},t.prototype.loadAreas=function(e){s.a.getAreas(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("areaId","nombre",t),i=$$("cmbAreaW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbAreaW").setValue(e),$$("cmbAreaW").refresh())}))},t.prototype.loadUnidadesNegocio=function(e){r.a.getUnidadesNegocio(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("unidadNegocioId","nombre",t),i=$$("cmbUnidadNegocioW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbUnidadNegocioW").setValue(e),$$("cmbUnidadNegocioW").refresh())}))},t.prototype.loadResponsables=function(e){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("usuarioId","nombre",t),i=$$("cmbResponsableW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbResponsableW").setValue(e),$$("cmbResponsableW").refresh())}))},t.prototype.loadEmpresas=function(e){c.a.getEmpresas(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("empresaId","nombre",t),i=$$("cmbEmpresaW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbEmpresaW").setValue(e),$$("cmbEmpresaW").refresh())}))},t.prototype.loadPaises=function(e){l.a.getPaises(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("paisId","nombre",t),i=$$("cmbPaisW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbPaisW").setValue(e),$$("cmbPaisW").refresh())}))},t.prototype.loadServicios=function(e){u.a.getServicios(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("servicioId","nombre",t),i=$$("cmbServicioW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbServicioW").setValue(e),$$("cmbServicioW").refresh())}))},t.prototype.loadFasesOferta=function(e){p.a.getFasesOferta(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("faseOfertaId","nombre",t),i=$$("cmbFaseOfertaW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbFaseOfertaW").setValue(e),$$("cmbFaseOfertaW").refresh())}))},t.prototype.loadTiposOportunidad=function(e){d.a.getTiposOportunidad(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("tipoOportunidadId","nombre",t),i=$$("cmbTipoOportunidadW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbTipoOportunidadW").setValue(e),$$("cmbTipoOportunidadW").refresh())}))},t.prototype.loadTiposContrato=function(e){f.a.getTiposContrato(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("tipoContratoId","nombre",t),i=$$("cmbTipoContratoW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbTipoContratoW").setValue(e),$$("cmbTipoContratoW").refresh())}))},t.prototype.loadEstados=function(e){m.a.getEstados(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("estadoId","nombre",t),i=$$("cmbEstadoW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbEstadoW").setValue(e),$$("cmbEstadoW").refresh())}))},t.prototype.loadProbabilidades=function(e){var t=$$("cmbProbabilidadW").getPopup().getList();t.clearAll(),t.parse([{id:20,value:"20%"},{id:50,value:"50%"},{id:80,value:"80%"}]),e&&($$("cmbProbabilidadW").setValue(e),$$("cmbProbabilidadW").refresh())},t.prototype.getNumeroCodigoOferta=function(){h.a.getParametrosContadores(a.a.getUsuarioCookie()).then((function(e){$$("numeroOfertaW").setValue(e.numeroOferta),$$("codigoOfertaW").setValue(e.codigoOferta)})).catch((function(e){w.a.errorMessageAjax(e)}))},t.prototype.setValoresPorDefectoUsuario=function(e){$$("cmbUsuarioW").setValue(e.usuarioId),$$("cmbResponsableW").setValue(e.responsableId),$$("cmbPaisW").setValue(e.paisId),$$("cmbEmpresaW").setValue(e.empresaId),$$("cmbUnidadNegocioW").setValue(e.unidadNegocioId),$$("cmbAreaW").setValue(e.areaId)},t.prototype.crearVersion=function(e,t){var o=a.a.getUsuarioCookie();return{ofertaId:t.ofertaId,fechaCambio:new Date,fechaEntrega:t.fechaEntrega,usuarioId:o.usuarioId,importePresupuesto:t.importePresupuesto,importePresupuestoDivisa:null,importeUTE:null,importeUTEDivisa:null,importeTotal:t.importePresupuesto,importeTotalDivisa:null,margenContribucion:t.margenContribucion,importeContribucion:null,importeContribucionDivisa:null,importeAnual:null,importeAnualDivisa:null,importePrimerAno:null,importePrimerAnoDivisa:null,importeInversion:null,importeInversionDivisa:null,observaciones:"AUTO",divisaId:null,multiplicador:null,numVersion:e}},t.prototype.loadUbicaciones=function(e){v.a.getUbicaciones(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("ubicacionId","nombre",t),i=$$("cmbUicacionW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbUicacionW").setValue(e),$$("cmbUicacionW").refresh())}))},t.prototype.loadDivisas=function(e){y.a.getDivisas(a.a.getUsuarioCookie()).then((function(t){var o=g.a.prepareDataForCombo("divisaId","nombre",t),i=$$("cmbDivisaW").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbDivisaW").setValue(e),$$("cmbDivisaW").refresh())}))},t.prototype.calcImporte=function(){var e=+$$("importePresupuestoW").getValue(),t=+$$("margenContribucionW").getValue(),o=+$$("multiplicadorW").getValue(),i=0;0!==t&&(i=t*e*1/100);var a=i*o*1;$$("importeContribucionW").setValue(i),$$("importeContribucionDivisaW").setValue(a);var r=e*o;r&&$$("importePresupuestoDivisaW").setValue(r);var n=+$$("importePresupuestoW").getValue()+ +$$("importeUTEW").getValue();$$("importeTotalW").setValue(n);var s=n*o;s&&$$("importeTotalDivisaW").setValue(s);var c=+$$("importeUTEW").getValue()*o;c&&$$("importeUTEDivisaW").setValue(c)},t.prototype.calcFromDivisa=function(){var e=+$$("multiplicadorW").getValue();if(0!=e){var t=+$$("importePresupuestoDivisaW").getValue()/e;$$("importePresupuestoW").setValue(t);var o=+$$("importeUTEDivisaW").getValue()/e;$$("importeUTEW").setValue(o);var i=+$$("importeMaxLicitacionDivisaW").getValue()/e;$$("importeMaxLicitacionW").setValue(i),this.calcImporte()}},t}(i.c);t.default=C},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(14),n=(o(8),o(1));o(3);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"window",id:"ubicacionesWindow",position:"center",move:!0,resize:!0,width:600,head:{view:"toolbar",cols:[{},{view:"icon",icon:"mdi mdi-close",click:function(){$$("ubicacionesWindow").hide()}}]},modal:!0,body:{view:"layout",id:"ubicacionesWindowsForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-map-marker-outline",width:37,align:"left"},{view:"label",label:e("Crear ubicación")}]},{view:"form",id:"frmUbicacionesWindow",elements:[{cols:[{view:"text",name:"ubicacionId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,label:e("Nombre ubicacion"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]}]},{minheight:600}]}}},t.prototype.init=function(e,t){},t.prototype.showWindow=function(e){$$("ubicacionesWindow").show()},t.prototype.cancel=function(){$$("ubicacionesWindow").hide()},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmUbicacionesWindow").validate()){var o={ubicacionId:0,nombre:$$("frmUbicacionesWindow").getValues().nombre};r.a.postUbicacion(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.getParentView().loadUbicaciones(t.ubicacionId),$$("ubicacionesWindow").hide()})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=l},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(23),n=o(9),s=o(3),c=(o(8),o(1));function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=0,d=0,f=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"window",id:"w3",position:"center",move:!0,resize:!0,width:800,head:{view:"toolbar",cols:[{},{view:"icon",icon:"mdi mdi-close",click:function(){$$("w2").hide()}}]},modal:!0,body:{view:"layout",id:"divisasForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-calendar-clock",width:37,align:"left"},{view:"label",label:e("Hito de facturación")}]},{view:"form",id:"frmOfertaHito",elements:[{cols:[{view:"datepicker",editable:!0,minDate:new Date("2000-01-01"),name:"fecha",required:!0,label:e("Fecha hito"),labelPosition:"top"},{view:"combo",id:"cmbDivisaHito",name:"divisaId",options:{},label:e("Divisa"),labelPosition:"top"},{view:"text",id:"factor",name:"factor",label:e("Factor (1€ =)"),labelPosition:"top",format:"1.111,00",required:!0},{view:"text",id:"importeDivisa",name:"importeDivisa",label:e("Importe (DIVISA)"),labelPosition:"top",format:"1.111,00",required:!0}]},{cols:[{},{},{},{view:"text",id:"importe",name:"importe",label:e("Importe"),labelPosition:"top",format:"1.111,00 €"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}}},t.prototype.init=function(e,t){var o=this;a.a.checkLoggedUser(),$$("importeDivisa").attachEvent("onBlur",(function(e,t){o.calcImporte()}))},t.prototype.showWindow=function(e,t){var o=this;this.getRoot().show(),p=t,d=e,0!=t?r.a.getOfertaHito(a.a.getUsuarioCookie(),t).then((function(e){e.fecha=new Date(e.fecha),$$("frmOfertaHito").setValues(e),o.loadDivisas(e.divisaId)})).catch((function(e){c.a.errorMessageAjax(e)})):($$("frmOfertaHito").setValues({fecha:new Date,divisaId:1,factor:1}),this.loadDivisas(1))},t.prototype.cancel=function(){$$("w3").hide()},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmOfertaHito").validate()){var o=$$("frmOfertaHito").getValues();0==p?(o.ofertaId=d,o.ofertaHitoId=0,r.a.postOfertaHito(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.getParentView().load(d),$$("w3").hide()})).catch((function(e){c.a.errorMessageAjax(e)}))):r.a.putOfertaHito(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.getParentView().load(d),$$("w3").hide()})).catch((function(e){c.a.errorMessageAjax(e)}))}else c.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadDivisas=function(e){n.a.getDivisas(a.a.getUsuarioCookie()).then((function(t){console.log("Divisas",t);var o=s.a.prepareDataForCombo("divisaId","nombre",t),i=$$("cmbDivisaHito").getPopup().getList();i.clearAll(),console.log("Parse",o),i.parse(o),e&&(console.log("Set divisa"),$$("cmbDivisaHito").setValue(e),$$("cmbDivisaHito").refresh())}))},t.prototype.calcImporte=function(){var e=$$("importeDivisa").getValue()*$$("factor").getValue();$$("importe").setValue(e)},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i,a,r=o(4),n=o(0),s=(o(1),o(3),o(2));function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{view:"window",id:"pprReport",position:"center",move:!0,resize:!0,fullscreen:!0,head:{view:"toolbar",cols:[{view:"label",label:(0,this.app.getService("locale")._)("PPR")},{view:"icon",icon:"mdi mdi-close",click:function(){$$("pprReport").hide()}}]},modal:!0,body:{template:"<div id='report_viewer'></div>"}}},t.prototype.cancel=function(){$$("pprReport").hide()},t.prototype.init=function(e,t){this.getParentView()._data.ofertaId},t.prototype.showWindow=function(e,t){$$("pprReport").show(),this.iniReports(),this.obtainReport(e,t)},t.prototype.iniReports=function(){i=new Stimulsoft.Viewer.StiViewer(null,"StiViewer",!1),a=new Stimulsoft.Viewer.StiViewerOptions,Stimulsoft.Base.Localization.StiLocalization.setLocalizationFile("../localization/es.xml",!0),Stimulsoft.Base.StiLicense.key="6vJhGtLLLz2GNviWmUTrhSqnOItdDwjBylQzQcAOiHltN9ZO4D78QwpEoh6+UpBm5mrGyhSAIsuWoljPQdUv6R6vgviStsx8W3jirJvfPH27oRYrC2WIPEmaoAZTNtqb+nDxUpJlSmG62eA46oRJDV8kJ2cJSEx19GMJXYgZvv7yQT9aJHYaSrTVD7wdhpNVS1nQC3OtisVd7MQNQeM40GJxcZpyZDPfvld8mK6VX0RTPJsQZ7UcCEH4Y3LaKzA5DmUS+mwSnjXz/JFv1uO2JNkfcioieXfYfTaBIgZlKecarCS5vBgMrXly3m5kw+YwpJ2v+cMXuDk3UrZgrdxNnOhg8ZHPg9ijHxqUomZZBzKpVQU0d06ne60j/liMH5KirAI2JCVfBcBvIcyliJos8LAWr9q/1sPR9y7LmA1eyS1/dXaxmEaqi5ubhLqlf+OS0xFX6tlBBgegqHlIj6Fytwvq5YlGAZ0Cra05JhnKh/ohYlADQz6Jbg5sOKyn5EbejvPS3tWr0LRBH2FO6+mJaSEAwzGmoWT057ScSvGgQmfx8wCqSF+PgK/zTzjy75Oh",a.appearance.scrollbarsMode=!0,a.appearance.fullScreenMode=!0,a.toolbar.showSendEmailButton=!0},t.prototype.obtainReport=function(e,t){StiOptions.WebServer.url=s.a.getApiUrl()+"/streport";var o="reports/proposal_report.mrt";1==t&&(o="reports/proposal_report_short.mrt"),3==t&&(o="reports/proposal_report_annex.mrt");var a=new Stimulsoft.Report.StiReport;a.loadFile(o);var r=n.a.getUsuarioCookie();s.a.getConfigMysql(r).then((function(t){var o=t,r="Server="+o.host+";";r+="Port="+o.port+";",r+="Database="+o.database+";",r+="UserId="+o.user+";",r+="Pwd="+o.password+";",a.dictionary.databases.list[0].connectionString=r,a.dictionary.variables.items[0].val=e,i.report=a,i.renderHtml("report_viewer")})).catch((function(e){console.log("ERR: ",e)}))},t}(r.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(24),n=o(3),s=(o(8),o(1));function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=0,p=0,d=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"window",id:"w4",position:"center",move:!0,resize:!0,width:800,head:{view:"toolbar",cols:[{},{view:"icon",icon:"mdi mdi-close",click:function(){$$("w2").hide()}}]},modal:!0,body:{view:"layout",id:"seguidoresForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-calendar-clock",width:37,align:"left"},{view:"label",label:e("Seguidor")}]},{view:"form",id:"frmSeguidor",elements:[{cols:[{view:"combo",id:"cmbSeguidor",name:"usuarioId",options:{},label:e("Seguidor"),labelPosition:"top",required:!0}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}}},t.prototype.init=function(e,t){var o=this;a.a.checkLoggedUser(),$$("importeDivisa").attachEvent("onBlur",(function(e,t){o.calcImporte()}))},t.prototype.showWindow=function(e,t){var o=this;this.getRoot().show(),u=t,p=e,0!=t?r.a.getOfertaHito(a.a.getUsuarioCookie(),t).then((function(e){$$("frmSeguidor").setValues(e),o.loadUsuarios(e.usuarioId)})).catch((function(e){s.a.errorMessageAjax(e)})):($$("frmSeguidor").setValues({}),this.loadUsuarios())},t.prototype.cancel=function(){$$("w4").hide()},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmSeguidor").validate()){var o=$$("frmSeguidor").getValues();0==u?(o.ofertaId=p,o.seguidorId=0,r.a.postSeguidor(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.getParentView().load(p),$$("w4").hide()})).catch((function(e){s.a.errorMessageAjax(e)}))):r.a.putSeguidor(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.getParentView().load(p),$$("w4").hide()})).catch((function(e){s.a.errorMessageAjax(e)}))}else s.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadUsuarios=function(e){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=n.a.prepareDataForCombo("usuarioId","nombre",t),i=$$("cmbSeguidor").getPopup().getList();i.clearAll(),console.log("Parse",o),i.parse(o),e&&(console.log("Set divisa"),$$("cmbSeguidor").setValue(e),$$("cmbSeguidor").refresh())}))},t.prototype.calcImporte=function(){var e=$$("importeDivisa").getValue()*$$("factor").getValue();$$("importe").setValue(e)},t}(i.c);t.default=d},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(11),n=o(1);o(3);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"window",id:"w2",position:"center",move:!0,resize:!0,width:800,head:{view:"toolbar",cols:[{},{view:"icon",icon:"mdi mdi-close",click:function(){$$("w2").hide()}}]},modal:!0,body:{view:"layout",id:"versionesForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-arrow-decision-outline",width:37,align:"left"},{view:"label",label:e("Versiones")}]},{view:"form",id:"frmVersiones",elements:[{cols:[{view:"text",name:"numVersion",width:200,disabled:!0,label:e("Num. Version"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date("2000-01-01"),name:"fechaCambio",required:!0,label:e("Fecha cambio"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date("2000-01-01"),name:"fechaEntrega",required:!0,label:e("Fecha entrega"),labelPosition:"top"},{view:"text",name:"importePresupuesto",required:!0,label:e("Importe GDES"),labelPosition:"top",format:"1.111,00 €"}]},{cols:[{view:"textarea",name:"observaciones",label:e("Observaciones"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minlength:600}]}]}}},t.prototype.showWindow=function(e,t){this.getRoot().show(),0!=(l=t)?r.a.getVersion(a.a.getUsuarioCookie(),l).then((function(e){e.fechaCambio=new Date(e.fechaCambio),e.fechaEntrega=new Date(e.fechaEntrega),$$("frmVersiones").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)})):$$("frmVersiones").setValues({})},t.prototype.init=function(e,t){a.a.checkLoggedUser(),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e?r.a.getVersion(a.a.getUsuarioCookie(),e).then((function(e){$$("frmVersiones").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)})):this.loadUnidadesNegocio()},t.prototype.cancel=function(){$$("w2").hide()},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmVersiones").validate()){var o=$$("frmVersiones").getValues();o=r.a.checkFormValues(o),0==l?(o.versionId=0,r.a.postVersion(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/versiones?versionId="+t.versionId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putVersion(a.a.getUsuarioCookie(),o).then((function(){e.$scope.show("/top/versiones?versionId="+o.versionId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!
 * webix-routie - router for Webix-Jet
 * v0.4.0
 * MIT License
 *
 * based on routie - a tiny hash router
 * http://projects.jga.me/routie
 * copyright Greg Allen 2016
 * MIT License
*/e.exports=function(e,t){var o,a=[],r={},n=e.routie,s=function(e,t){this.name=t,this.path=e,this.keys=[],this.fns=[],this.params={},this.regex=c(this.path,this.keys,!1,!1)};s.prototype.addHandler=function(e){this.fns.push(e)},s.prototype.removeHandler=function(e){for(var t=0,o=this.fns.length;t<o;t++){if(e==this.fns[t])return void this.fns.splice(t,1)}},s.prototype.run=function(e){for(var t=0,o=this.fns.length;t<o;t++)if(!1===this.fns[t].apply(this,e))return!1;return!0},s.prototype.match=function(e,t){var o=this.regex.exec(e);if(!o)return!1;for(var i=1,a=o.length;i<a;++i){var r=this.keys[i-1],n="string"==typeof o[i]?decodeURIComponent(o[i]):o[i];r&&(this.params[r.name]=n),t.push(n)}return!0},s.prototype.toURL=function(e){var t=this.path;for(var o in e)t=t.replace("/:"+o,"/"+e[o]);if(-1!=(t=t.replace(/\/:.*\?/g,"/").replace(/\?/g,"")).indexOf(":"))throw new Error("missing parameters for url: "+t);return t};var c=function(e,t,o,i){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(i?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,(function(e,o,i,a,r,n){return t.push({name:a,optional:!!n}),o=o||"",(n?"":o)+"(?:"+(n?o:"")+(i||"")+(r||i&&"([^/.]+?)"||"([^/]+?)")+")"+(n||"")})).replace(/([/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",o?"":"i"))},l=function(e,t){var o=e.split(" "),i=2==o.length?o[0]:null;e=2==o.length?o[1]:o[0],r[e]||(r[e]=new s(e,i),a.push(r[e])),r[e].addHandler(t)},u=function e(t,o){if("function"==typeof o)l(t,o),e.reload();else if("object"==(void 0===t?"undefined":i(t))){for(var a in t)l(a,t[a]);e.reload()}else void 0===o&&e.navigate(t)};u.lookup=function(e,t){for(var o=0,i=a.length;o<i;o++){var r=a[o];if(r.name==e)return r.toURL(t)}},u.remove=function(e,t){var o=r[e];o&&o.removeHandler(t)},u.removeAll=function(){r={},a=[],o=""},u.navigate=function(e,t){var o=(t=t||{}).silent||!1;o&&h(),setTimeout((function(){window.location.hash=e,o&&setTimeout((function(){m()}),1)}),1)},u.noConflict=function(){return e.routie=n,u};var p=function(){return window.location.hash.substring(1)},d=function(e,t){var o=[];return t.match(e,o)?!1!==t.run(o)?1:0:-1},f=u.reload=function(){for(var e=p(),t=0,i=a.length;t<i;t++){var r=a[t],n=d(e,r);if(1===n){o=e;break}if(0===n){u.navigate(o,{silent:!0});break}}},m=function(){e.addEventListener?e.addEventListener("hashchange",f,!1):e.attachEvent("onhashchange",f)},h=function(){e.removeEventListener?e.removeEventListener("hashchange",f):e.detachEvent("onhashchange",f)};if(m(),o=p(),t)return u;e.routie=u}(window,!0),e.exports.default=e.exports},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(5),c=o(6);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p,d,f=!1,m=[],h=c.a.getSyncUnidadesNegocio(a.a.getUsuarioCookie());h.err?r.a.errorMessageAjax(h.err):m=n.a.prepareDataForCombo("unidadNegocioId","nombre",h.data);var b=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube-outline",width:37,align:"left"},{view:"label",label:t("Areas")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/areasForm?areaId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("areasGrid"),{filename:"areas",name:"Areas",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"AreasNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"areasGrid",pager:"mypager",select:"row",columns:[{id:"areaId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre area"),{content:"textFilter"}],sort:"string",editor:"text",minWidth:200},{id:"cod",header:[t("Código"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"orden",header:[t("Orden"),{content:"numberFilter"}],sort:"string",editor:"text"},{id:"nombreEN",header:[t("Nombre Inglés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"nombreFR",header:[t("Nombre Francés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"unidadNegocioId",header:[t("Unidad de negocio"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:m,width:200},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,cod:webix.rules.isNotEmpty,nombreEN:webix.rules.isNotEmpty,nombreFR:webix.rules.isNotEmpty,unidadNegocioId:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){p=e.row,d=this.data.pull[p]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(f&&c!=l-2)return!1;if(e.value!=e.old)if(f=!1,this.validate(p)){delete(d=this.data.pull[p]).id;var u=d;0==(u=s.a.checkFormValues(u)).areaId?s.a.postArea(a.a.getUsuarioCookie(),u).then((function(e){n.$scope.load(e.areaId),$$("areasGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putArea(a.a.getUsuarioCookie(),u).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("areasGrid").count();$$("AreasNReg").config.label="NREG: "+e,$$("AreasNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.areaId&&(o=t[0].params.areaId),webix.UIManager.addHotKey("Esc",(function(){return $$("areasGrid").remove(-1),!1}),$$("areasGrid")),webix.extend($$("areasGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("areasGrid").showProgress(),s.a.getAreas(a.a.getUsuarioCookie()).then((function(t){$$("areasGrid").clearAll(),$$("areasGrid").parse(n.a.prepareDataForDataTable("areaId",t)),e&&($$("areasGrid").select(e),$$("areasGrid").showItem(e));var o=$$("areasGrid").count();$$("AreasNReg").config.label="NREG: "+o,$$("AreasNReg").refresh(),$$("areasGrid").hideProgress()})).catch((function(e){$$("areasGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/areasForm?areaId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteArea(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("areasGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=b},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(6),n=o(5),s=o(1),c=o(3);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=0,d=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"areasForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube-outline",width:37,align:"left"},{view:"label",label:e("Areas")}]},{view:"form",id:"frmAreas",elements:[{cols:[{view:"text",name:"areaId",width:200,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre area"),labelPosition:"top"}]},{cols:[{view:"text",name:"cod",width:100,required:!0,label:e("Código"),labelPosition:"top"},{view:"text",name:"orden",width:100,type:"number",label:e("Orden"),labelPosition:"top"},{view:"combo",id:"cmbUnidadNegocio",name:"unidadNegocioId",required:!0,options:{},label:e("Unidad negocio relacionada"),labelPosition:"top"}]},{cols:[{width:200},{view:"text",name:"nombreEN",required:!0,label:e("Nombre Inglés"),labelPosition:"top"}]},{cols:[{width:200},{view:"text",name:"nombreFR",required:!0,label:e("Nombre Francés"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minlength:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.areaId&&(p=t[0].params.areaId),this.load(p),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){var t=this;0!=e?n.a.getArea(a.a.getUsuarioCookie(),e).then((function(e){$$("frmAreas").setValues(e),t.loadUnidadesNegocio(e.unidadNegocioId)})).catch((function(e){s.a.errorMessageAjax(e)})):this.loadUnidadesNegocio()},t.prototype.cancel=function(){this.$scope.show("/top/areas")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmAreas").validate()){var o=$$("frmAreas").getValues();o=n.a.checkFormValues(o),0==p?(o.areaId=0,n.a.postArea(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/areas?areaId="+t.areaId)})).catch((function(e){s.a.errorMessageAjax(e)}))):n.a.putArea(a.a.getUsuarioCookie(),o).then((function(){e.$scope.show("/top/areas?areaId="+o.areaId)})).catch((function(e){s.a.errorMessageAjax(e)}))}else s.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadUnidadesNegocio=function(e){r.a.getUnidadesNegocio(a.a.getUsuarioCookie()).then((function(t){var o=c.a.prepareDataForCombo("unidadNegocioId","nombre",t),i=$$("cmbUnidadNegocio").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbUnidadNegocio").setValue(e),$$("cmbUnidadNegocio").refresh())}))},t}(i.c);t.default=d},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(9);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-currency-eur",width:37,align:"left"},{view:"label",label:t("Divisas")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/divisasForm?divisaId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("divisasGrid"),{filename:"divisas",name:"Divisas",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"DivisasNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"divisasGrid",pager:"mypager",select:"row",columns:[{id:"divisaId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre divisa"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.divisaId?s.a.postDivisa(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.divisaId),$$("divisasGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putDivisa(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("divisasGrid").count();$$("DivisasNReg").config.label="NREG: "+e,$$("DivisasNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.divisaId&&(o=t[0].params.divisaId),webix.UIManager.addHotKey("Esc",(function(){return $$("divisasGrid").remove(-1),!1}),$$("divisasGrid")),webix.extend($$("divisasGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("divisasGrid").showProgress(),s.a.getDivisas(a.a.getUsuarioCookie()).then((function(t){$$("divisasGrid").clearAll(),$$("divisasGrid").parse(n.a.prepareDataForDataTable("divisaId",t)),e&&($$("divisasGrid").select(e),$$("divisasGrid").showItem(e));var o=$$("divisasGrid").count();$$("DivisasNReg").config.label="NREG: "+o,$$("DivisasNReg").refresh(),$$("divisasGrid").hideProgress()})).catch((function(e){$$("divisasGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/divisasForm?divisaId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteDivisa(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("divisasGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(9),n=(o(8),o(1));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"divisasForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-currency-eur",width:37,align:"left"},{view:"label",label:e("Divisas")}]},{view:"form",id:"frmDivisas",elements:[{cols:[{view:"text",name:"divisaId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre divisa"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.divisaId&&(l=t[0].params.divisaId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getDivisa(a.a.getUsuarioCookie(),e).then((function(e){$$("frmDivisas").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/divisas")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmDivisas").validate()){var o=$$("frmDivisas").getValues();0==l?(o.divisaId=0,r.a.postDivisa(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/divisas?divisaId="+t.divisaId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putDivisa(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/divisas?divisaId="+o.divisaId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(10),c=o(7);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p,d,f=!1,m=[],h=c.a.getSyncPaises(a.a.getUsuarioCookie());h.err?r.a.errorMessageAjax(h.err):m=n.a.prepareDataForCombo("paisId","nombre",h.data);var b=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube",width:37,align:"left"},{view:"label",label:t("Empresas")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/empresasForm?empresaId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("empresasGrid"),{filename:"empresas",name:"Empresas",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"EmpresasNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"empresasGrid",pager:"mypager",select:"row",columns:[{id:"empresaId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre empresa"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"cod",header:[t("Código"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"paisId",header:[t("Pais relacionado"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:m,width:200},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,cod:webix.rules.isNotEmpty,paisId:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){p=e.row,d=this.data.pull[p]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(f&&c!=l-2)return!1;if(e.value!=e.old)if(f=!1,this.validate(p)){delete(d=this.data.pull[p]).id;var u=d;0==u.empresaId?s.a.postEmpresa(a.a.getUsuarioCookie(),u).then((function(e){n.$scope.load(e.empresaId),$$("empresasGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putEmpresa(a.a.getUsuarioCookie(),u).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("empresasGrid").count();$$("EmpresasNReg").config.label="NREG: "+e,$$("EmpresasNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.empresaId&&(o=t[0].params.empresaId),webix.UIManager.addHotKey("Esc",(function(){return $$("empresasGrid").remove(-1),!1}),$$("empresasGrid")),webix.extend($$("empresasGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("empresasGrid").showProgress(),s.a.getEmpresas(a.a.getUsuarioCookie()).then((function(t){$$("empresasGrid").clearAll(),$$("empresasGrid").parse(n.a.prepareDataForDataTable("empresaId",t)),e&&($$("empresasGrid").select(e),$$("empresasGrid").showItem(e));var o=$$("empresasGrid").count();$$("EmpresasNReg").config.label="NREG: "+o,$$("EmpresasNReg").refresh(),$$("empresasGrid").hideProgress()})).catch((function(e){$$("empresasGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/empresasForm?empresaId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteEmpresa(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("empresasGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=b},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(7),n=o(10),s=o(1),c=o(3);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=0,d=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"empresasForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube",width:37,align:"left"},{view:"label",label:e("Empresas")}]},{view:"form",id:"frmEmpresas",elements:[{cols:[{view:"text",name:"empresaId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre empresa"),labelPosition:"top"}]},{cols:[{view:"text",name:"cod",width:100,required:!0,label:e("Código"),labelPosition:"top"},{view:"combo",id:"cmbPais",name:"paisId",required:!0,options:{},label:e("Pais relacionado"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.empresaId&&(p=t[0].params.empresaId),this.load(p),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){var t=this;0!=e?n.a.getEmpresa(a.a.getUsuarioCookie(),e).then((function(e){$$("frmEmpresas").setValues(e),t.loadPaises(e.paisId)})).catch((function(e){s.a.errorMessageAjax(e)})):this.loadPaises()},t.prototype.cancel=function(){this.$scope.show("/top/empresas")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmEmpresas").validate()){var o=$$("frmEmpresas").getValues();0==p?(o.empresaId=0,n.a.postEmpresa(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/empresas?empresaId="+t.empresaId)})).catch((function(e){s.a.errorMessageAjax(e)}))):n.a.putEmpresa(a.a.getUsuarioCookie(),o).then((function(){e.$scope.show("/top/empresas?empresaId="+o.empresaId)})).catch((function(e){s.a.errorMessageAjax(e)}))}else s.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadPaises=function(e){r.a.getPaises(a.a.getUsuarioCookie()).then((function(t){var o=c.a.prepareDataForCombo("paisId","nombre",t),i=$$("cmbPais").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbPais").setValue(e),$$("cmbPais").refresh())}))},t}(i.c);t.default=d},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(15);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-thumbs-up-down",width:37,align:"left"},{view:"label",label:t("Tipos de estado")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/estadosForm?estadoId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("estadosGrid"),{filename:"estados",name:"Estados",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"EstadosNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"estadosGrid",pager:"mypager",select:"row",columns:[{id:"estadoId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre estado"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"orden",header:[t("Orden"),{content:"numberFilter"}],sort:"string",editor:"text"},{id:"nombreEN",header:[t("Nombre Francés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"nombreFR",header:[t("Nombre Inglés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,nombreEN:webix.rules.isNotEmpty,nombreFR:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.estadoId?s.a.postEstado(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.estadoId),$$("estadosGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putEstado(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("estadosGrid").count();$$("EstadosNReg").config.label="NREG: "+e,$$("EstadosNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.estadoId&&(o=t[0].params.estadoId),webix.UIManager.addHotKey("Esc",(function(){return $$("estadosGrid").remove(-1),!1}),$$("estadosGrid")),webix.extend($$("estadosGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("estadosGrid").showProgress(),s.a.getEstados(a.a.getUsuarioCookie()).then((function(t){$$("estadosGrid").clearAll(),$$("estadosGrid").parse(n.a.prepareDataForDataTable("estadoId",t)),e&&($$("estadosGrid").select(e),$$("estadosGrid").showItem(e));var o=$$("estadosGrid").count();$$("EstadosNReg").config.label="NREG: "+o,$$("EstadosNReg").refresh(),$$("estadosGrid").hideProgress()})).catch((function(e){$$("estadosGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/estadosForm?estadoId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteEstado(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("estadosGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(15),n=(o(8),o(1));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"estadosForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-thumbs-up-down",width:37,align:"left"},{view:"label",label:e("Tipos de estado")}]},{view:"form",id:"frmEstados",elements:[{cols:[{view:"text",name:"estadoId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre tipo de estado"),labelPosition:"top"}]},{cols:[{view:"text",name:"orden",width:100,label:e("Orden"),labelPosition:"top"},{view:"text",name:"nombreEN",required:!0,label:e("Nombre Inglés"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreFR",required:!0,label:e("Nombre Francés"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.estadoId&&(l=t[0].params.estadoId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getEstado(a.a.getUsuarioCookie(),e).then((function(e){$$("frmEstados").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/estados")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmEstados").validate()){var o=$$("frmEstados").getValues();0==l?(o.estadoId=0,r.a.postEstado(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/estados?estadoId="+t.estadoId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putEstado(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/estados?estadoId="+o.estadoId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(16);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-filter-variant",width:37,align:"left"},{view:"label",label:t("Fases de oferta")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/fasesOfertaForm?faseOfertaId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("fasesOfertaGrid"),{filename:"fasesOferta",name:"FasesOferta",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"FasesOfertaNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"fasesOfertaGrid",pager:"mypager",select:"row",columns:[{id:"faseOfertaId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre fase de oferta"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"nombreEN",header:[t("Nombre Francés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"nombreFR",header:[t("Nombre Inglés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,nombreEN:webix.rules.isNotEmpty,nombreFR:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.faseOfertaId?s.a.postFaseOferta(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.faseOfertaId),$$("fasesOfertaGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putFaseOferta(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("fasesOfertaGrid").count();$$("FasesOfertaNReg").config.label="NREG: "+e,$$("FasesOfertaNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.faseOfertaId&&(o=t[0].params.faseOfertaId),webix.UIManager.addHotKey("Esc",(function(){return $$("fasesOfertaGrid").remove(-1),!1}),$$("fasesOfertaGrid")),webix.extend($$("fasesOfertaGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("fasesOfertaGrid").showProgress(),s.a.getFasesOferta(a.a.getUsuarioCookie()).then((function(t){$$("fasesOfertaGrid").clearAll(),$$("fasesOfertaGrid").parse(n.a.prepareDataForDataTable("faseOfertaId",t)),e&&($$("fasesOfertaGrid").select(e),$$("fasesOfertaGrid").showItem(e));var o=$$("fasesOfertaGrid").count();$$("FasesOfertaNReg").config.label="NREG: "+o,$$("FasesOfertaNReg").refresh(),$$("fasesOfertaGrid").hideProgress()})).catch((function(e){$$("fasesOfertaGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/fasesOfertaForm?faseOfertaId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteFaseOferta(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("fasesOfertaGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(16),n=(o(8),o(1));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"fasesOfertaForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-filter-variant",width:37,align:"left"},{view:"label",label:e("Fases de oferta")}]},{view:"form",id:"frmFasesOferta",elements:[{cols:[{view:"text",name:"faseOfertaId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre fase de oferta"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreEN",required:!0,label:e("Nombre Inglés"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreFR",required:!0,label:e("Nombre Francés"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.faseOfertaId&&(l=t[0].params.faseOfertaId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getFaseOferta(a.a.getUsuarioCookie(),e).then((function(e){$$("frmFasesOferta").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/fasesOferta")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmFasesOferta").validate()){var o=$$("frmFasesOferta").getValues();0==l?(o.faseOfertaId=0,r.a.postFaseOferta(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/fasesOferta?faseOfertaId="+t.faseOfertaId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putFaseOferta(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/fasesOferta?faseOfertaId="+o.faseOfertaId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(12);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-account-group",width:37,align:"left"},{view:"label",label:t("Grupos de visualización")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",tooltip:t("Nuevo registro en formulario (Ctrl+F)"),click:function(){e.show("/top/gruposUsuariosForm?grupoUsuarioId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",tooltip:t("Descargar como Excel"),click:function(){webix.toExcel($$("gruposUsuariosGrid"),{filename:"grupos_usuarios",name:"Grupos",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"GruposUsuariosNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"gruposUsuariosGrid",pager:"mypager",select:"row",columns:[{id:"grupoUsuarioId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre de grupo"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this;if(e.value!=e.old)if(!0,this.validate(u)){delete(p=this.data.pull[u]).id;var c=p;0==c.grupoUsuarioId?s.a.postGrupoUsuario(a.a.getUsuarioCookie(),c).then((function(e){n.$scope.load(e.grupoUsuarioId),$$("gruposUsuariosGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putGrupoUsuario(a.a.getUsuarioCookie(),c).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("gruposUsuariosGrid").count();$$("GruposUsuariosNReg").config.label="NREG: "+e,$$("GruposUsuariosNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.grupoUsuarioId&&(o=t[0].params.grupoUsuarioId),webix.UIManager.addHotKey("Esc",(function(){return $$("gruposUsuariosGrid").remove(-1),!1}),$$("gruposUsuariosGrid")),webix.extend($$("gruposUsuariosGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("gruposUsuariosGrid").showProgress({type:"icon"}),s.a.getGruposUsuarios(a.a.getUsuarioCookie()).then((function(t){$$("gruposUsuariosGrid").clearAll(),$$("gruposUsuariosGrid").parse(n.a.prepareDataForDataTable("grupoUsuarioId",t)),e&&($$("gruposUsuariosGrid").select(e),$$("gruposUsuariosGrid").showItem(e));var o=$$("gruposUsuariosGrid").count();$$("GruposUsuariosNReg").config.label="NREG: "+o,$$("GruposUsuariosNReg").refresh(),$$("gruposUsuariosGrid").hideProgress()})).catch((function(e){return $$("gruposUsuariosGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/gruposUsuariosForm?grupoUsuarioId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteGrupoUsuario(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("gruposUsuariosGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=d},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(12),n=(o(8),o(1)),s=o(26);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=0,p=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"gruposUsuariosForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-account-group",width:37,align:"left"},{view:"label",label:e("Grupos de visualización")}]},{view:"form",id:"frmGruposUsuarios",elements:[{cols:[{view:"text",name:"grupoUsuarioId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre de grupo"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]}]},{$subview:s.default}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.grupoUsuarioId&&(u=t[0].params.grupoUsuarioId),this.load(u),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getGrupoUsuario(a.a.getUsuarioCookie(),u).then((function(e){$$("frmGruposUsuarios").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/gruposUsuarios")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmGruposUsuarios").validate()){var o=$$("frmGruposUsuarios").getValues();0==u?r.a.postGrupoUsuario(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/gruposUsuarios?grupoUsuarioId="+t.grupoUsuarioId)})).catch((function(e){n.a.errorMessageAjax(e)})):r.a.putGrupoUsuario(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/gruposUsuarios?grupoUsuarioId="+t.grupoUsuarioId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=p},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=(o(1),o(22));function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return n(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){this.app.getService("locale")._;return{view:"iframe",id:"frame-body",src:"https://gdes.com"}},t.prototype.init=function(){var e=a.a.checkLoggedUser();r.languageService.setLanguage(this.app,e.codigoIdioma)},t}(i.c);t.default=c},function(e,t,o){"use strict";o.r(t);var i=o(4);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var n={rows:[{view:"toolbar",id:"layout:toolbar"},{cols:[{view:"sidebar",id:"layout:menu",template:"<span class='webix_icon fa-#icon#'></span> #value# ",data:[{value:"DashBoard",id:"start",icon:"envelope-o"},{value:"Data",id:"data",icon:"briefcase"}]},{view:"resizer",id:"resizer"},{rows:[{height:49,id:"title",css:"title",template:"<div class='header'>#title#</div><div class='details'>( #details# )</div>",data:{text:"",title:""}},{view:"scrollview",scroll:"native-y",body:{cols:[{$subview:!0}]}}]}]}]},s=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return n},t.prototype.init=function(){this.use(i.d.Menu,"layout:menu")},t}(i.c);t.default=s},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(22);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"Login auto..."}},t.prototype.init=function(e,t){},t.prototype.urlChange=function(e,t){var o=this;if(!t[0].params.email)return r.a.errorMessage("Bad return from Azure");a.a.getLoginEmail(t[0].params.email).then((function(e){a.a.setUsuarioCookie(e),n.languageService.setLanguage(o.app,e.codigoIdioma),o.app.show("top/inicio")})).catch((function(e){r.a.errorMessageAjax(e)}))},t}(i.c);t.default=l},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(13),c=o(6),l=o(10),u=o(7),p=o(16),d=o(17),f=o(5),m=o(15),h=o(9),b=o(22),g=o(20),w=o(14),v=o(30);function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var $,C,I=!1,U=[],A=c.a.getSyncUnidadesNegocio(a.a.getUsuarioCookie());A.err?r.a.errorMessageAjax(A.err):U=n.a.prepareDataForCombo("unidadNegocioId","nombre",A.data);var P=l.a.getSyncEmpresas(a.a.getUsuarioCookie());P.err?r.a.errorMessageAjax(P.err):n.a.prepareDataForCombo("empresaId","nombre",P.data);var E=[],j=u.a.getSyncPaises(a.a.getUsuarioCookie());j.err?r.a.errorMessageAjax(j.err):E=n.a.prepareDataForCombo("paisId","nombre",j.data);var O=[],S=p.a.getSyncFasesOferta(a.a.getUsuarioCookie());S.err?r.a.errorMessageAjax(S.err):O=n.a.prepareDataForCombo("faseOfertaId","nombre",S.data);var D=[],N=d.a.getSyncTiposOportunidad(a.a.getUsuarioCookie());N.err?r.a.errorMessageAjax(N.err):D=n.a.prepareDataForCombo("tipoOportunidadId","nombre",N.data);var F=[],T=f.a.getSyncAreas(a.a.getUsuarioCookie());T.err?r.a.errorMessageAjax(T.err):F=n.a.prepareDataForCombo("areaId","nombre",T.data);var k=[],_=w.a.getSyncUbicaciones(a.a.getUsuarioCookie());_.err?r.a.errorMessageAjax(_.err):k=n.a.prepareDataForCombo("ubicacionId","nombre",_.data);var R=[],G=m.a.getSyncEstados(a.a.getUsuarioCookie());G.err?r.a.errorMessageAjax(G.err):R=n.a.prepareDataForCombo("estadoId","nombre",G.data);var V=h.a.getSyncDivisas(a.a.getUsuarioCookie());V.err?r.a.errorMessageAjax(V.err):n.a.prepareDataForCombo("divisaId","nombre",V.data);var M=a.a.getSyncUsuarios(a.a.getUsuarioCookie());M.err?r.a.errorMessageAjax(M.err):n.a.prepareDataForCombo("usuarioId","nombre",M.data);var K=g.a.getSyncRazonesPerdida(a.a.getUsuarioCookie());K.err?r.a.errorMessageAjax(K.err):n.a.prepareDataForCombo("razonPerdidaId","nombre",K.data),webix.editors.editdate=webix.extend({render:function(e){var t=webix.html.create("div",{class:"webix_dt_editor"},"<input type='date'><span class='mdi mdi-calendar' style='position:absolute; cursor:pointer; top:4px; right:4px;'></span>");return t.childNodes[1].onclick=function(){var e=webix.UIManager.getFocus(),t=e.getEditor();e.editStop(!1);var o=e.getColumnConfig(t.column);o.editor="date",e.editCell(t.row,t.column),o.editor="editdate"},t}},webix.editors.text);var L=function(e){function t(){return y(this,t),x(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-arrow-decision-outline",width:37,align:"left"},{view:"label",label:t("Ofertas")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/ofertasForm?ofertaId=0")}},{view:"button",type:"icon",icon:"wxi-plus-square",width:37,align:"left",hotkey:"Ctrl+M",click:function(){e.ofertasWindow.showWindow()}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("ofertasGrid"),{filename:"ofertas",name:"Ofertas",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"OfertasNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"ofertasGrid",select:"row",navigation:!0,columns:[{id:"ofertaId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"int"},{id:"numeroOferta",header:[t("Nr. Oferta"),{content:"textFilter"}],sort:"string",editor:"text",minWidth:100},{id:"paisId",header:[t("Pais"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:E,width:200},{id:"faseOfertaId",header:[t("Fase oferta"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:O,width:200},{id:"tipoOportunidadId",header:[t("Tipo oportunidad"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:D,width:200},{id:"unidadNegocioId",header:[t("Unidad de negocio"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:U,width:200},{id:"areaId",header:[t("Area"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:F,width:200},{id:"ubicacionId",header:[t("Ubicacion"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:k,width:200},{id:"cliente",header:[t("Cliente"),{content:"textFilter"}],sort:"string",editor:"text",width:200},{id:"nombreCorto",header:[t("Nombre"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"estadoId",header:[t("Estado"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:R,width:200},{id:"importePresupuesto",adjust:!0,header:[t("Importe"),{content:"numberFilter"}],sort:"int",format:webix.i18n.priceFormat,css:{"text-align":"right"}},{id:"margenContribucion",adjust:!0,header:[t("Margen (%)"),{content:"numberFilter"}],sort:"int",format:webix.i18n.numberFormat,css:{"text-align":"right"}},{id:"probabilidad",adjust:!0,header:[t("Probabilidad (%)"),{content:"numberFilter"}],sort:"int",format:webix.i18n.numberFormat,css:{"text-align":"right"}},{id:"fechaAdjudicacion",header:[{text:t("Fecha adjudicación"),css:{"text-align":"center"}},{content:"textFilter"}],editor:"editdate",width:200,format:webix.i18n.dateFormatStr,sort:"string"},{id:"fechaInicioContrato",header:[{text:t("Fecha inicio contrato"),css:{"text-align":"center"}},{content:"textFilter"}],editor:"editdate",width:200,format:webix.i18n.dateFormatStr,sort:"string"},{id:"fechaFinContrato",header:[{text:t("Fecha fin contrato"),css:{"text-align":"center"}},{content:"textFilter"}],editor:"editdate",width:200,format:webix.i18n.dateFormatStr,sort:"string"},{id:"duracion",header:[t("Duración"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],rightSplit:1,onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombreCorto;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{},on:{onAfterEditStart:function(e){$=e.row,C=this.data.pull[$]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(I&&c!=l-2)return!1;if(e.value!=e.old)if(I=!1,this.validate($)){delete(C=this.data.pull[$]).id;var u=C;0==(u=s.a.cleanData(u)).ofertaId?s.a.postOferta(a.a.getUsuarioCookie(),u).then((function(e){n.$scope.load(e.ofertaId),$$("ofertasGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putOferta(a.a.getUsuarioCookie(),u).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("ofertasGrid").count();$$("OfertasNReg").config.label="NREG: "+e,$$("OfertasNReg").refresh()}}}]}},t.prototype.init=function(e,t){this.ofertasWindow=this.ui(v.default)},t.prototype.urlChange=function(e,t){var o=a.a.checkLoggedUser(),i=null;t[0].params.ofertaId&&(i=t[0].params.ofertaId),webix.UIManager.addHotKey("Esc",(function(){return $$("ofertasGrid").remove(-1),!1}),$$("ofertasGrid")),webix.extend($$("ofertasGrid"),webix.ProgressBar),this.load(i),b.languageService.setLanguage(this.app,o.codigoIdioma)},t.prototype.load=function(e){var t=this;$$("ofertasGrid").showProgress({type:"icon"});var o=a.a.getUsuarioCookie();o.esAdministrador?s.a.getOfertas(o).then((function(o){t.cargarOfertas(o,e)})).catch((function(e){$$("ofertasGrid").hideProgress(),r.a.errorMessageAjax(e)})):s.a.getOfertasUsuario(o).then((function(o){$$("ofertasGrid").hideProgress(),t.cargarOfertas(o,e)})).catch((function(e){$$("ofertasGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.cargarOfertas=function(e,t){$$("ofertasGrid").clearAll(),$$("ofertasGrid").parse(n.a.prepareDataForDataTableWidthDates("ofertaId",["fechaEntrega","fechaAdjudicacion","fechaInicioContrato","fechaFinContrato"],e)),$$("ofertasGrid").sort("#ofertaId#","desc","int"),t&&($$("ofertasGrid").select(t),$$("ofertasGrid").showItem(t));var o=$$("ofertasGrid").count();$$("OfertasNReg").config.label="NREG: "+o,$$("OfertasNReg").refresh(),$$("ofertasGrid").hideProgress()},t.prototype.edit=function(e){this.show("/top/ofertasForm?ofertaId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteOferta(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("ofertasGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=L},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(6),n=o(5),s=o(13),c=o(10),l=o(7),u=o(18),p=o(16),d=o(17),f=o(21),m=o(15),h=o(20),b=o(9),g=o(1),w=o(3),v=o(8),y=o(11),x=o(14),$=o(31);function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var U,A,P,E,j,O,S,D,N,F,T=0,k=0,_=function(e){function t(){return C(this,t),I(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._,o={padding:5,css:"fondocelda",rows:[{template:t("DESCRIPTIVOS"),type:"section"},{cols:[{view:"textarea",name:"descripcion",label:t("Título del contrato"),required:!0,labelPosition:"top",id:"firstField"},{rows:[{cols:[{view:"text",name:"nombreCorto",label:t("Nombre resumen"),required:!0,labelPosition:"top"},{view:"text",name:"cliente",label:t("Cliente"),required:!0,labelPosition:"top"}]},{cols:[{cols:[{view:"combo",id:"cmbUbicacion",name:"ubicacionId",required:!0,options:{},label:t("Ubicacion"),labelPosition:"top"},{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",tooltip:t("Crear nueva ubicación"),click:function(){e.ubicacionesWindow.showWindow()}}]},{view:"text",name:"paisUbicacion",label:t("Pais Ubicación"),labelPosition:"top",required:!0}]}]}]},{cols:[{view:"text",name:"periodo",label:t("Periodo"),labelPosition:"top"},{view:"text",name:"numeroLicitacion",label:t("Nr. Licitación"),labelPosition:"top"},{view:"text",name:"implicaTecnologico",label:t("¿Implica desarrollo tecnológico?"),labelPosition:"top"}]},{cols:[{view:"datepicker",editable:!0,minDate:new Date(new Date("2000-01-01")),name:"fechaEntrega",required:!0,label:t("Fecha entrega"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date(new Date("2000-01-01")),name:"fechaAdjudicacion",required:!0,label:t("Fecha adjudicación"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date("2000-01-01"),name:"fechaInicioContrato",required:!0,label:t("Fecha inicio"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date("2000-01-01"),name:"fechaFinContrato",required:!0,label:t("Fecha fin"),labelPosition:"top"},{view:"text",name:"duracion",label:t("Duración"),required:!0,labelPosition:"top"}]},{cols:[{view:"textarea",name:"notasPlanning",label:t("Notas Planning"),labelPosition:"top"},{view:"textarea",name:"puntosRelevantes",label:t("Equipo y organización"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbEstado",name:"estadoId",required:!0,options:{},label:t("Estado"),labelPosition:"top"},{view:"text",name:"numeroPedido",label:t("Num. Pedido"),labelPosition:"top"},{view:"combo",id:"cmbRazonPerdida",name:"razonPerdidaId",options:{},label:t("Razón pérdida"),labelPosition:"top"},{view:"text",name:"uteTXT",label:t("UTE (% - Nombre)"),labelPosition:"top"}]}]},i={padding:5,css:"fondocelda",rows:[{template:t("OTROS DATOS (1)"),type:"section"},{cols:[{view:"combo",id:"cmbUsuResponsableId",name:"usuResponsableId",required:!0,options:{},label:t("Rble Oferta"),labelPosition:"top"},{view:"combo",id:"cmbResponsable",name:"responsableId",required:!0,options:{},label:t("Supervisado por"),labelPosition:"top"},{rows:[{view:"checkbox",name:"laboral",options:{},label:t("Laboral"),labelPosition:"top",width:100}]},{rows:[{view:"checkbox",name:"finanzas",options:{},label:t("Finanzas"),labelPosition:"top",width:100}]}]},{cols:[{view:"combo",id:"cmbArea",name:"areaId",required:!0,options:{},label:t("Area"),labelPosition:"top"},{view:"combo",id:"cmbUnidadNegocio",name:"unidadNegocioId",required:!0,options:{},label:t("Unidad negocio"),labelPosition:"top"},{view:"combo",id:"cmbEmpresa",name:"empresaId",required:!0,options:{},label:t("Empresa"),labelPosition:"top"},{view:"combo",id:"cmbPais",name:"paisId",required:!0,options:{},label:t("Pais"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbServicio",name:"servicioId",required:!0,options:{},label:t("Servicio"),labelPosition:"top"}]},{cols:[{view:"text",id:"numeroOferta",name:"numeroOferta",required:!0,label:t("Nr. Oferta"),labelPosition:"top"},{view:"text",id:"codigoOferta",name:"codigoOferta",required:!0,label:t("Cod. Oferta"),labelPosition:"top"},{view:"text",id:"codigoOp",name:"codigoOp",label:t("Código Op."),labelPosition:"top"},{view:"checkbox",id:"conversionOportunidad",name:"conversionOportunidad",options:{},label:t("Convertido op"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbProbabilidad",name:"probabilidad",required:!0,options:{},label:t("Probabilidad"),labelPosition:"top"},{view:"combo",id:"cmbFaseOferta",name:"faseOfertaId",required:!0,options:{},label:t("Fase oferta"),labelPosition:"top"},{view:"combo",id:"cmbTipoOportunidad",name:"tipoOportunidadId",required:!0,options:{},label:t("Tipo oportunidad"),labelPosition:"top"},{view:"combo",id:"cmbTipoContrato",name:"tipoContratoId",required:!0,options:{},label:t("Tipo contrato"),labelPosition:"top"}]}]},a={padding:5,css:"fondocelda",rows:[{template:t("ECONOMICOS"),type:"section"},{cols:[{view:"combo",id:"cmbDivisa",name:"divisaId",options:{},label:t("Divisa"),labelPosition:"top"},{view:"text",id:"multiplicador",name:"multiplicador",label:t("Factor (1€ =)"),labelPosition:"top",format:"1.111,00"},{view:"datepicker",editable:!0,minDate:new Date(new Date("2000-01-01")),id:"fechaDivisa",name:"fechaDivisa",label:t("Fecha divisa"),labelPosition:"top"}]},{cols:[{view:"text",id:"importePresupuestoDivisa",name:"importePresupuestoDivisa",required:!0,label:t("Importe GDES"),labelPosition:"top",format:"1.111,00"},{view:"text",id:"margenContribucion",name:"margenContribucion",required:!0,label:t("Margen contribución"),labelPosition:"top",format:"1.111,00 %"},{view:"text",id:"importeContribucionDivisa",name:"importeContribucionDivisa",label:t("Importe margen"),labelPosition:"top",format:"1.111,00",disabled:!0}]},{cols:[{view:"text",id:"importePresupuesto",name:"importePresupuesto",required:!0,label:t(""),labelPosition:"top",format:"1.111,00 €",disabled:!0},{},{view:"text",id:"importeContribucion",name:"importeContribucion",label:t(""),labelPosition:"top",format:"1.111,00 €",disabled:!0}]},{cols:[{view:"text",id:"importeUTEDivisa",name:"importeUTEDivisa",label:t("Importe UTE"),labelPosition:"top",format:"1.111,00"},{view:"text",id:"importeTotalDivisa",name:"importeTotalDivisa",label:t("Importe Total"),labelPosition:"top",format:"1.111,00",disabled:!0},{view:"text",id:"importeMaxLicitacionDivisa",name:"importeMaxLicitacionDivisa",label:t("Importe Max Licitacion"),labelPosition:"top",format:"1.111,00"}]},{cols:[{view:"text",id:"importeUTE",name:"importeUTE",label:t(""),labelPosition:"top",format:"1.111,00 €",disabled:!0},{view:"text",id:"importeTotal",name:"importeTotal",label:t(""),labelPosition:"top",format:"1.111,00 €",disabled:!0},{view:"text",id:"importeMaxLicitacion",name:"importeMaxLicitacion",label:t(""),labelPosition:"top",format:"1.111,00 €",disabled:!0}]},{cols:[{view:"text",id:"importeInversionDivisa",name:"importeInversionDivisa",label:t("Inversión (Capex)"),labelPosition:"top",format:"1.111,00"},{view:"text",id:"tasaRetorno",name:"tasaRetorno",label:t("Tasa retorno"),labelPosition:"top",format:"1.111,00"},{view:"text",id:"payBack",name:"payBack",label:t("Pay-back"),labelPosition:"top",format:"1.111,00"}]},{cols:[{view:"text",id:"importeInversion",name:"importeInversion",label:t(""),labelPosition:"top",format:"1.111,00 €",disabled:!0},{},{}]},{cols:[{view:"textarea",name:"descripcionInversion",label:t("Descripción inversión"),labelPosition:"top"},{view:"textarea",name:"notasEstado",label:t("Notas sobre versiones de la Oferta"),labelPosition:"top"}]}]},r={padding:5,css:"fondocelda",rows:[{template:t("OTROS DATOS (2)"),type:"section"},{cols:[{view:"checkbox",name:"relevante",options:{},label:t("Relevante"),labelPosition:"top"},{view:"checkbox",id:"ofertaSingular",name:"ofertaSingular",options:{},label:t("Oferta singular"),labelPosition:"top"},{view:"textarea",id:"autorizaciones",name:"autorizaciones",options:{},label:t("Autorizaciones"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbUsuario",name:"usuarioId",required:!0,options:{},label:t("Usuario"),labelPosition:"top"},{view:"datepicker",editable:!0,minDate:new Date(new Date("2000-01-01")),name:"fechaCreacion",label:t("Fecha creación"),labelPosition:"top"},{view:"datepicker",id:"fechaConversionOportunidad",editable:!0,minDate:new Date("2000-01-01"),name:"fechaConversionOportunidad",label:t("Fecha conversión"),labelPosition:"top"}]},{view:"textarea",id:"documentosEspeciales",name:"documentosEspeciales",label:t("Documentos aplicables"),labelPosition:"top"}]},n=(t("Ubicacion"),t("Crear nueva ubicación"),t("Nr. Licitación"),t("GENERALES"),t("ID"),t("OTROS DATOS"),t("Subrogación"),t("Comentario subrogación"),t("Cantidad personal"),t("UTE"),t("GDES Porcentaje"),t("Reclutamiento"),t("Perfil y cantidad a reclutar"),t("ESTADO"),{header:t("Datos oportunidad"),body:{rows:[{cols:[o,a]},{cols:[i,r]}]}}),s=(t("BASICOS (€)"),t("Importe anual"),t("Importe año en curso"),t("BASICOS (OTRA DIVISA)"),t("Importe anual (DIVISA)"),t("Importe año en curso (DIVISA)"),t("OTROS DATOS"),t("Condiciones de pago"),t("Datos económicos"),{padding:5,css:"fondocelda",rows:[{cols:[{view:"textarea",name:"alcance",label:t("Alcance de los trabajos (Descripción completa)"),labelPosition:"top"},{view:"textarea",name:"riesgos",label:t("Riesgos y mitigaciones"),labelPosition:"top"},{view:"textarea",name:"condicionesEstandarTXT",label:t("Datos contractuales (Penalizaciones, Garantías, Seguros, etc)"),labelPosition:"top"}]},{cols:[{view:"textarea",name:"criteriosEvaluacion",label:t("Criterios de Evaluación"),labelPosition:"top"},{view:"textarea",name:"estrategiaGDES",label:t("Estrategia tomada en la Oferta"),labelPosition:"top"},{view:"textarea",name:"garantiasEspecialesTXT",label:t("Datos Laborales"),labelPosition:"top"}]},{cols:[{view:"textarea",name:"datosComerciales",label:t("Información comercial"),labelPosition:"top"},{view:"textarea",name:"diferencialGDES",label:t("Valor añadido GDES"),labelPosition:"top"},{view:"textarea",name:"consideracionesEconomicas",label:t("Consideraciones incluidas en la oferta económica"),labelPosition:"top"}]},{cols:[{rows:[{cols:[{view:"text",name:"proveedorActual",label:t("Proveedor Actual"),labelPosition:"top"},{view:"text",name:"principalCompetidor",label:t("Principal Competidor"),labelPosition:"top"}]},{view:"text",name:"competidores",label:t("Competidores"),labelPosition:"top"}]},{view:"textarea",name:"sinergias",label:t("Sinergias con otros contratos"),labelPosition:"top"},{rows:[{cols:[{},{view:"datepicker",editable:!0,minDate:new Date("2000-01-01"),name:"fechaComite",label:t("Fecha Comite Oferta"),labelPosition:"top",width:150}]}]}]}]}),c=(t("ALCANCE DE LOS TRABAJOS"),t("CUESTIONES DE CONTRATO"),t("Penalizaciones"),t("CONCURRENCIA Y SITUACIÓN DE MERCADO"),t("GDES VALORES Y ESTRATEGIA"),{header:t("Datos complementarios"),body:{rows:[{cols:[s]}]}}),l={header:t("Datos financieros"),body:{id:"financieros",view:"ckeditor",name:"financieros",heigth:900}},u={padding:5,css:"fondocelda",rows:[{template:t("OPORTUNIDADES"),type:"section"},{view:"textarea",name:"actividadesRealizadas",label:t("Actividades realizadas"),labelPosition:"top"},{view:"textarea",name:"actividadesPlanificadas",label:t("Actividades planificadas"),labelPosition:"top"}]},p={padding:5,css:"fondocelda",rows:[{template:t("PROYECTOS"),type:"section"},{view:"textarea",name:"situacionProyecto",label:t("Situación de proyecto"),labelPosition:"top"}]},d={padding:5,css:"fondocelda",rows:[{template:t("RECLAMACIONES"),type:"section"},{cols:[{rows:[{view:"text",name:"importeReclamacion1",label:t("Importe reclamación (1)"),labelPosition:"top",format:"1.111,00 €"}]},{rows:[{view:"textarea",name:"razonReclamacion1",label:t("Razón reclamación (1)"),labelPosition:"top"}]}]},{cols:[{rows:[{view:"text",name:"importeReclamacion2",label:t("Importe reclamación (2)"),labelPosition:"top",format:"1.111,00 €"}]},{rows:[{view:"textarea",name:"razonReclamacion2",label:t("Razón reclamación (2)"),labelPosition:"top"}]}]},{cols:[{rows:[{view:"text",name:"importeReclamacion3",label:t("Importe reclamación (3)"),labelPosition:"top",format:"1.111,00 €"}]},{rows:[{view:"textarea",name:"razonReclamacion3",label:t("Razón reclamación (3)"),labelPosition:"top"}]}]},{cols:[{rows:[{view:"text",name:"importeReclamacion4",label:t("Importe reclamación (4)"),labelPosition:"top",format:"1.111,00 €"}]},{rows:[{view:"textarea",name:"razonReclamacion4",label:t("Razón reclamación (4)"),labelPosition:"top"}]}]}]},f={padding:5,css:"fondocelda",rows:[{template:t("NOTAS"),type:"section"},{view:"textarea",name:"observaciones",label:t("Observaciones"),labelPosition:"top"}]},m={view:"form",id:"frmOfertas",scroll:!0,height:1080,elements:[{view:"tabview",multiview:{keepViews:!0},cells:[n,c,l,{header:t("Anotaciones"),body:{rows:[{cols:[u,p]},{cols:[d,f]}]}},{header:t("Anexos"),body:{id:"anexos",view:"ckeditor",name:"anexos",heigth:900}}]},{margin:5,cols:[{gravity:5},{view:"button",label:t("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:t("Aceptar"),click:this.accept,type:"form"}]},{minlength:600}]};return{view:"layout",id:"ofertasForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-arrow-decision-outline",width:37,align:"left"},{view:"label",label:t("Ofertas")},{view:"label",id:"sId",label:" ID: "+T},{view:"label",id:"sVersion",label:" VRS: "+k}]},{view:"accordion",cols:[{header:"Datos de la oferta",id:"Acc1",body:m,collapsed:!1},{header:"Hitos facturación",id:"Acc5",body:{$subview:"ofertasHitos"},collapsed:!0},{header:"Versiones",id:"Acc2",body:{$subview:"versiones"},collapsed:!0},{header:"Seguidores",id:"Acc3",body:{$subview:"seguidores"},collapsed:!0},{header:"PPR",id:"Acc4",body:{$subview:"pprview"},collapsed:!0}]}]}},t.prototype.urlChange=function(e,t){$$("frmOfertas").config.height=window.innerHeight-150},t.prototype.init=function(e,t){var o=this;a.a.checkLoggedUser(),t[0].params.ofertaId&&(T=t[0].params.ofertaId),this.load(T),webix.delay((function(){$$("firstField").focus()})),$$("Acc2").collapse(),$$("Acc3").collapse(),$$("cmbPais").attachEvent("onChange",(function(e,t){o.getDocumentosAplicables(e)})),$$("cmbFaseOferta").attachEvent("onChange",(function(e,t){if(3!=e&&0==T){var o="OP-"+U;$$("numeroOferta").setValue(o),$$("codigoOferta").setValue(o)}3==e&&1==t&&($$("conversionOportunidad").setValue(!0),$$("fechaConversionOportunidad").setValue(new Date))})),$$("importePresupuesto").attachEvent("onBlur",(function(e,t){o.calcImporte()})),$$("margenContribucion").attachEvent("onBlur",(function(e,t){o.calcImporte()})),$$("importeUTE").attachEvent("onBlur",(function(e,t){o.calcImporte()})),$$("multiplicador").attachEvent("onBlur",(function(e,t){o.calcFromDivisa()})),$$("importePresupuestoDivisa").attachEvent("onBlur",(function(e,t){o.calcFromDivisa()})),$$("importeUTEDivisa").attachEvent("onBlur",(function(e,t){o.calcFromDivisa()})),$$("importeInversionDivisa").attachEvent("onBlur",(function(e,t){o.calcFromDivisa()})),$$("importeMaxLicitacionDivisa").attachEvent("onBlur",(function(e,t){o.calcFromDivisa()})),this.ubicacionesWindow=this.ui($.default)},t.prototype.load=function(e){var t=this,o=a.a.getUsuarioCookie();if(0==e)return this.loadUsuarios(),this.loadUsuariosResponsables(),this.loadAreas(),this.loadUbicaciones(),this.loadUnidadesNegocio(),this.loadResponsables(),this.loadEmpresas(),this.loadPaises(),this.loadServicios(),this.loadFasesOferta(),this.loadTiposOportunidad(),this.loadTiposContrato(),this.loadProbabilidades(),this.loadEstados(),this.loadRazonesPerdida(),this.loadDivisas(1),this.getNumeroCodigoOferta(),this.getDocumentosAplicables(o.paisId),this.setValoresPorDefectoUsuario(o),$$("multiplicador").setValue(1),e=0,void(k=0);s.a.getOferta(a.a.getUsuarioCookie(),e).then((function(o){o.fechaEntrega=new Date(o.fechaEntrega),o.fechaAdjudicacion=new Date(o.fechaAdjudicacion),o.fechaInicioContrato=new Date(o.fechaInicioContrato),o.fechaFinContrato=new Date(o.fechaFinContrato),o.fechaOferta=new Date(o.fechaOferta),o.fechaUltimoEstado=new Date(o.fechaUltimoEstado),$$("frmOfertas").setValues(o),t.loadUsuarios(o.usuarioId),t.loadUsuariosResponsables(o.usuResponsableId),t.loadAreas(o.areaId),t.loadUbicaciones(o.ubicacionId),t.loadUnidadesNegocio(o.unidadNegocioId),t.loadResponsables(o.responsableId),t.loadEmpresas(o.empresaId),t.loadPaises(o.paisId),t.loadServicios(o.servicioId),t.loadFasesOferta(o.faseOfertaId),t.loadTiposOportunidad(o.tipoOportunidadId),t.loadTiposContrato(o.tipoContratoId),t.loadProbabilidades(o.probabilidad),t.loadEstados(o.estadoId),t.loadRazonesPerdida(o.razonPerdidaId),t.loadDivisas(o.divisaId),o.faseOfertaId,o.importePresupuesto,e=o.ofertaId,k=o.version,$$("sId").config.label="ID: "+e,$$("sId").refresh(),$$("sVersion").config.label="VRS: "+k,$$("sVersion").refresh(),t.salvarLosImportesOriginales(o)})).catch((function(e){g.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/ofertas")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmOfertas").validate({hidden:!0})){var o=$$("frmOfertas").getValues();(o=s.a.cleanData(o)).margenContribucion||(o.margenContribucion=0),5!==o.estadoId||o.razonPerdidaId?0==T?(o.ofertaId=0,o.fechaOferta=new Date,s.a.postOferta(a.a.getUsuarioCookie(),o).then((function(t){return o.ofertaId=t.ofertaId,e.$scope.guardarVersionCero(o)})).then((function(){e.$scope.show("/top/ofertas?ofertaId="+o.ofertaId)})).catch((function(e){g.a.errorMessageAjax(e)}))):this.$scope.comprobarCambioDeImportes()?webix.confirm(t("Han cambiado las condiciones económicas de la oferta. ¿Quiere guardar una versión con las condiciones anteriores?"),(function(t){!0===t?(o.version=o.version+1,e.$scope.guardarVersionAntigua(o.version).then((function(){return s.a.putOferta(a.a.getUsuarioCookie(),o)})).then((function(){e.$scope.show("/top/ofertas?ofertaId="+o.ofertaId)})).catch((function(e){g.a.errorMessageAjax(e)}))):(console.log("DATOS A GRABAR",o),s.a.putOferta(a.a.getUsuarioCookie(),o).then((function(){e.$scope.show("/top/ofertas?ofertaId="+o.ofertaId)})).catch((function(e){g.a.errorMessageAjax(e)})))})):(console.log("DATOS A GRABAR",o),s.a.putOferta(a.a.getUsuarioCookie(),o).then((function(){e.$scope.show("/top/ofertas?ofertaId="+o.ofertaId)})).catch((function(e){g.a.errorMessageAjax(e)}))):g.a.errorMessage(t("Debe incluir una razón de pérdida de la oferta"))}else g.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadUnidadesNegocio=function(e){r.a.getUnidadesNegocio(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("unidadNegocioId","nombre",t),i=$$("cmbUnidadNegocio").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbUnidadNegocio").setValue(e),$$("cmbUnidadNegocio").refresh())}))},t.prototype.loadUsuarios=function(e){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("usuarioId","nombre",t),i=$$("cmbUsuario").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbUsuario").setValue(e),$$("cmbUsuario").refresh())}))},t.prototype.loadUsuariosResponsables=function(e){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("usuarioId","nombre",t),i=$$("cmbUsuResponsableId").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbUsuResponsableId").setValue(e),$$("cmbUsuResponsableId").refresh())}))},t.prototype.loadAreas=function(e){n.a.getAreas(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("areaId","nombre",t),i=$$("cmbArea").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbArea").setValue(e),$$("cmbArea").refresh())}))},t.prototype.loadUbicaciones=function(e){x.a.getUbicaciones(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("ubicacionId","nombre",t),i=$$("cmbUbicacion").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbUbicacion").setValue(e),$$("cmbUbicacion").refresh())}))},t.prototype.loadResponsables=function(e){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("usuarioId","nombre",t),i=$$("cmbResponsable").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbResponsable").setValue(e),$$("cmbResponsable").refresh())}))},t.prototype.loadEmpresas=function(e){c.a.getEmpresas(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("empresaId","nombre",t),i=$$("cmbEmpresa").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbEmpresa").setValue(e),$$("cmbEmpresa").refresh())}))},t.prototype.loadPaises=function(e){l.a.getPaises(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("paisId","nombre",t),i=$$("cmbPais").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbPais").setValue(e),$$("cmbPais").refresh())}))},t.prototype.loadServicios=function(e){u.a.getServicios(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("servicioId","nombre",t),i=$$("cmbServicio").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbServicio").setValue(e),$$("cmbServicio").refresh())}))},t.prototype.loadFasesOferta=function(e){p.a.getFasesOferta(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("faseOfertaId","nombre",t),i=$$("cmbFaseOferta").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbFaseOferta").setValue(e),$$("cmbFaseOferta").refresh())}))},t.prototype.loadTiposOportunidad=function(e){d.a.getTiposOportunidad(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("tipoOportunidadId","nombre",t),i=$$("cmbTipoOportunidad").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbTipoOportunidad").setValue(e),$$("cmbTipoOportunidad").refresh())}))},t.prototype.loadTiposContrato=function(e){f.a.getTiposContrato(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("tipoContratoId","nombre",t),i=$$("cmbTipoContrato").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbTipoContrato").setValue(e),$$("cmbTipoContrato").refresh())}))},t.prototype.loadProbabilidades=function(e){var t=$$("cmbProbabilidad").getPopup().getList();t.clearAll(),t.parse([{id:20,value:"20%"},{id:50,value:"50%"},{id:80,value:"80%"}]),e&&($$("cmbProbabilidad").setValue(e),$$("cmbProbabilidad").refresh())},t.prototype.loadEstados=function(e){m.a.getEstados(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("estadoId","nombre",t),i=$$("cmbEstado").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbEstado").setValue(e),$$("cmbEstado").refresh())}))},t.prototype.loadRazonesPerdida=function(e){h.a.getRazonesPerdida(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("razonPerdidaId","nombre",t),i=$$("cmbRazonPerdida").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbRazonPerdida").setValue(e),$$("cmbRazonPerdida").refresh())}))},t.prototype.loadDivisas=function(e){b.a.getDivisas(a.a.getUsuarioCookie()).then((function(t){var o=w.a.prepareDataForCombo("divisaId","nombre",t),i=$$("cmbDivisa").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbDivisa").setValue(e),$$("cmbDivisa").refresh())}))},t.prototype.getNumeroCodigoOferta=function(){v.a.getParametrosContadores(a.a.getUsuarioCookie()).then((function(e){U=e.numeroOferta,$$("numeroOferta").setValue(e.numeroOferta),$$("codigoOferta").setValue(e.codigoOferta)})).catch((function(e){g.a.errorMessageAjax(e)}))},t.prototype.getDocumentosAplicables=function(e){var t="";l.a.getPais(a.a.getUsuarioCookie(),e).then((function(e){return t=e.codPais,v.a.getParametros(a.a.getUsuarioCookie())})).then((function(e){var o=e.docAppSpain;"UK"==t&&(o=e.docAppUk),"FR"==t&&(o=e.docAppFrance),$$("documentosEspeciales").setValue(o)})).catch((function(e){g.a.errorMessageAjax(e)}))},t.prototype.setValoresPorDefectoUsuario=function(e){$$("cmbUsuario").setValue(e.usuarioId),$$("cmbUsuResponsableId").setValue(e.usuarioId),$$("cmbResponsable").setValue(e.responsableId),$$("cmbPais").setValue(e.paisId),$$("cmbEmpresa").setValue(e.empresaId),$$("cmbUnidadNegocio").setValue(e.unidadNegocioId),$$("cmbArea").setValue(e.areaId)},t.prototype.calcImporte=function(){var e=+$$("importePresupuesto").getValue(),t=+$$("margenContribucion").getValue(),o=+$$("multiplicador").getValue(),i=0;0!==t&&(i=t*e*1/100);var a=i*o*1;$$("importeContribucion").setValue(i),$$("importeContribucionDivisa").setValue(a);var r=e*o;r&&$$("importePresupuestoDivisa").setValue(r);var n=+$$("importePresupuesto").getValue()+ +$$("importeUTE").getValue();$$("importeTotal").setValue(n);var s=n*o;s&&$$("importeTotalDivisa").setValue(s);var c=+$$("importeUTE").getValue()*o;c&&$$("importeUTEDivisa").setValue(c),this.getTextoAutorizacion()},t.prototype.calcFromDivisa=function(){var e=+$$("multiplicador").getValue();if(0!=e){var t=+$$("importePresupuestoDivisa").getValue()/e;$$("importePresupuesto").setValue(t);var o=+$$("importeUTEDivisa").getValue()/e;$$("importeUTE").setValue(o);var i=+$$("importeInversionDivisa").getValue()/e;$$("importeInversion").setValue(i);var a=+$$("importeMaxLicitacionDivisa").getValue()/e;$$("importeMaxLicitacion").setValue(a),this.calcImporte()}},t.prototype.getTextoAutorizacion=function(){var e=this.app.getService("locale")._,t=+$$("importePresupuesto").getValue(),o="0";t>15e4&&(o="1"),t>3e5&&(o="2"),t>1e6&&(o="3"),+$$("ofertaSingular").getValue()&&(o="3");var i=e("autorizacion"+o);$$("autorizaciones").setValue(i)},t.prototype.comprobarCambioDeImportes=function(){var e=!1;return A==$$("importePresupuesto").getValue()&&P==$$("importeUTE").getValue()&&E==$$("importeTotal").getValue()&&j==$$("margenContribucion").getValue()&&O==$$("importeContribucion").getValue()&&N==$$("importeInversion").getValue()&&F==$$("multiplicador").getValue()||(e=!0),e},t.prototype.salvarLosImportesOriginales=function(e){A=e.importePresupuesto,P=e.importeUTE,E=e.importeTotal,j=e.margenContribucion,O=e.importeContribucion,S=e.importeAnual,D=e.importePrimerAno,N=e.importeInversion,F=e.multiplicador},t.prototype.guardarVersionAntigua=function(e){var t=null;$$("cmbDivisa").getValue()&&(t=$$("cmbDivisa").getValue());var o=a.a.getUsuarioCookie(),i={ofertaId:T,fechaCambio:new Date,usuarioId:o.usuarioId,importePresupuesto:A,importeUTE:P,importeTotal:E,margenContribucion:j,importeContribucion:O,importeAnual:S,importePrimerAno:D,importeInversion:N,divisaId:t,multiplicador:F,numVersion:e};return y.a.postVersion(o,i)},t.prototype.guardarVersionCero=function(e){var t=a.a.getUsuarioCookie(),o={ofertaId:e.ofertaId,fechaCambio:new Date,usuarioId:t.usuarioId,importePresupuesto:e.importePresupuesto,importeUTE:e.importeUTE,importeTotal:e.importeTotal,margenContribucion:e.margenContribucion,importeContribucion:e.importeContribucion,importeAnual:e.importeAnual,importePrimerAno:e.importePrimerAno,importeInversion:e.importeInversion,divisaId:e.divisaId,multiplicador:e.multiplicador,numVersion:0};return y.a.postVersion(t,o)},t}(i.c);t.default=_},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(23),c=o(9),l=o(32);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d,f,m=!1,h=0,b=[],g=c.a.getSyncDivisas(a.a.getUsuarioCookie());g.err?r.a.errorMessageAjax(g.err):b=n.a.prepareDataForCombo("divisaId","nombre",g.data);var w=function(e){function t(){return u(this,t),p(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-calendar-clock",width:37,align:"left"},{view:"label",label:t("Oferta hitos de facturación")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.win3.showWindow(h,0)}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("ofertasHitosGrid"),{filename:"divisas",name:"OfertasHitos",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"OfertasHitosNReg",label:"NREG: "},{view:"pager",id:"mypagerOfHitos",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"ofertasHitosGrid",pager:"mypagerOfHitos",select:"row",columns:[{id:"ofertaHitoId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"fecha",header:[{text:t("Fecha"),css:{"text-align":"center"}},{content:"textFilter"}],editor:"editdate",width:200,format:webix.i18n.dateFormatStr,sort:"string"},{id:"importeDivisa",adjust:!0,header:[t("Importe divisa"),{content:"numberFilter"}],sort:"int",format:webix.i18n.numberFormat,css:{"text-align":"right"}},{id:"divisaId",fillspace:!0,header:[t("Divisa"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:b},{id:"importe",adjust:!0,header:[t("Importe"),{content:"numberFilter"}],sort:"int",format:webix.i18n.priceFormat,css:{"text-align":"right"}},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row],a=webix.i18n.dateFormatStr(i.fecha)+" "+webix.i18n.priceFormat(i.importe);this.$scope.delete(t.row,a)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){d=e.row,f=this.data.pull[d]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(m&&c!=l-2)return!1;if(e.value!=e.old)if(m=!1,this.validate(d)){delete(f=this.data.pull[d]).id;var u=f;0==u.divisaId?s.a.postDivisa(a.a.getUsuarioCookie(),u).then((function(e){n.$scope.load(e.divisaId),$$("ofertasHitosGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putDivisa(a.a.getUsuarioCookie(),u).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("ofertasHitosGrid").count();$$("OfertasHitosNReg").config.label="NREG: "+e,$$("OfertasHitosNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=this.getParentView()._data.ofertaId;h=o,this.win3=this.ui(l.default),this.load(o)},t.prototype.load=function(e){s.a.getOfertasHitosOferta(a.a.getUsuarioCookie(),e).then((function(e){e=s.a.prepareData(e),$$("ofertasHitosGrid").clearAll(),$$("ofertasHitosGrid").parse(n.a.prepareDataForDataTable("ofertaHitoId",e));var t=$$("ofertasHitosGrid").count();$$("OfertasHitosNReg").config.label="NREG: "+t,$$("OfertasHitosNReg").refresh()})).catch((function(e){r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.win3.showWindow(h,e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteOfertaHito(a.a.getUsuarioCookie(),e).then((function(e){i.load(h)})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("ofertasHitosGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load(h)},t}(i.c);t.default=w},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(7);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-flag",width:37,align:"left"},{view:"label",label:t("Paises")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/paisesForm?paisId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("paisesGrid"),{filename:"paises",name:"Paises",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"PaisesNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"paisesGrid",pager:"mypager",select:"row",columns:[{id:"paisId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre de pais"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"codPais",header:[t("Código"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,codPais:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.paisId?s.a.postPais(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.paisId),$$("paisesGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putPais(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("paisesGrid").count();$$("PaisesNReg").config.label="NREG: "+e,$$("PaisesNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.paisId&&(o=t[0].params.paisId),webix.UIManager.addHotKey("Esc",(function(){return $$("paisesGrid").remove(-1),!1}),$$("paisesGrid")),webix.extend($$("paisesGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("paisesGrid").showProgress(),s.a.getPaises(a.a.getUsuarioCookie()).then((function(t){$$("paisesGrid").clearAll(),$$("paisesGrid").parse(n.a.prepareDataForDataTable("paisId",t)),e&&($$("paisesGrid").select(e),$$("paisesGrid").showItem(e));var o=$$("paisesGrid").count();$$("PaisesNReg").config.label="NREG: "+o,$$("PaisesNReg").refresh(),$$("paisesGrid").hideProgress()})).catch((function(e){$$("paisesGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/paisesForm?paisId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deletePais(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("paisesGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(7),n=(o(8),o(1));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"paisesForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-flag",width:37,align:"left"},{view:"label",label:e("Paises")}]},{view:"form",id:"frmPaises",elements:[{cols:[{view:"text",name:"paisId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre de pais"),labelPosition:"top"},{view:"text",name:"codPais",required:!0,label:e("Código"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]}]},{minheight:600}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.paisId&&(l=t[0].params.paisId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getPais(a.a.getUsuarioCookie(),e).then((function(e){$$("frmPaises").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/paises")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmPaises").validate()){var o=$$("frmPaises").getValues();0==l?(o.paisId=0,r.a.postPais(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/paises?paisId="+t.paisId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putPais(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/paises?paisId="+o.paisId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(8),n=o(1);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"parametrosForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-altimeter",width:37,align:"left"},{view:"label",label:e("Parámetros")}]},{view:"form",id:"frmParametros",elements:[{cols:[{view:"text",name:"anoEnCurso",label:e("Año en curso"),labelPosition:"top"},{view:"text",name:"valorActualAno",label:e("Contador actual"),labelPosition:"top"},{view:"text",name:"valorInicialAno",label:e("Contador inicial año"),labelPosition:"top"}]},{view:"textarea",name:"docAppSpain",label:e("Documentos aplicables (ESPAÑA)"),labelPosition:"top"},{view:"textarea",name:"docAppUk",label:e("Documentos aplicables (UK)"),labelPosition:"top"},{view:"textarea",name:"docAppFrance",label:e("Documentos aplicables (FRANCIA)"),labelPosition:"top"},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel},{view:"button",label:e("Aceptar"),click:this.accept,type:"form"}]}]}]}},t.prototype.init=function(){a.a.checkLoggedUser(),this.load()},t.prototype.load=function(){r.a.getParametros(a.a.getUsuarioCookie()).then((function(e){$$("frmParametros").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/inicio")},t.prototype.accept=function(){var e=this,t=$$("frmParametros").getValues();r.a.putParametros(a.a.getUsuarioCookie(),t).then((function(t){e.$scope.show("/top/inicio")})).catch((function(e){n.a.errorMessageAjax(e)}))},t}(i.c);t.default=l},function(e,t,o){"use strict";o.r(t);var i,a=o(4),r=(o(0),o(1),o(3),o(2),o(33));function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){return n(this,t),s(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",borderless:!0,rows:[{cols:[{view:"icon",icon:"mdi mdi-message-processing",width:37,click:this.rptType1},{borderless:!0,template:e("<strong>PPR Short:</strong> Informe corto de tres página. Haga clic en el icono para visualizarlo"),click:this.rptType1}]},{cols:[{view:"icon",icon:"mdi mdi-message-text",width:37,click:this.rptType2},{borderless:!0,template:e("<strong>PPR Complete:</strong> Informe completo de cuatro páginas. Haga clic en el icono para visualizarlo"),click:this.rptType2}]},{cols:[{view:"icon",icon:"mdi mdi-message-settings",width:37,click:this.rptType3},{borderless:!0,template:e("<strong>PPR Annex:</strong> Informe solo con los annexos. Haga clic en el icono para visualizarlo"),click:this.rptType3}]}]}},t.prototype.init=function(e,t){i=this.getParentView()._data.ofertaId,this.pprReport2=this.ui(r.default)},t.prototype.rptType1=function(){this.$scope.pprReport2.showWindow(i,1)},t.prototype.rptType2=function(){this.$scope.pprReport2.showWindow(i,2)},t.prototype.rptType3=function(){this.$scope.pprReport2.showWindow(i,3)},t}(a.c);t.default=c},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(20);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-thumb-down",width:37,align:"left"},{view:"label",label:t("Razones perdida")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/razonesPerdidaForm?razonPerdidaId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("razonesPerdidaGrid"),{filename:"razonesPerdida",name:"RazonesPerdida",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"RazonesPerdidaNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"razonesPerdidaGrid",pager:"mypager",select:"row",columns:[{id:"razonPerdidaId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre razon perdida"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"nombreEN",header:[t("Nombre Francés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"nombreFR",header:[t("Nombre Inglés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,nombreEN:webix.rules.isNotEmpty,nombreFR:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.razonPerdidaId?s.a.postRazonPerdida(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.razonPerdidaId),$$("razonesPerdidaGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putRazonPerdida(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("razonesPerdidaGrid").count();$$("RazonesPerdidaNReg").config.label="NREG: "+e,$$("RazonesPerdidaNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.razonPerdidaId&&(o=t[0].params.razonPerdidaId),webix.UIManager.addHotKey("Esc",(function(){return $$("razonesPerdidaGrid").remove(-1),!1}),$$("razonesPerdidaGrid")),webix.extend($$("razonesPerdidaGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("razonesPerdidaGrid").showProgress(),s.a.getRazonesPerdida(a.a.getUsuarioCookie()).then((function(t){$$("razonesPerdidaGrid").clearAll(),$$("razonesPerdidaGrid").parse(n.a.prepareDataForDataTable("razonPerdidaId",t)),e&&($$("razonesPerdidaGrid").select(e),$$("razonesPerdidaGrid").showItem(e));var o=$$("razonesPerdidaGrid").count();$$("RazonesPerdidaNReg").config.label="NREG: "+o,$$("RazonesPerdidaNReg").refresh(),$$("razonesPerdidaGrid").hideProgress()})).catch((function(e){$$("razonesPerdidaGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/razonesPerdidaForm?razonPerdidaId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteRazonPerdida(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("razonesPerdidaGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(20),n=(o(8),o(1));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"razonesPerdidaForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-thumb-down",width:37,align:"left"},{view:"label",label:e("Razones perdida")}]},{view:"form",id:"frmRazonesPerdida",elements:[{cols:[{view:"text",name:"razonPerdidaId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre razon perdida"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreEN",required:!0,label:e("Nombre Inglés"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreFR",required:!0,label:e("Nombre Francés"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.razonPerdidaId&&(l=t[0].params.razonPerdidaId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getRazonPerdida(a.a.getUsuarioCookie(),e).then((function(e){$$("frmRazonesPerdida").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/razonesPerdida")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmRazonesPerdida").validate()){var o=$$("frmRazonesPerdida").getValues();0==l?(o.razonPerdidaId=0,r.a.postRazonPerdida(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/razonesPerdida?razonPerdidaId="+t.razonPerdidaId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putRazonPerdida(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/razonesPerdida?razonPerdidaId="+o.razonPerdidaId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(24),c=o(34);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p,d,f=!1,m=0,h=[],b=a.a.getSyncUsuarios(a.a.getUsuarioCookie());b.err?r.a.errorMessageAjax(b.err):h=n.a.prepareDataForCombo("usuarioId","nombre",b.data);var g=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-account-arrow-left",width:37,align:"left"},{view:"label",label:t("Seguidores de la oferta")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.win3.showWindow(m,0)}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("seguidoresGrid"),{filename:"divisas",name:"Seguidores",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"SeguidoresNReg",label:"NREG: "},{view:"pager",id:"mypagerOfSeguidores",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"seguidoresGrid",pager:"mypagerOfSeguidores",select:"row",columns:[{id:"seguidorId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"usuarioId",fillspace:!0,header:[t("Seguidor"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:h},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i="Seguidor "+this.data.pull[t.row].seguidorId;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){p=e.row,d=this.data.pull[p]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(f&&c!=l-2)return!1;if(e.value!=e.old)if(f=!1,this.validate(p)){delete(d=this.data.pull[p]).id;var u=d;0==u.divisaId?s.a.postDivisa(a.a.getUsuarioCookie(),u).then((function(e){n.$scope.load(e.divisaId),$$("seguidoresGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putDivisa(a.a.getUsuarioCookie(),u).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("seguidoresGrid").count();$$("SeguidoresNReg").config.label="NREG: "+e,$$("SeguidoresNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=this.getParentView()._data.ofertaId;m=o,this.win3=this.ui(c.default),this.load(o)},t.prototype.load=function(e){s.a.getSeguidoresOferta(a.a.getUsuarioCookie(),e).then((function(e){e=s.a.prepareData(e),$$("seguidoresGrid").clearAll(),$$("seguidoresGrid").parse(n.a.prepareDataForDataTable("seguidorId",e));var t=$$("seguidoresGrid").count();$$("SeguidoresNReg").config.label="NREG: "+t,$$("SeguidoresNReg").refresh()})).catch((function(e){r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.win3.showWindow(m,e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteSeguidor(a.a.getUsuarioCookie(),e).then((function(e){i.load(m)})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("seguidoresGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load(m)},t}(i.c);t.default=g},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(18),c=o(5);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p,d,f=!1,m=[],h=c.a.getSyncAreas(a.a.getUsuarioCookie());h.err?r.a.errorMessageAjax(h.err):m=n.a.prepareDataForCombo("areaId","nombre",h.data);var b=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube-unfolded",width:37,align:"left"},{view:"label",label:t("Servicios")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/serviciosForm?servicioId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("serviciosGrid"),{filename:"servicios",name:"Servicios",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"ServiciosNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"serviciosGrid",pager:"mypager",select:"row",columns:[{id:"servicioId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre servicio"),{content:"textFilter"}],sort:"string",editor:"text",minWidth:200},{id:"nombreEN",header:[t("Nombre Inglés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"nombreFR",header:[t("Nombre Francés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"areaId",header:[t("Area"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:m,width:200},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,nombreEN:webix.rules.isNotEmpty,nombreFR:webix.rules.isNotEmpty,areaId:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){p=e.row,d=this.data.pull[p]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(f&&c!=l-2)return!1;if(e.value!=e.old)if(f=!1,this.validate(p)){delete(d=this.data.pull[p]).id;var u=d;0==(u=s.a.cleanData(u)).servicioId?s.a.postServicio(a.a.getUsuarioCookie(),u).then((function(e){n.$scope.load(e.servicioId),$$("serviciosGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putServicio(a.a.getUsuarioCookie(),u).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("serviciosGrid").count();$$("ServiciosNReg").config.label="NREG: "+e,$$("ServiciosNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.servicioId&&(o=t[0].params.servicioId),webix.UIManager.addHotKey("Esc",(function(){return $$("serviciosGrid").remove(-1),!1}),$$("serviciosGrid")),webix.extend($$("serviciosGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("serviciosGrid").showProgress(),s.a.getServicios(a.a.getUsuarioCookie()).then((function(t){$$("serviciosGrid").clearAll(),$$("serviciosGrid").parse(n.a.prepareDataForDataTable("servicioId",t)),e&&($$("serviciosGrid").select(e),$$("serviciosGrid").showItem(e));var o=$$("serviciosGrid").count();$$("ServiciosNReg").config.label="NREG: "+o,$$("ServiciosNReg").refresh(),$$("serviciosGrid").hideProgress()})).catch((function(e){$$("serviciosGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/serviciosForm?servicioId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteServicio(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("serviciosGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=b},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(5),n=o(18),s=o(1),c=o(3);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=0,d=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"serviciosForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube-outline",width:37,align:"left"},{view:"label",label:e("Servicios")}]},{view:"form",id:"frmServicios",elements:[{cols:[{view:"text",name:"servicioId",width:200,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre servicio"),labelPosition:"top"}]},{cols:[{width:200},{view:"combo",id:"cmbArea",name:"areaId",required:!0,options:{},label:e("Area"),labelPosition:"top"}]},{cols:[{width:200},{view:"text",name:"nombreEN",required:!0,label:e("Nombre Inglés"),labelPosition:"top"}]},{cols:[{width:200},{view:"text",name:"nombreFR",required:!0,label:e("Nombre Francés"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minlength:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.servicioId&&(p=t[0].params.servicioId),this.load(p),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){var t=this;0!=e?n.a.getServicio(a.a.getUsuarioCookie(),e).then((function(e){$$("frmServicios").setValues(e),t.loadAreas(e.areaId)})).catch((function(e){s.a.errorMessageAjax(e)})):this.loadAreas()},t.prototype.cancel=function(){this.$scope.show("/top/servicios")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmServicios").validate()){var o=$$("frmServicios").getValues();o=n.a.checkFormValues(o),0==p?(o.servicioId=0,n.a.postServicio(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/servicios?servicioId="+t.servicioId)})).catch((function(e){s.a.errorMessageAjax(e)}))):n.a.putServicio(a.a.getUsuarioCookie(),o).then((function(){e.$scope.show("/top/servicios?servicioId="+o.servicioId)})).catch((function(e){s.a.errorMessageAjax(e)}))}else s.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadAreas=function(e){r.a.getAreas(a.a.getUsuarioCookie()).then((function(t){var o=c.a.prepareDataForCombo("areaId","nombre",t),i=$$("cmbArea").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbArea").setValue(e),$$("cmbArea").refresh())}))},t}(i.c);t.default=d},function(e,t,o){"use strict";o.r(t);var i=o(4),a=(o(2),o(0));function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){return r(this,t),n(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{template:"GDES PIPELINE starting ..."}},t.prototype.init=function(){a.a.checkLoggedUser()&&this.app.show("top/inicio")},t}(i.c);t.default=s},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(6),n=o(5),s=o(1),c=o(3);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._,t={header:"Datos generales",body:{rows:[{cols:[{padding:5,rows:[{template:"This is C1",type:"section"},{cols:[{view:"text",name:"nombre1",required:!0,attributes:{tabindex:1},label:e("Nombre 1"),labelPosition:"top"},{view:"text",name:"nombre11",required:!0,attributes:{tabindex:2},label:e("Nombre 11"),labelPosition:"top"}]}]},{padding:5,rows:[{template:"This is C2",type:"section"},{cols:[{view:"text",name:"nombre1",required:!0,attributes:{tabindex:3},label:e("Nombre 1"),labelPosition:"top"},{view:"text",name:"nombre11",required:!0,attributes:{tabindex:4},label:e("Nombre 11"),labelPosition:"top"}]},{cols:[{view:"text",name:"nombre1",required:!0,attributes:{tabindex:5},label:e("Nombre 1"),labelPosition:"top"},{view:"text",name:"nombre11",required:!0,attributes:{tabindex:6},label:e("Nombre 11"),labelPosition:"top"}]},{view:"textarea",name:"nombre1",required:!0,attributes:{tabindex:7},label:e("Nombre 1"),labelPosition:"top"}]}]}]}},o={header:"Económicos",body:{cols:[{width:200},{view:"text",name:"nombre2",required:!0,attributes:{tabindex:8},label:e("Nombre 2"),labelPosition:"top"}]}};return{view:"layout",id:"testsForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube-outline",width:37,align:"left"},{view:"label",label:e("Tests")}]},{view:"form",id:"frmTests",elements:[{view:"tabview",cells:[t,o]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minlength:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),$$("frmTests").setValues({nombre1:"MI no1",nombre11:"El 11",nombre2:"MI no2"})},t.prototype.load=function(e){},t.prototype.cancel=function(){this.$scope.show("/top/tests")},t.prototype.accept=function(){var e=this.$scope.app.getService("locale")._;if($$("frmTests").validate({hidden:!0})){var t=$$("frmTests").getValues();t=n.a.checkFormValues(t),s.a.normalMessage("Ha pasado validación")}else s.a.errorMessage(e("Debe rellenar los campos correctamente"))},t.prototype.loadUnidadesNegocio=function(e){r.a.getUnidadesNegocio(a.a.getUsuarioCookie()).then((function(t){var o=c.a.prepareDataForCombo("unidadNegocioId","nombre",t),i=$$("cmbUnidadNegocio").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbUnidadNegocio").setValue(e),$$("cmbUnidadNegocio").refresh())}))},t}(i.c);t.default=p},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(21);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-shape-outline",width:37,align:"left"},{view:"label",label:t("Tipos de contrato")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/tiposContratoForm?tipoContratoId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("tiposContratoGrid"),{filename:"tiposContrato",name:"TiposContrato",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"TiposContratoNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"tiposContratoGrid",pager:"mypager",select:"row",columns:[{id:"tipoContratoId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre tipo de contrato"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"nombreEN",header:[t("Nombre Francés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"nombreFR",header:[t("Nombre Inglés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,nombreEN:webix.rules.isNotEmpty,nombreFR:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.tipoContratoId?s.a.postTipoContrato(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.tipoContratoId),$$("tiposContratoGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putTipoContrato(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("tiposContratoGrid").count();$$("TiposContratoNReg").config.label="NREG: "+e,$$("TiposContratoNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.tipoContratoId&&(o=t[0].params.tipoContratoId),webix.UIManager.addHotKey("Esc",(function(){return $$("tiposContratoGrid").remove(-1),!1}),$$("tiposContratoGrid")),webix.extend($$("tiposContratoGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("tiposContratoGrid").showProgress(),s.a.getTiposContrato(a.a.getUsuarioCookie()).then((function(t){$$("tiposContratoGrid").clearAll(),$$("tiposContratoGrid").parse(n.a.prepareDataForDataTable("tipoContratoId",t)),e&&($$("tiposContratoGrid").select(e),$$("tiposContratoGrid").showItem(e));var o=$$("tiposContratoGrid").count();$$("TiposContratoNReg").config.label="NREG: "+o,$$("TiposContratoNReg").refresh(),$$("tiposContratoGrid").hideProgress()})).catch((function(e){$$("tiposContratoGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/tiposContratoForm?tipoContratoId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteTipoContrato(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("tiposContratoGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(21),n=(o(8),o(1));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"tiposContratoForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-shape-outline",width:37,align:"left"},{view:"label",label:e("Tipos de contrato")}]},{view:"form",id:"frmTiposContrato",elements:[{cols:[{view:"text",name:"tipoContratoId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre tipo de contrato"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreEN",required:!0,label:e("Nombre Inglés"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreFR",required:!0,label:e("Nombre Francés"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.tipoContratoId&&(l=t[0].params.tipoContratoId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getTipoContrato(a.a.getUsuarioCookie(),e).then((function(e){$$("frmTiposContrato").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/tiposContrato")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmTiposContrato").validate()){var o=$$("frmTiposContrato").getValues();0==l?(o.tipoContratoId=0,r.a.postTipoContrato(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/tiposContrato?tipoContratoId="+t.tipoContratoId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putTipoContrato(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/tiposContrato?tipoContratoId="+o.tipoContratoId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(17);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-shape",width:37,align:"left"},{view:"label",label:t("Tipos de oportunidad")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/tiposOportunidadForm?tipoOportunidadId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("tiposOportunidadGrid"),{filename:"tiposOportunidad",name:"TiposOportunidad",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"TiposOportunidadNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"tiposOportunidadGrid",pager:"mypager",select:"row",columns:[{id:"tipoOportunidadId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre tipo de oportunidad"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"nombreEN",header:[t("Nombre Francés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"nombreFR",header:[t("Nombre Inglés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,nombreEN:webix.rules.isNotEmpty,nombreFR:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.tipoOportunidadId?s.a.postTipoOportunidad(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.tipoOportunidadId),$$("tiposOportunidadGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putTipoOportunidad(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("tiposOportunidadGrid").count();$$("TiposOportunidadNReg").config.label="NREG: "+e,$$("TiposOportunidadNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.tipoOportunidadId&&(o=t[0].params.tipoOportunidadId),webix.UIManager.addHotKey("Esc",(function(){return $$("tiposOportunidadGrid").remove(-1),!1}),$$("tiposOportunidadGrid")),webix.extend($$("tiposOportunidadGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("tiposOportunidadGrid").showProgress(),s.a.getTiposOportunidad(a.a.getUsuarioCookie()).then((function(t){$$("tiposOportunidadGrid").clearAll(),$$("tiposOportunidadGrid").parse(n.a.prepareDataForDataTable("tipoOportunidadId",t)),e&&($$("tiposOportunidadGrid").select(e),$$("tiposOportunidadGrid").showItem(e));var o=$$("tiposOportunidadGrid").count();$$("TiposOportunidadNReg").config.label="NREG: "+o,$$("TiposOportunidadNReg").refresh(),$$("tiposOportunidadGrid").hideProgress()})).catch((function(e){r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/tiposOportunidadForm?tipoOportunidadId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteTipoOportunidad(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("tiposOportunidadGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(17),n=(o(8),o(1));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"tiposOportunidadForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-shape",width:37,align:"left"},{view:"label",label:e("Tipos de oportunidad")}]},{view:"form",id:"frmTiposOportunidad",elements:[{cols:[{view:"text",name:"tipoOportunidadId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre tipo de oportunidad"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreEN",required:!0,label:e("Nombre Inglés"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreFR",required:!0,label:e("Nombre Francés"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.tipoOportunidadId&&(l=t[0].params.tipoOportunidadId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getTipoOportunidad(a.a.getUsuarioCookie(),e).then((function(e){$$("frmTiposOportunidad").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/tiposOportunidad")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmTiposOportunidad").validate()){var o=$$("frmTiposOportunidad").getValues();0==l?(o.tipoOportunidadId=0,r.a.postTipoOportunidad(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/tiposOportunidad?tipoOportunidadId="+t.tipoOportunidadId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putTipoOportunidad(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/tiposOportunidad?tipoOportunidadId="+o.tipoOportunidadId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(28),r=o(29),n=o(0),s=o(22);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){return{type:"view",rows:[r.default,{cols:[a.default,{view:"resizer",id:"resizer"},{$subview:!0}]}]}},t.prototype.init=function(){var e=n.a.checkLoggedUser();s.languageService.setLanguage(this.app,e.codigoIdioma)},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(14);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-map-marker-outline",width:37,align:"left"},{view:"label",label:t("Ubicaciones")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/ubicacionesForm?ubicacionId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("ubicacionesGrid"),{filename:"ubicaciones",name:"Ubicaciones",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"UbicacionesNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"ubicacionesGrid",pager:"mypager",select:"row",columns:[{id:"ubicacionId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre ubicacion"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,cod:webix.rules.isNotEmpty,paisId:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.ubicacionId?s.a.postUbicacion(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.ubicacionId),$$("ubicacionesGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putUbicacion(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("ubicacionesGrid").count();$$("UbicacionesNReg").config.label="NREG: "+e,$$("UbicacionesNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.ubicacionId&&(o=t[0].params.ubicacionId),webix.UIManager.addHotKey("Esc",(function(){return $$("ubicacionesGrid").remove(-1),!1}),$$("ubicacionesGrid")),webix.extend($$("ubicacionesGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("ubicacionesGrid").showProgress(),s.a.getUbicaciones(a.a.getUsuarioCookie()).then((function(t){$$("ubicacionesGrid").clearAll(),$$("ubicacionesGrid").parse(n.a.prepareDataForDataTable("ubicacionId",t)),e&&($$("ubicacionesGrid").select(e),$$("ubicacionesGrid").showItem(e));var o=$$("ubicacionesGrid").count();$$("UbicacionesNReg").config.label="NREG: "+o,$$("UbicacionesNReg").refresh(),$$("ubicacionesGrid").hideProgress()})).catch((function(e){$$("ubicacionesGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/ubicacionesForm?ubicacionId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteUbicacion(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("ubicacionesGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(14),n=o(1);o(3);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"ubicacionesForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-map-marker-outline",width:37,align:"left"},{view:"label",label:e("Ubicaciones")}]},{view:"form",id:"frmUbicaciones",elements:[{cols:[{view:"text",name:"ubicacionId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre ubicacion"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]},{minheight:600}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.ubicacionId&&(l=t[0].params.ubicacionId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getUbicacion(a.a.getUsuarioCookie(),e).then((function(e){$$("frmUbicaciones").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/ubicaciones")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmUbicaciones").validate()){var o=$$("frmUbicaciones").getValues();0==l?(o.ubicacionId=0,r.a.postUbicacion(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/ubicaciones?ubicacionId="+t.ubicacionId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putUbicacion(a.a.getUsuarioCookie(),o).then((function(){e.$scope.show("/top/ubicaciones?ubicacionId="+o.ubicacionId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(6);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u,p,d=!1,f=function(e){function t(){return c(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube-scan",width:37,align:"left"},{view:"label",label:t("Unidades de negocio")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/unidadesNegocioForm?unidadNegocioId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("unidadesNegocioGrid"),{filename:"unidadesNegocio",name:"UnidadesNegocio",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"UnidadesNegocioNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"unidadesNegocioGrid",pager:"mypager",select:"row",columns:[{id:"unidadNegocioId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre unidad de negocio"),{content:"textFilter"}],sort:"string",editor:"text"},{id:"nombreEN",header:[t("Nombre Inglés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"nombreFR",header:[t("Nombre Francés"),{content:"textFilter"}],sort:"string",editor:"text",width:250},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,nombreEN:webix.rules.isNotEmpty,nombreFR:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){u=e.row,p=this.data.pull[u]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(d&&c!=l-2)return!1;if(e.value!=e.old)if(d=!1,this.validate(u)){delete(p=this.data.pull[u]).id;var f=p;0==f.unidadNegocioId?s.a.postUnidadNegocio(a.a.getUsuarioCookie(),f).then((function(e){n.$scope.load(e.unidadNegocioId),$$("unidadesNegocioGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putUnidadNegocio(a.a.getUsuarioCookie(),f).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("unidadesNegocioGrid").count();$$("UnidadesNegocioNReg").config.label="NREG: "+e,$$("UnidadesNegocioNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.unidadNegocioId&&(o=t[0].params.unidadNegocioId),webix.UIManager.addHotKey("Esc",(function(){return $$("unidadesNegocioGrid").remove(-1),!1}),$$("unidadesNegocioGrid")),webix.extend($$("unidadesNegocioGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){$$("unidadesNegocioGrid").showProgress(),s.a.getUnidadesNegocio(a.a.getUsuarioCookie()).then((function(t){$$("unidadesNegocioGrid").clearAll(),$$("unidadesNegocioGrid").parse(n.a.prepareDataForDataTable("unidadNegocioId",t)),e&&($$("unidadesNegocioGrid").select(e),$$("unidadesNegocioGrid").showItem(e));var o=$$("unidadesNegocioGrid").count();$$("UnidadesNegocioNReg").config.label="NREG: "+o,$$("UnidadesNegocioNReg").refresh(),$$("unidadesNegocioGrid").hideProgress()})).catch((function(e){$$("unidadesNegocioGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/unidadesNegocioForm?unidadNegocioId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteUnidadNegocio(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("unidadesNegocioGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=f},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(6),n=(o(8),o(1));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=0,u=function(e){function t(){return s(this,t),c(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"unidadesNegocioForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-cube-scan",width:37,align:"left"},{view:"label",label:e("Unidades de negocio")}]},{view:"form",id:"frmUnidadesNegocio",elements:[{cols:[{view:"text",name:"unidadNegocioId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre unidad de negocio"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreEN",required:!0,label:e("Nombre Inglés"),labelPosition:"top"}]},{cols:[{width:100},{view:"text",name:"nombreFR",required:!0,label:e("Nombre Francés"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]}]}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.unidadNegocioId&&(l=t[0].params.unidadNegocioId),this.load(l),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){0!=e&&r.a.getUnidadNegocio(a.a.getUsuarioCookie(),e).then((function(e){$$("frmUnidadesNegocio").setValues(e)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/unidadesNegocio")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmUnidadesNegocio").validate()){var o=$$("frmUnidadesNegocio").getValues();0==l?(o.unidadNegocioId=0,r.a.postUnidadNegocio(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/unidadesNegocio?unidadNegocioId="+t.unidadNegocioId)})).catch((function(e){n.a.errorMessageAjax(e)}))):r.a.putUnidadNegocio(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/unidadesNegocio?unidadNegocioId="+o.unidadNegocioId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t}(i.c);t.default=u},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(12),c=o(10),l=o(7),u=o(5),p=o(6);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m,h,b=!1,g=[],w=l.a.getSyncPaises(a.a.getUsuarioCookie());w.err?r.a.errorMessageAjax(w.err):g=n.a.prepareDataForCombo("paisId","nombre",w.data);var v=[],y=s.a.getSyncGruposUsuarios(a.a.getUsuarioCookie());y.err?r.a.errorMessageAjax(y.err):v=n.a.prepareDataForCombo("grupoUsuarioId","nombre",y.data);var x=[],$=c.a.getSyncEmpresas(a.a.getUsuarioCookie());$.err?r.a.errorMessageAjax($.err):x=n.a.prepareDataForCombo("empresaId","nombre",$.data);var C=[],I=u.a.getSyncAreas(a.a.getUsuarioCookie());I.err?r.a.errorMessageAjax(I.err):C=n.a.prepareDataForCombo("areaId","nombre",I.data);var U=[],A=p.a.getSyncUnidadesNegocio(a.a.getUsuarioCookie());A.err?r.a.errorMessageAjax(A.err):U=n.a.prepareDataForCombo("unidadNegocioId","nombre",A.data);var P=[],E=a.a.getSyncUsuarios(a.a.getUsuarioCookie());E.err?r.a.errorMessageAjax(E.err):P=n.a.prepareDataForCombo("usuarioId","nombre",E.data);var j=function(e){function t(){return d(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;return{rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-account",width:37,align:"left"},{view:"label",label:t("Usuarios")}]},{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.show("/top/usuariosForm?usuarioId=0")}},{view:"button",type:"icon",icon:"mdi mdi-refresh",width:37,align:"left",hotkey:"Ctrl+L",click:function(){e.cleanAndload()}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("usuariosGrid"),{filename:"usuarios",name:"Usuarios",rawValues:!0,ignore:{actions:!0}})}},{view:"label",id:"UsuariosNReg",label:"NREG: "},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"usuariosGrid",pager:"mypager",select:"row",columns:[{id:"usuarioId",adjust:!0,header:[t("ID"),{content:"numberFilter"}],sort:"number"},{id:"nombre",fillspace:!0,header:[t("Nombre usuario"),{content:"textFilter"}],sort:"string",editor:"text",minWidth:200},{id:"codigoIdioma",fillspace:!0,header:[t("Idioma"),{content:"textFilter"}],sort:"string",editor:"text",minWidth:100},{id:"grupoUsuarioId",header:[t("Grupo usuarios"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:v,width:200},{id:"esAdministrador",fillspace:!0,header:[t("Administrador"),{content:"textFilter"}],template:"{common.checkbox()}",sort:"string",editor:"checkbox",minWidth:100},{id:"responsableId",header:[t("Responsable"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:P,width:200},{id:"paisId",header:[t("Pais"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:g,width:200},{id:"empresaId",header:[t("Empresa"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:x,width:200},{id:"areaId",header:[t("Area"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:C,width:200},{id:"unidadNegocioId",header:[t("Unidad negocio"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:U,width:200},{id:"emailAzure",fillspace:!0,header:[t("Correo Azure"),{content:"textFilter"}],sort:"string",editor:"text",minWidth:200},{id:"ubicacion",fillspace:!0,header:[t("Ubicación"),{content:"textFilter"}],sort:"string",editor:"text",minWidth:200},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],rightSplit:1,onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{nombre:webix.rules.isNotEmpty,codigoIdioma:webix.rules.isNotEmpty,grupoUsuarioId:webix.rules.isNotEmpty,emailAzure:webix.rules.isNotEmpty},on:{onAfterEditStart:function(e){m=e.row,h=this.data.pull[m]},onAfterEditStop:function(e,o,i){var n=this,s=this.getColumnIndex(o.column),c=this.config.columns.length;if(b&&s!=c-2)return!1;if(e.value!=e.old||b)if(b=!1,this.validate(m)){delete(h=this.data.pull[m]).id,delete h.grupo,delete h.responsable;var l=h;0==l.usuarioId?a.a.postUsuario(a.a.getUsuarioCookie(),l).then((function(e){n.$scope.load(e.usuarioId),$$("usuariosGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):a.a.putUsuario(a.a.getUsuarioCookie(),l).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))},onAfterFilter:function(){var e=$$("usuariosGrid").count();$$("UsuariosNReg").config.label="NREG: "+e,$$("UsuariosNReg").refresh()}}}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser();var o=null;t[0].params.usuarioId&&(o=t[0].params.usuarioId),webix.UIManager.addHotKey("Esc",(function(){return $$("usuariosGrid").remove(-1),!1}),$$("usuariosGrid")),webix.extend($$("usuariosGrid"),webix.ProgressBar),this.load(o)},t.prototype.load=function(e){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(t){$$("usuariosGrid").clearAll(),$$("usuariosGrid").parse(n.a.prepareDataForDataTable("usuarioId",t)),e&&($$("usuariosGrid").select(e),$$("usuariosGrid").showItem(e));var o=$$("usuariosGrid").count();$$("UsuariosNReg").config.label="NREG: "+o,$$("UsuariosNReg").refresh(),$$("usuariosGrid").hideProgress()})).catch((function(e){$$("usuariosGrid").hideProgress(),r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.show("/top/usuariosForm?usuarioId="+e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&a.a.deleteUsuario(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t.prototype.cleanAndload=function(){$$("usuariosGrid").eachColumn((function(e,t){if("actions"!=t.id){var o=this.getFilter(e);o&&(o.setValue?o.setValue(""):o.value="")}})),this.load()},t}(i.c);t.default=j},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(7),n=o(1),s=o(3),c=o(12),l=o(10),u=o(5),p=o(6);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=0,h=function(e){function t(){return d(this,t),f(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this.app.getService("locale")._;return{view:"layout",id:"usuariosForm",rows:[{view:"toolbar",padding:3,elements:[{view:"icon",icon:"mdi mdi-account",width:37,align:"left"},{view:"label",label:e("Usuarios")}]},{view:"form",id:"frmUsuarios",elements:[{cols:[{view:"text",name:"usuarioId",width:100,disabled:!0,label:e("ID"),labelPosition:"top"},{view:"text",name:"nombre",required:!0,id:"firstField",label:e("Nombre usuario"),labelPosition:"top"},{view:"combo",id:"cmbGrupo",name:"grupoUsuarioId",options:{},label:e("Grupo visualización (1)"),labelPosition:"top"}]},{cols:[{width:100},{view:"combo",id:"cmbGrupo2",name:"grupoUsuarioId2",options:{},label:e("Grupo visualización (2)"),labelPosition:"top"},{view:"combo",id:"cmbGrupo3",name:"grupoUsuarioId3",options:{},label:e("Grupo visualización (3)"),labelPosition:"top"}]},{cols:[{width:100},{view:"combo",id:"cmbGrupo4",name:"grupoUsuarioId4",options:{},label:e("Grupo visualización (4)"),labelPosition:"top"},{view:"combo",id:"cmbGrupo5",name:"grupoUsuarioId5",options:{},label:e("Grupo visualización (5)"),labelPosition:"top"}]},{cols:[{width:100},{view:"combo",id:"cmbGrupo6",name:"grupoUsuarioId6",options:{},label:e("Grupo visualización (6)"),labelPosition:"top"},{view:"combo",id:"cmbGrupo7",name:"grupoUsuarioId7",options:{},label:e("Grupo visualización (7)"),labelPosition:"top"}]},{cols:[{view:"text",name:"codigoIdioma",width:100,required:!0,label:e("Idioma"),labelPosition:"top"},{view:"checkbox",name:"esAdministrador",required:!0,label:e("Administrador"),labelPosition:"top"},{view:"combo",id:"cmbResponsable",name:"responsableId",required:!0,options:{},label:e("Responsable"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbPais",name:"paisId",required:!0,options:{},label:e("Pais relacionado"),labelPosition:"top"},{view:"combo",id:"cmbEmpresa",name:"empresaId",required:!0,options:{},label:e("Empresa"),labelPosition:"top"}]},{cols:[{view:"combo",id:"cmbArea",name:"areaId",required:!0,options:{},label:e("Area"),labelPosition:"top"},{view:"combo",id:"cmbUnidadNegocio",name:"unidadNegocioId",required:!0,options:{},label:e("Unidad negocio"),labelPosition:"top"}]},{cols:[{view:"text",name:"emailAzure",required:!0,label:e("Correo Azure"),labelPosition:"top"},{view:"text",name:"ubicacion",label:e("Ubicación"),labelPosition:"top"}]},{margin:5,cols:[{gravity:5},{view:"button",label:e("Cancelar"),click:this.cancel,hotkey:"esc"},{view:"button",label:e("Aceptar"),click:this.accept,type:"form",hotkey:"enter"}]}]},{minheight:600}]}},t.prototype.init=function(e,t){a.a.checkLoggedUser(),t[0].params.usuarioId&&(m=t[0].params.usuarioId),this.load(m),webix.delay((function(){$$("firstField").focus()}))},t.prototype.load=function(e){var t=this;if(0==e)return this.loadGruposUsuarios(),this.loadGruposUsuarios2(),this.loadGruposUsuarios3(),this.loadGruposUsuarios4(),this.loadGruposUsuarios5(),this.loadGruposUsuarios6(),this.loadGruposUsuarios7(),this.loadAreas(),this.loadEmpresas(),this.loadResponsables(),this.loadUnidadesNegocio(),void this.loadPaises();a.a.getUsuario(a.a.getUsuarioCookie(),e).then((function(e){$$("frmUsuarios").setValues(e),t.loadGruposUsuarios(e.grupoUsuarioId),t.loadGruposUsuarios2(e.grupoUsuarioId2),t.loadGruposUsuarios3(e.grupoUsuarioId3),t.loadGruposUsuarios4(e.grupoUsuarioId4),t.loadGruposUsuarios5(e.grupoUsuarioId5),t.loadGruposUsuarios6(e.grupoUsuarioId6),t.loadGruposUsuarios7(e.grupoUsuarioId7),t.loadAreas(e.areaId),t.loadEmpresas(e.empresaId),t.loadResponsables(e.responsableId),t.loadUnidadesNegocio(e.unidadNegocioId),t.loadPaises(e.paisId)})).catch((function(e){n.a.errorMessageAjax(e)}))},t.prototype.cancel=function(){this.$scope.show("/top/usuarios")},t.prototype.accept=function(){var e=this,t=this.$scope.app.getService("locale")._;if($$("frmUsuarios").validate()){var o=$$("frmUsuarios").getValues();o.grupoUsuarioId&&-1!==o.grupoUsuarioId||(o.grupoUsuarioId=null),o.grupoUsuarioId2&&-1!==o.grupoUsuarioId2||(o.grupoUsuarioId2=null),o.grupoUsuarioId3&&-1!==o.grupoUsuarioId3||(o.grupoUsuarioId3=null),o.grupoUsuarioId4&&-1!==o.grupoUsuarioId4||(o.grupoUsuarioId4=null),o.grupoUsuarioId5&&-1!==o.grupoUsuarioId5||(o.grupoUsuarioId5=null),o.grupoUsuarioId6&&-1!==o.grupoUsuarioId6||(o.grupoUsuarioId6=null),o.grupoUsuarioId7&&-1!==o.grupoUsuarioId7||(o.grupoUsuarioId7=null),o=a.a.cleanData(o),0==m?(o.usuarioId=0,a.a.postUsuario(a.a.getUsuarioCookie(),o).then((function(t){e.$scope.show("/top/usuarios?usuarioId="+t.usuarioId)})).catch((function(e){n.a.errorMessageAjax(e)}))):a.a.putUsuario(a.a.getUsuarioCookie(),o).then((function(){e.$scope.show("/top/usuarios?usuarioId="+o.usuarioId)})).catch((function(e){n.a.errorMessageAjax(e)}))}else n.a.errorMessage(t("Debe rellenar los campos correctamente"))},t.prototype.loadResponsables=function(e){a.a.getUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("usuarioId","nombre",t),i=$$("cmbResponsable").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbResponsable").setValue(e),$$("cmbResponsable").refresh())}))},t.prototype.loadAreas=function(e){u.a.getAreas(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("areaId","nombre",t),i=$$("cmbArea").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbArea").setValue(e),$$("cmbArea").refresh())}))},t.prototype.loadEmpresas=function(e){l.a.getEmpresas(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("empresaId","nombre",t),i=$$("cmbEmpresa").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbEmpresa").setValue(e),$$("cmbEmpresa").refresh())}))},t.prototype.loadPaises=function(e){r.a.getPaises(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("paisId","nombre",t),i=$$("cmbPais").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbPais").setValue(e),$$("cmbPais").refresh())}))},t.prototype.loadUnidadesNegocio=function(e){p.a.getUnidadesNegocio(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("unidadNegocioId","nombre",t),i=$$("cmbUnidadNegocio").getPopup().getList();i.clearAll(),i.parse(o),id&&($$("cmbUnidadNegocio").setValue(e),$$("cmbUnidadNegocio").refresh())}))},t.prototype.loadGruposUsuarios=function(e){c.a.getGruposUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("grupoUsuarioId","nombre",t);o.push({id:-1,value:""});var i=$$("cmbGrupo").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbGrupo").setValue(e),$$("cmbGrupo").refresh())}))},t.prototype.loadGruposUsuarios2=function(e){c.a.getGruposUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("grupoUsuarioId","nombre",t);o.push({id:-1,value:""});var i=$$("cmbGrupo2").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbGrupo2").setValue(e),$$("cmbGrupo2").refresh())}))},t.prototype.loadGruposUsuarios3=function(e){c.a.getGruposUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("grupoUsuarioId","nombre",t);o.push({id:-1,value:""});var i=$$("cmbGrupo3").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbGrupo3").setValue(e),$$("cmbGrupo3").refresh())}))},t.prototype.loadGruposUsuarios4=function(e){c.a.getGruposUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("grupoUsuarioId","nombre",t);o.push({id:-1,value:""});var i=$$("cmbGrupo4").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbGrupo4").setValue(e),$$("cmbGrupo4").refresh())}))},t.prototype.loadGruposUsuarios5=function(e){c.a.getGruposUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("grupoUsuarioId","nombre",t);o.push({id:-1,value:""});var i=$$("cmbGrupo5").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbGrupo5").setValue(e),$$("cmbGrupo5").refresh())}))},t.prototype.loadGruposUsuarios6=function(e){c.a.getGruposUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("grupoUsuarioId","nombre",t);o.push({id:-1,value:""});var i=$$("cmbGrupo6").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbGrupo6").setValue(e),$$("cmbGrupo6").refresh())}))},t.prototype.loadGruposUsuarios7=function(e){c.a.getGruposUsuarios(a.a.getUsuarioCookie()).then((function(t){var o=s.a.prepareDataForCombo("grupoUsuarioId","nombre",t);o.push({id:-1,value:""});var i=$$("cmbGrupo7").getPopup().getList();i.clearAll(),i.parse(o),e&&($$("cmbGrupo7").setValue(e),$$("cmbGrupo7").refresh())}))},t}(i.c);t.default=h},function(e,t,o){"use strict";o.r(t);var i=o(4),a=o(0),r=o(1),n=o(3),s=o(11),c=o(35);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p,d,f=!1,m=[],h=a.a.getSyncUsuarios(a.a.getUsuarioCookie());h.err?r.a.errorMessageAjax(h.err):m=n.a.prepareDataForCombo("usuarioId","nombre",h.data),webix.editors.editdate=webix.extend({render:function(e){var t=webix.html.create("div",{class:"webix_dt_editor"},"<input type='date'><span class='mdi mdi-calendar' style='position:absolute; cursor:pointer; top:4px; right:4px;'></span>");return t.childNodes[1].onclick=function(){var e=webix.UIManager.getFocus(),t=e.getEditor();e.editStop(!1);var o=e.getColumnConfig(t.column);o.editor="date",e.editCell(t.row,t.column),o.editor="editdate"},t}},webix.editors.text);var b=function(e){function t(){return l(this,t),u(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.config=function(){var e=this,t=this.app.getService("locale")._;t("Versiones");return{rows:[{cols:[{view:"button",type:"icon",icon:"wxi-plus",width:37,align:"left",hotkey:"Ctrl+F",click:function(){e.win2.showWindow(null,0)}},{view:"button",type:"icon",icon:"wxi-plus-square",width:37,align:"left",hotkey:"Ctrl+L",click:function(){$$("versionesGrid").editStop();var e=$$("versionesGrid").add({id:-1,versionId:0});$$("versionesGrid").showItem(e),$$("versionesGrid").edit({row:-1,column:"nombre"}),f=!0}},{view:"button",type:"icon",icon:"wxi-download",width:37,align:"right",click:function(){webix.toExcel($$("versionesGrid"),{filename:"versiones",name:"Versiones",rawValues:!0,ignore:{actions:!0}})}},{},{view:"pager",id:"mypager",css:{"text-align":"right"},template:"{common.first()} {common.prev()} {common.pages()} {common.next()} {common.last()}",size:25,group:5}]},{view:"datatable",id:"versionesGrid",pager:"mypager",select:"row",columns:[{id:"numVersion",adjust:!0,header:[t("Version"),{content:"numberFilter"}],sort:"number"},{id:"usuarioId",header:[t("Usuario"),{content:"selectFilter"}],sort:"string",editor:"combo",collection:m,width:200},{id:"fechaCambio",header:[{text:t("Fecha cambio"),css:{"text-align":"center"}},{content:"textFilter"}],editor:"editdate",width:200,format:webix.i18n.dateFormatStr,sort:"string"},{id:"fechaEntrega",header:[{text:t("Fecha entrega"),css:{"text-align":"center"}},{content:"textFilter"}],editor:"editdate",width:200,format:webix.i18n.dateFormatStr,sort:"string"},{id:"observaciones",fillspace:!0,header:[t("Observaciones"),{content:"textFilter"}],sort:"string",editor:"text",minWidth:200},{id:"importePresupuesto",adjust:!0,header:[t("Importe"),{content:"numberFilter"}],sort:"int",format:webix.i18n.priceFormat,css:{"text-align":"right"}},{id:"actions",header:[{text:t("Acciones"),css:{"text-align":"center"}}],template:"<span class='onEdit webix_icon wxi-pencil'></span><span class='onDelete webix_icon wxi-trash'></span>",css:{"text-align":"center"}}],onClick:{onDelete:function(e,t,o){var i=this.data.pull[t.row].nombre;this.$scope.delete(t.row,i)},onEdit:function(e,t,o){this.$scope.edit(t.row)}},editable:!0,editaction:"dblclick",rules:{},on:{onAfterEditStart:function(e){p=e.row,d=this.data.pull[p]},onAfterEditStop:function(e,o,i){var n=this,c=this.getColumnIndex(o.column),l=this.config.columns.length;if(f&&c!=l-2)return!1;if(e.value!=e.old)if(f=!1,this.validate(p)){delete(d=this.data.pull[p]).id;var u=d;0==(u=s.a.checkFormValues(u)).versionId?s.a.postVersion(a.a.getUsuarioCookie(),u).then((function(e){n.$scope.load(e.versionId),$$("versionesGrid").editStop()})).catch((function(e){r.a.errorMessageAjax(e)})):s.a.putVersion(a.a.getUsuarioCookie(),u).then((function(e){})).catch((function(e){r.a.errorMessageAjax(e)}))}else r.a.errorMessage(t("Valores incorrectos"))}}}]}},t.prototype.init=function(e,t){var o=this.getParentView()._data.ofertaId;a.a.checkLoggedUser();var i=null;t[0].params.versionId&&(i=t[0].params.versionId),webix.UIManager.addHotKey("Esc",(function(){return $$("versionesGrid").remove(-1),!1}),$$("versionesGrid")),this.load(o,i),this.win2=this.ui(c.default)},t.prototype.load=function(e,t){s.a.getVersionesOferta(a.a.getUsuarioCookie(),e).then((function(e){$$("versionesGrid").clearAll(),$$("versionesGrid").parse(n.a.prepareDataForDataTableWidthDates("versionId",["fechaCambio","fechaEntrega"],e)),t&&($$("versionesGrid").select(t),$$("versionesGrid").showItem(t))})).catch((function(e){r.a.errorMessageAjax(e)}))},t.prototype.edit=function(e){this.win2.showWindow(null,e)},t.prototype.delete=function(e,t){var o=this.app.getService("locale")._,i=this;webix.confirm(o("¿Seguro que quiere eliminar ")+t+"?",(function(t){!0===t&&s.a.deleteVersion(a.a.getUsuarioCookie(),e).then((function(e){i.load()})).catch((function(e){r.a.errorMessageAjax(e)}))}))},t}(i.c);t.default=b},function(e,t,o){"use strict";o.r(t),t.default={Inicio:"Home","Administración":"Administration","Parámetros":"Parameters",paginainicio:"\n        <h1>Initial page</h1>\n        <p>This is the inital page in English</p>\n    ","Año en curso":"Current year","Contador actual":"Current counter","Contador inicial año":"Initial year counter","Documentos aplicables (ESPAÑA)":"Applicable documents (SPAIN)","Documentos aplicables (UK)":"Applicable documents (UK)","Documentos aplicables (FRANCIA)":"Applicable documents (FRANCE)",Aceptar:"Accept",Cancelar:"Cancel","Grupos de usuarios":"User groups","Nombre de grupo":"Group name",ID:"ID",Acciones:"Actions","¿Seguro que quiere eliminar ":"Are you sure to delete ","Debe rellenar los campos correctamente":"You must fill in the fields correctly","Valores incorrectos":"Wrong values",Paises:"Countries","Nombre de pais":"Country name","Código":"Code",Empresas:"Companies","Nombre empresa":"Company name","Pais relacionado":"Related country","Unidades de negocio":"Business units","Unidad de negocio":"Business unit","Nombre unidad de negocio":"Business unit name","Nombre Francés":"French name","Nombre Inglés":"English name",Areas:"Areas","Nombre area":"Area name",Orden:"Order","Unidad negocio relacionada":"Related business unit",Usuarios:"Users","Nombre usuario":"User name",Grupo:"Group",Idioma:"Language",Administrador:"Administrator",Responsable:"Responsable",Area:"Area","Unidad negocio":"Business unit","Correo Azure":"Azure Email","Ubicación":"Location","Grupo usuarios":"Users group",Pais:"Country",Empresa:"Company","Fases de oferta":"Deal stages","Nombre fase de oferta":"Deal stage name","Tipos de oportunidad":"Type of deal","Nombre tipo de oportunidad":"Type of deal name","Tipos de contrato":"Type of contract","Nombre tipo de contrato":"Type of contract name",Estados:"Statuses","Nombre estado":"Status name","Razon perdida":"Reason lost","Razones perdida":"Reasons lost","Nombre razon perdida":"Reason lost name",Divisas:"Currencies","Nombre divisa":"Currency name","Salir y logout":"Exit and logout","Nuevo registro en formulario (Ctrl+F)":"New record in form (Ctrl+F)","Nuevo registro en línea (Ctrl+L)":"New record inline (Ctrl + L)","Descargar como Excel":"Dowload as Excel","Gestión":"Pool",Ofertas:"Deals","Nr. Oferta":"Deal. N.","Fase oferta":"Deal stage","Tipo oportunidad":"Deal type","Pais ubicación":"Location country","Margen (%)":"Margin (%)"}},function(e,t,o){"use strict";var i;o.r(t),t.default=((i={INICIO:"INICIO","ADMINISTRACIÓN":"ADMINISTRACIÓN","Parámetros":"Parámetros",paginainicio:"\n        <h1>Página inicial</h1>\n        <p>Esta es la página inicial en español</p>\n    ","Año en curso":"Año en curso","Contador actual":"Contador actual","Contador inicial año":"Contador inicial año","Documentos aplicables (ESPAÑA)":"Documentos aplicables (ESPAÑA)","Documentos aplicables (UK)":"Documentos aplicables (UK)","Documentos aplicables (FRANCIA)":"Documentos aplicables (FRANCIA)",Aceptar:"Aceptar",Cancelar:"Cancelar","Grupos de usuarios":"Grupos de usuarios","Nombre de grupo":"Nombre de grupo",ID:"ID",Acciones:"Acciones","¿Seguro que quiere eliminar ":"¿Seguro que quiere eliminar ","Debe rellenar los campos correctamente":"Debe rellenar los campos correctamente","Valores incorrectos":"Valores incorrectos",Paises:"Paises","Nombre de pais":"Nombre de pais","Código":"Código",Empresas:"Empresas","Nombre empresa":"Nombre empresa","Pais relacionado":"Pais relacionado","Unidades de negocio":"Unidades de negocio","Unidad de negocio":"Unidad de negocio","Nombre unidad de negocio":"Nombre unidad de negocio","Nombre Francés":"Nombre Francés","Nombre Inglés":"Nombre Inglés",Areas:"Areas","Nombre area":"Nombre area",Orden:"Orden","Unidad negocio relacionada":"Unidad negocio relacionada",Usuarios:"Usuarios","Nombre usuario":"Nombre usuario",Grupo:"Grupo",Idioma:"Idioma",Administrador:"Administrador",Responsable:"Responsable",Area:"Area","Unidad negocio":"Unidad negocio","Correo Azure":"Correo Azure","Ubicación":"Ubicación","Grupo usuarios":"Grupo usuarios",Pais:"Pais",Empresa:"Empresa","Fases de oferta":"Fases de oferta","Nombre fase de oferta":"Nombre fase de oferta","Tipos de oportunidad":"Tipos de oportunidad","Nombre tipo de oportunidad":"Nombre tipo de oportunidad","Tipos de contrato":"Tipos de contrato","Nombre tipo de contrato":"Nombre tipo de contrato",Estados:"Estados","Nombre estado":"Nombre estado","Razon perdida":"Razon perdida","Razones perdida":"Razones perdida","Nombre razon perdida":"Nombre razon perdida",Divisas:"Divisas","Nombre divisa":"Nombre divisa","Salir y logout":"Salir y logout","Nuevo registro en formulario (Ctrl+F)":"Nuevo registro en formulario (Ctrl+F)","Nuevo registro en línea (Ctrl+L)":"Nuevo registro en línea (Ctrl+L)","Descargar como Excel":"Descargar como Excel","GESTIÓN":"GESTIÓN",Ofertas:"Ofertas","Nr. Oferta":"Nr. Oferta","Fase oferta":"Fase oferta","Tipo oportunidad":"Tipo oportunidad","Pais ubicación":"Pais ubicación","Margen (%)":"Margen (%)",Cliente:"Cliente",Nombre:"Nombre","Descripción":"Descripción",Estado:"Estado",Importe:"Importe",Divisa:"Divisa","Fecha entrega":"Fecha entrega",Autorizaciones:"Autorizaciones",UTE:"UTE","UTE (%)":"UTE (%)","Num. Pedido":"Num. Pedido",Competidores:"Competidores","Fecha adjudicación":"Fecha adjudicación","Fecha inicio contrato":"Fecha inicio contrato","Fecha fin contrato":"Fecha fin contrato","Probabilidad (%)":"Probabilidad (%)","Duración":"Duración","Razón pérdida":"Razón pérdida",DESCRIPTIVOS:"DESCRIPTIVOS",Periodo:"Periodo","Nr. Licitación":"Nr. Licitación","Pais Ubicación":"Pais Ubicación",GENERALES:"GENERALES","OTROS DATOS":"OTROS DATOS",ESTADO:"ESTADO","Datos oportunidad":"Datos oportunidad","Datos económicos":"Datos económicos","Datos financieros":"Datos financieros","Datos complementarios":"Datos complementarios (PPR)",Anotaciones:"Anotaciones",Anexos:"Anexos",Servicios:"Servicios","Notas Planning":"Notas Planning",Usuario:"Usuario",Servicio:"Servicio","Cod. Oferta":"Cod. Oferta","Tipo contrato":"Tipo Contrato","Oferta singular":"Oferta singular",Relevante:"Relevante","Convertida de oportunidad":"Convertida de oportunidad","Fecha conversión":"Fecha conversión","Subrogación":"Subrogación",Probabilidad:"Probabilidad","Comentario subrogación":"Comentario subrogación","Cantidad personal":"Cantidad personal","Comentario UTE":"Comentario UTE","GDES Porcentaje":"GDES Porcentaje",Reclutamiento:"Reclutamiento","Perfil y cantidad a reclutar":"Perfil y cantidad a reclutar","Fecha creación":"Fecha creación"})["Razón pérdida"]="Razón pérdida",i["BASICOS (€)"]="BASICOS (€)",i["BASICOS (OTRA DIVISA)"]="BASICOS (OTRA DIVISA)",i["OTROS DATOS"]="OTROS DATOS",i["Importe GDES"]="Importe GDES",i["Importe UTE"]="Importe UTE",i["Importe Total"]="Importe Total",i["Margen contribución"]="Margen contribución",i["Importe margen"]="Importe margen",i["Importe anual"]="Importe anual",i["Importe año en curso"]="Importe año en curso",i["Valor inversión"]="Valor inversión",i.Divisa="Divisa",i["Factor (1€ =)"]="Factor (1€ =)",i["Fecha divisa"]="Fecha divisa",i["Importe GDES (DIVISA)"]="Importe GDES (DIVISA)",i["Importe UTE (DIVISA)"]="Importe UTE (DIVISA)",i["Importe Total (DIVISA)"]="Importe Total (DIVISA)",i["Importe margen (DIVISA)"]="Importe margen (DIVISA)",i["Importe anual (DIVISA)"]="Importe anual (DIVISA)",i["Importe año en curso (DIVISA)"]="Importe año en curso (DIVISA)",i["Valor inversión (DIVISA)"]="Valor inversión (DIVISA)",i["Descripción inversión"]="Descripción inversión",i["Condiciones de pago"]="Condiciones de pago",i["Consideraciones economicas"]="Consideraciones economicas",i["ALCANCE DE LOS TRABAJOS"]="ALCANCE DE LOS TRABAJOS",i["CUESTIONES DE CONTRATO"]="CUESTIONES DE CONTRATO",i["CONCURRENCIA Y SITUACIÓN DE MERCADO"]="CONCURRENCIA Y SITUACIÓN DE MERCADO",i["GDES VALORES Y ESTRATEGIA"]="GDES VALORES Y ESTRATEGIA",i["Alcance del Proyecto"]="Alcance del Proyecto",i["Equipo y planificación"]="Equipo y planificación",i["Documentos aplicables"]="Documentos aplicables",i["Comentarios contrato"]="Comentarios contrato",i["Comentarios garantias"]="Comentarios garantias",i.Penalizaciones="Penalizaciones",i.Riesgos="Riesgos",i["Proveedor Actual"]="Proveedor Actual",i.Competidores="Competidores",i["Principal Competidor"]="Principal Competidor",i["Criterios de Evaluación"]="Criterios de Evaluación",i["Datos Comerciales"]="Datos Comerciales",i["Propuesta diferencial GDES"]="Propuesta diferencial GDES",i["Estrategia GDES"]="Estrategia GDES",i["Sinergias con otros contratos"]="Sinergias con otros contratos",i.OPORTUNIDADES="OPORTUNIDADES",i.PROYECTOS="PROYECTOS",i.RECLAMACIONES="RECLAMACIONES",i.NOTAS="NOTAS",i["Actividades realizadas"]="Actividades realizadas",i["Actividades planificadas"]="Actividades planificadas",i["Situación de proyecto"]="Situación de proyecto",i["Importe reclamación (1)"]="Importe reclamación (1)",i["Razón reclamación (1)"]="Razón reclamación (1)",i["Importe reclamación (2)"]="Importe reclamación (2)",i["Razón reclamación (2)"]="Razón reclamación (2)",i["Importe reclamación (3)"]="Importe reclamación (3)",i["Razón reclamación (3)"]="Razón reclamación (3)",i["Importe reclamación (4)"]="Importe reclamación (4)",i["Razón reclamación (4)"]="Razón reclamación (4)",i.Observaciones="Observaciones",i["Datos de la oferta"]="Datos de la oferta",i.Versiones="Versiones",i.Seguidores="Seguidores",i.Version="Version",i["Fecha cambio"]="Fecha cambio",i["Fecha entrega"]="Fecha entrega",i["Num. Version"]="Num. Version",i.autorizacionX="Faltan datos para determinar la autorización necesaria. Ponerse en contacto con el Departamento de Apoyo a Ofertas",i.autorizacion0="Aprueba: Responsable de oferta",i.autorizacion1="Aprueba el director del área de servicio",i.autorizacion2="Requiere PPR y autorización conjunta de CM y director de BU",i.autorizacion3="Requiere PPR y comité de ofertas. Aprueba CEO",i["Nueva oferta"]="Nueva oferta",i)},function(e,t,o){"use strict";o.r(t),t.default={"Ancient Dashboard":"Ancient Dashboard"}},function(e,t,o){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t,o){for(var i in e)a(e,i)&&t.call(o||e,e[i],i,e)}function n(e){e="Warning: "+e,"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}}var s=String.prototype.replace,c=String.prototype.split,l=function(e){var t=e%10;return 11!==e&&1===t?0:2<=t&&t<=4&&!(e>=12&&e<=14)?1:2},u={arabic:function(e){if(e<3)return e;var t=e%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:l,chinese:function(){return 0},croatian:l,french:function(e){return e>1?1:0},german:function(e){return 1!==e?1:0},russian:l,lithuanian:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){if(1===e)return 0;var t=e%10;return 2<=t&&t<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!=1||e%100==11?1:0},slovenian:function(e){var t=e%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},p={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function d(e){var t,o=(t={},r(p,(function(e,o){r(e,(function(e){t[e]=o}))})),t);return o[e]||o[c.call(e,/-/,1)[0]]||o.en}function f(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var m=/\$/g,h=/%\{(.*?)\}/g;function b(e,t,o,i){if("string"!=typeof e)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return e;var r=e,n=i||h,l="number"==typeof t?{smart_count:t}:t;if(null!=l.smart_count&&r){var p=c.call(r,"||||");r=(p[function(e,t){return u[d(e)](t)}(o||"en",l.smart_count)]||p[0]).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return r=s.call(r,n,(function(e,t){return a(l,t)&&null!=l[t]?s.call(l[t],m,"$$"):e}))}function g(e){var t=e||{};this.phrases={},this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var o=t.allowMissing?b:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:o,this.warn=t.warn||n,this.tokenRegex=function(e){var t=e&&e.prefix||"%{",o=e&&e.suffix||"}";if("||||"===t||"||||"===o)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(f(t)+"(.*?)"+f(o),"g")}(t.interpolation)}g.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},g.prototype.extend=function(e,t){r(e,(function(e,o){var a=t?t+"."+o:o;"object"===(void 0===e?"undefined":i(e))?this.extend(e,a):this.phrases[a]=e}),this)},g.prototype.unset=function(e,t){"string"==typeof e?delete this.phrases[e]:r(e,(function(e,o){var a=t?t+"."+o:o;"object"===(void 0===e?"undefined":i(e))?this.unset(e,a):delete this.phrases[a]}),this)},g.prototype.clear=function(){this.phrases={}},g.prototype.replace=function(e){this.clear(),this.extend(e)},g.prototype.t=function(e,t){var o,i,a=null==t?{}:t;if("string"==typeof this.phrases[e])o=this.phrases[e];else if("string"==typeof a._)o=a._;else if(this.onMissingKey){i=(0,this.onMissingKey)(e,a,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+e+'"'),i=e;return"string"==typeof o&&(i=b(o,a,this.currentLocale,this.tokenRegex)),i},g.prototype.has=function(e){return a(this.phrases,e)},g.transformPhrase=function(e,t,o){return b(e,t,o)},e.exports=g},function(e,t,o){"use strict";o.r(t);var i=o(4),a=(o(89),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e});var r=function(e){function t(o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={id:"WX_GDES_PIPELINE",version:"1.0.12",router:i.a,debug:!1,start:"/startapp",name:"GDES PIPELINE"};return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,a({},r,o)))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i.b);t.default=r,webix.ready((function(){var e=new r;e.use(i.d.Locale),e.use(i.d.Theme),e.render(),e.getService("theme").setTheme("mini")}))},function(e,t){var o=webix,i=webix.version.split(".");10*i[0]+1*i[1]<53&&(o.ui.freeze=function(e){var t=e();return t&&t.then?t.then((function(e){return o.ui.$freeze=!1,o.ui.resize(),e})):(o.ui.$freeze=!1,o.ui.resize()),t});var a=o.ui.baselayout.prototype.addView,r=o.ui.baselayout.prototype.removeView,n={addView:function(e,t){if(this.$scope&&this.$scope.webixJet){var o=this.$scope,i={};e=o.app.copyConfig(e,{},i),a.apply(this,[e,t]);var r=function(e){o._renderFrame(e,i[e],o.getUrl()).then((function(){o._subs[e]=i[e]}))};for(var n in i)r(n);return e.id}return a.apply(this,arguments)},removeView:function(){if(r.apply(this,arguments),this.$scope&&this.$scope.webixJet){var e=this.$scope._subs;for(var t in e)webix.$$(e[t].id)||delete e[t]}}};o.extend(o.ui.layout.prototype,n,!0),o.extend(o.ui.baselayout.prototype,n,!0),webix.protoUI({name:"jetapp",$init:function(e){this.$app=new this.app(e);var t=webix.uid().toString();e.body={id:t},this.$ready.push((function(){this.$app.render(webix.$$(t))}))}},webix.ui.proxy)},function(e,t,o){var i={"./areas":37,"./areas.js":37,"./areasForm":38,"./areasForm.js":38,"./divisas":39,"./divisas.js":39,"./divisasForm":40,"./divisasForm.js":40,"./empresas":41,"./empresas.js":41,"./empresasForm":42,"./empresasForm.js":42,"./estados":43,"./estados.js":43,"./estadosForm":44,"./estadosForm.js":44,"./fasesOferta":45,"./fasesOferta.js":45,"./fasesOfertaForm":46,"./fasesOfertaForm.js":46,"./gruposUsuarios":47,"./gruposUsuarios.js":47,"./gruposUsuariosForm":48,"./gruposUsuariosForm.js":48,"./gruposUsuariosLineas":26,"./gruposUsuariosLineas.js":26,"./gruposUsuariosLineasWindow":27,"./gruposUsuariosLineasWindow.js":27,"./inicio":49,"./inicio.js":49,"./layout":50,"./layout.js":50,"./loginauto":51,"./loginauto.js":51,"./mainMenu":28,"./mainMenu.js":28,"./mainToolbar":29,"./mainToolbar.js":29,"./ofertas":52,"./ofertas.js":52,"./ofertasForm":53,"./ofertasForm.js":53,"./ofertasHitos":54,"./ofertasHitos.js":54,"./ofertasHitosWindow":32,"./ofertasHitosWindow.js":32,"./ofertasWindow":30,"./ofertasWindow.js":30,"./paises":55,"./paises.js":55,"./paisesForm":56,"./paisesForm.js":56,"./parametros":57,"./parametros.js":57,"./pprReport":33,"./pprReport.js":33,"./pprview":58,"./pprview.js":58,"./razonesPerdida":59,"./razonesPerdida.js":59,"./razonesPerdidaForm":60,"./razonesPerdidaForm.js":60,"./seguidores":61,"./seguidores.js":61,"./seguidoresWindow":34,"./seguidoresWindow.js":34,"./servicios":62,"./servicios.js":62,"./serviciosForm":63,"./serviciosForm.js":63,"./startapp":64,"./startapp.js":64,"./test":65,"./test.js":65,"./tiposContrato":66,"./tiposContrato.js":66,"./tiposContratoForm":67,"./tiposContratoForm.js":67,"./tiposOportunidad":68,"./tiposOportunidad.js":68,"./tiposOportunidadForm":69,"./tiposOportunidadForm.js":69,"./top":70,"./top.js":70,"./ubicaciones":71,"./ubicaciones.js":71,"./ubicacionesForm":72,"./ubicacionesForm.js":72,"./ubicacionesWindow":31,"./ubicacionesWindow.js":31,"./unidadesNegocio":73,"./unidadesNegocio.js":73,"./unidadesNegocioForm":74,"./unidadesNegocioForm.js":74,"./usuarios":75,"./usuarios.js":75,"./usuariosForm":76,"./usuariosForm.js":76,"./versiones":77,"./versiones.js":77,"./versionesForm":35,"./versionesForm.js":35};function a(e){var t=r(e);return o(t)}function r(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=84},function(e,t,o){var i={"./en":78,"./en.js":78,"./en.txt":86,"./es":79,"./es.js":79,"./es.txt":87,"./fr":80,"./fr.js":80,"./fr.txt":88,"./language_service":22,"./language_service.js":22};function a(e){var t=r(e);return o(t)}function r(e){if(!o.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}a.keys=function(){return Object.keys(i)},a.resolve=r,e.exports=a,a.id=85},function(e,t,o){"use strict";o.r(t),t.default={Inicio:"Home","Administración":"Administration","Parámetros":"Parameters",paginainicio:"\n        <h1>Initial page</h1>\n        <p>This is the inital page in English</p>\n    ","Año en curso":"Current year","Contador actual":"Current counter","Contador inicial año":"Initial year counter","Documentos aplicables (ESPAÑA)":"Applicable documents (SPAIN)","Documentos aplicables (UK)":"Applicable documents (UK)","Documentos aplicables (FRANCIA)":"Applicable documents (FRANCE)",Aceptar:"Accept",Cancelar:"Cancel","Grupos de usuarios":"User groups","Nombre de grupo":"Group name",ID:"ID",Acciones:"Actions","¿Seguro que quiere eliminar ":"Are you sure to delete ","Debe rellenar los campos correctamente":"You must fill in the fields correctly","Valores incorrectos":"Wrong values",Paises:"Countries","Nombre de pais":"Country name","Código":"Code",Empresas:"Companies","Nombre empresa":"Company name","Pais relacionado":"Related country","Unidades de negocio":"Business units","Unidad de negocio":"Business unit","Nombre unidad de negocio":"Business unit name","Nombre Francés":"French name","Nombre Inglés":"English name",Areas:"Areas","Nombre area":"Area name",Orden:"Order","Unidad negocio relacionada":"Related business unit",Usuarios:"Users","Nombre usuario":"User name",Grupo:"Group",Idioma:"Language",Administrador:"Administrator",Responsable:"Responsable",Area:"Area","Unidad negocio":"Business unit","Correo Azure":"Azure Email","Ubicación":"Location","Grupo usuarios":"Users group",Pais:"Country",Empresa:"Company","Fases de oferta":"Deal stages","Nombre fase de oferta":"Deal stage name","Tipos de oportunidad":"Type of deal","Nombre tipo de oportunidad":"Type of deal name","Tipos de contrato":"Type of contract","Nombre tipo de contrato":"Type of contract name",Estados:"Statuses","Nombre estado":"Status name","Razon perdida":"Reason lost","Razones perdida":"Reasons lost","Nombre razon perdida":"Reason lost name",Divisas:"Currencies","Nombre divisa":"Currency name","Salir y logout":"Exit and logout","Nuevo registro en formulario (Ctrl+F)":"New record in form (Ctrl+F)","Nuevo registro en línea (Ctrl+L)":"New record inline (Ctrl + L)","Descargar como Excel":"Dowload as Excel","Gestión":"Pool",Ofertas:"Deals","Nr. Oferta":"Deal. N.","Fase oferta":"Deal stage","Tipo oportunidad":"Deal type","Pais ubicación":"Location country","Margen (%)":"Margin (%)"}},function(e,t,o){"use strict";o.r(t),t.default={INICIO:"INICIO","ADMINISTRACIÓN":"ADMINISTRACIÓN","Parámetros":"Parámetros",paginainicio:"\n        <h1>Página inicial</h1>\n        <p>Esta es la página inicial en español</p>\n    ","Año en curso":"Año en curso","Contador actual":"Contador actual","Contador inicial año":"Contador inicial año","Documentos aplicables (ESPAÑA)":"Documentos aplicables (ESPAÑA)","Documentos aplicables (UK)":"Documentos aplicables (UK)","Documentos aplicables (FRANCIA)":"Documentos aplicables (FRANCIA)",Aceptar:"Aceptar",Cancelar:"Cancelar","Grupos de usuarios":"Grupos de usuarios","Nombre de grupo":"Nombre de grupo",ID:"ID",Acciones:"Acciones","¿Seguro que quiere eliminar ":"¿Seguro que quiere eliminar ","Debe rellenar los campos correctamente":"Debe rellenar los campos correctamente","Valores incorrectos":"Valores incorrectos",Paises:"Paises","Nombre de pais":"Nombre de pais","Código":"Código",Empresas:"Empresas","Nombre empresa":"Nombre empresa","Pais relacionado":"Pais relacionado","Unidades de negocio":"Unidades de negocio","Unidad de negocio":"Unidad de negocio","Nombre unidad de negocio":"Nombre unidad de negocio","Nombre Francés":"Nombre Francés","Nombre Inglés":"Nombre Inglés",Areas:"Areas","Nombre area":"Nombre area",Orden:"Orden","Unidad negocio relacionada":"Unidad negocio relacionada",Usuarios:"Usuarios","Nombre usuario":"Nombre usuario",Grupo:"Grupo",Idioma:"Idioma",Administrador:"Administrador",Responsable:"Responsable",Area:"Area","Unidad negocio":"Unidad negocio","Correo Azure":"Correo Azure","Ubicación":"Ubicación","Grupo usuarios":"Grupo usuarios",Pais:"Pais",Empresa:"Empresa","Fases de oferta":"Fases de oferta","Nombre fase de oferta":"Nombre fase de oferta","Tipos de oportunidad":"Tipos de oportunidad","Nombre tipo de oportunidad":"Nombre tipo de oportunidad","Tipos de contrato":"Tipos de contrato","Nombre tipo de contrato":"Nombre tipo de contrato",Estados:"Estados","Nombre estado":"Nombre estado","Razon perdida":"Razon perdida","Razones perdida":"Razones perdida","Nombre razon perdida":"Nombre razon perdida",Divisas:"Divisas","Nombre divisa":"Nombre divisa","Salir y logout":"Salir y logout","Nuevo registro en formulario (Ctrl+F)":"Nuevo registro en formulario (Ctrl+F)","Nuevo registro en línea (Ctrl+L)":"Nuevo registro en línea (Ctrl+L)","Descargar como Excel":"Descargar como Excel","GESTIÓN":"GESTIÓN",Ofertas:"Ofertas","Nr. Oferta":"Nr. Oferta","Fase oferta":"Fase oferta","Tipo oportunidad":"Tipo oportunidad","Pais ubicación":"Pais ubicación","Margen (%)":"Margen (%)",Cliente:"Cliente",Nombre:"Nombre","Descripción":"Descripción",Estado:"Estado",Importe:"Importe",Divisa:"Divisa","Fecha entrega":"Fecha entrega",Autorizaciones:"Autorizaciones",UTE:"UTE","UTE (%)":"UTE (%)","Num. Pedido":"Num. Pedido",Competidores:"Competidores","Fecha adjudicación":"Fecha adjudicación","Fecha inicio contrato":"Fecha inicio contrato","Fecha fin contrato":"Fecha fin contrato","Probabilidad (%)":"Probabilidad (%)","Duración":"Duración","Razón pérdida":"Razón pérdida",DESCRIPTIVOS:"DESCRIPTIVOS",Periodo:"Periodo","Nr. Licitación":"Nr. Licitación","Pais Ubicación":"Pais Ubicación",GENERALES:"GENERALES","OTROS DATOS":"OTROS DATOS",ESTADO:"ESTADO","Datos oportunidad":"Datos oportunidad","Datos económicos":"Datos económicos","Datos financieros":"Datos financieros","Datos complementarios":"Datos complementarios (PPR)",Anotaciones:"Anotaciones",Anexos:"Anexos",Servicios:"Servicios","Notas Planning":"Notas Planning",Usuario:"Usuario",Servicio:"Servicio","Cod. Oferta":"Cod. Oferta","Tipo contrato":"Tipo Contrato","Oferta singular":"Oferta singular",Relevante:"Relevante","Convertida de oportunidad":"Convertida de oportunidad","Fecha conversión":"Fecha conversión","Subrogación":"Subrogación",Probabilidad:"Probabilidad","Comentario subrogación":"Comentario subrogación","Cantidad personal":"Cantidad personal","Comentario UTE":"Comentario UTE","GDES Porcentaje":"GDES Porcentaje",Reclutamiento:"Reclutamiento","Perfil y cantidad a reclutar":"Perfil y cantidad a reclutar","Fecha creación":"Fecha creación","Razón pérdida":"Razón pérdida","BASICOS (€)":"BASICOS (€)","BASICOS (OTRA DIVISA)":"BASICOS (OTRA DIVISA)","OTROS DATOS":"OTROS DATOS","Importe GDES":"Importe GDES","Importe UTE":"Importe UTE","Importe Total":"Importe Total","Margen contribución":"Margen contribución","Importe margen":"Importe margen","Importe anual":"Importe anual","Importe año en curso":"Importe año en curso","Valor inversión":"Valor inversión",Divisa:"Divisa","Factor (1€ =)":"Factor (1€ =)","Fecha divisa":"Fecha divisa","Importe GDES (DIVISA)":"Importe GDES (DIVISA)","Importe UTE (DIVISA)":"Importe UTE (DIVISA)","Importe Total (DIVISA)":"Importe Total (DIVISA)","Importe margen (DIVISA)":"Importe margen (DIVISA)","Importe anual (DIVISA)":"Importe anual (DIVISA)","Importe año en curso (DIVISA)":"Importe año en curso (DIVISA)","Valor inversión (DIVISA)":"Valor inversión (DIVISA)","Descripción inversión":"Descripción inversión","Condiciones de pago":"Condiciones de pago","Consideraciones economicas":"Consideraciones economicas","ALCANCE DE LOS TRABAJOS":"ALCANCE DE LOS TRABAJOS","CUESTIONES DE CONTRATO":"CUESTIONES DE CONTRATO","CONCURRENCIA Y SITUACIÓN DE MERCADO":"CONCURRENCIA Y SITUACIÓN DE MERCADO","GDES VALORES Y ESTRATEGIA":"GDES VALORES Y ESTRATEGIA","Alcance del Proyecto":"Alcance del Proyecto","Equipo y planificación":"Equipo y planificación","Documentos aplicables":"Documentos aplicables","Comentarios contrato":"Comentarios contrato","Comentarios garantias":"Comentarios garantias",Penalizaciones:"Penalizaciones",Riesgos:"Riesgos","Proveedor Actual":"Proveedor Actual",Competidores:"Competidores","Principal Competidor":"Principal Competidor","Criterios de Evaluación":"Criterios de Evaluación","Datos Comerciales":"Datos Comerciales","Propuesta diferencial GDES":"Propuesta diferencial GDES","Estrategia GDES":"Estrategia GDES","Sinergias con otros contratos":"Sinergias con otros contratos",OPORTUNIDADES:"OPORTUNIDADES",PROYECTOS:"PROYECTOS",RECLAMACIONES:"RECLAMACIONES",NOTAS:"NOTAS","Actividades realizadas":"Actividades realizadas","Actividades planificadas":"Actividades planificadas","Situación de proyecto":"Situación de proyecto","Importe reclamación (1)":"Importe reclamación (1)","Razón reclamación (1)":"Razón reclamación (1)","Importe reclamación (2)":"Importe reclamación (2)","Razón reclamación (2)":"Razón reclamación (2)","Importe reclamación (3)":"Importe reclamación (3)","Razón reclamación (3)":"Razón reclamación (3)","Importe reclamación (4)":"Importe reclamación (4)","Razón reclamación (4)":"Razón reclamación (4)",Observaciones:"Observaciones","Datos de la oferta":"Datos de la oferta",Versiones:"Versiones",Seguidores:"Seguidores",Version:"Version","Fecha cambio":"Fecha cambio","Fecha entrega":"Fecha entrega","Num. Version":"Num. Version",autorizacionX:"Faltan datos para determinar la autorización necesaria. Ponerse en contacto con el Departamento de Apoyo a Ofertas",autorizacion0:"Aprueba: Responsable de oferta",autorizacion1:"Aprueba el director del área de servicio",autorizacion2:"Requiere PPR y autorización conjunta de CM y director de BU",autorizacion3:"Requiere PPR y comité de ofertas. Aprueba CEO","Nueva oferta":"Nueva oferta"}},function(e,t,o){"use strict";o.r(t),t.default={"Ancient Dashboard":"Ancient Dashboard"}},function(e,t,o){}]);